{"version":3,"file":"impulse-math-device-ts.dev.js","mappings":"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","sources":["webpack://impulse-math-device-ts/./build/Release/node_native_memory.node","webpack://impulse-math-device-ts/./src/typescript/Computation/index.ts","webpack://impulse-math-device-ts/./src/typescript/Computation/utils.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/Dataset.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/DatasetModifier/AbstractDatasetModifier.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/DatasetModifier/Callback.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/DatasetModifier/Category.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/DatasetModifier/MinMaxScaling.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/DatasetModifier/MissingData.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/DatasetModifier/Shuffle.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/DatasetModifier/Split.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/DatasetModifier/index.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/DatasetVocabulary.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/index.ts","webpack://impulse-math-device-ts/./src/typescript/DatasetBuilder/DatasetBuilder.ts","webpack://impulse-math-device-ts/./src/typescript/DatasetBuilder/DatasetBuilderSource/AbstractDatasetBuilderSource.ts","webpack://impulse-math-device-ts/./src/typescript/DatasetBuilder/DatasetBuilderSource/DatasetBuilderSourceCSV.ts","webpack://impulse-math-device-ts/./src/typescript/DatasetBuilder/DatasetBuilderSource/index.ts","webpack://impulse-math-device-ts/./src/typescript/DatasetBuilder/DatasetVocabularyBuilder.ts","webpack://impulse-math-device-ts/./src/typescript/DatasetBuilder/DatasetVocabularyBuilderSource/AbstractDatasetVocabularyBuilderSource.ts","webpack://impulse-math-device-ts/./src/typescript/DatasetBuilder/DatasetVocabularyBuilderSource/DatasetVocabularyBuilderSourceTextFile.ts","webpack://impulse-math-device-ts/./src/typescript/DatasetBuilder/DatasetVocabularyBuilderSource/index.ts","webpack://impulse-math-device-ts/./src/typescript/DatasetBuilder/index.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/AbstractLayer.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/AbstractLayer1D.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/AbstractLayer3D.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/Backpropagation/AbstractBackpropagation.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/Backpropagation/Backpropagation1Dto1D.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/Backpropagation/Backpropagation3Dto1D.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/Backpropagation/BackpropagationFactory.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/Backpropagation/BackpropagationToConv.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/Backpropagation/BackpropagationToLSTM.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/Backpropagation/BackpropagationToMaxPool.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/Backpropagation/BackpropagationToRecurrent.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/Conv.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/FullyConnected.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/LSTM.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/Logistic.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/MaxPool.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/Purelin.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/Recurrent.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/Relu.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/Softmax.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/Softplus.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/Tanh.ts","webpack://impulse-math-device-ts/./src/typescript/Layer/index.ts","webpack://impulse-math-device-ts/./src/typescript/Math/Calc.ts","webpack://impulse-math-device-ts/./src/typescript/Math/CalcColVector.ts","webpack://impulse-math-device-ts/./src/typescript/Math/CalcElement.ts","webpack://impulse-math-device-ts/./src/typescript/Math/CalcMatrix2D.ts","webpack://impulse-math-device-ts/./src/typescript/Math/CalcMatrix3D.ts","webpack://impulse-math-device-ts/./src/typescript/Math/CalcRowVector.ts","webpack://impulse-math-device-ts/./src/typescript/Math/CalcScalar.ts","webpack://impulse-math-device-ts/./src/typescript/Math/index.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Network.ts","webpack://impulse-math-device-ts/./src/typescript/Network/NetworkLSTM.ts","webpack://impulse-math-device-ts/./src/typescript/Network/NetworkRNN.ts","webpack://impulse-math-device-ts/./src/typescript/Network/index.ts","webpack://impulse-math-device-ts/./src/typescript/NetworkBuilder/AbstractNetworkBuilder.ts","webpack://impulse-math-device-ts/./src/typescript/NetworkBuilder/NetworkBuilder1D.ts","webpack://impulse-math-device-ts/./src/typescript/NetworkBuilder/NetworkBuilder3D.ts","webpack://impulse-math-device-ts/./src/typescript/NetworkBuilder/index.ts","webpack://impulse-math-device-ts/./src/typescript/Trainer/AbstractTrainer.ts","webpack://impulse-math-device-ts/./src/typescript/Trainer/Cost/AbstractCost.ts","webpack://impulse-math-device-ts/./src/typescript/Trainer/Cost/CrossEntropyCost.ts","webpack://impulse-math-device-ts/./src/typescript/Trainer/Cost/MeanSquaredErrorCost.ts","webpack://impulse-math-device-ts/./src/typescript/Trainer/MiniBatchTrainer.ts","webpack://impulse-math-device-ts/./src/typescript/Trainer/Optimizer/AbstractOptimizer.ts","webpack://impulse-math-device-ts/./src/typescript/Trainer/Optimizer/OptimizerAdagrad.ts","webpack://impulse-math-device-ts/./src/typescript/Trainer/Optimizer/OptimizerAdam.ts","webpack://impulse-math-device-ts/./src/typescript/Trainer/Optimizer/OptimizerGradientDescent.ts","webpack://impulse-math-device-ts/./src/typescript/Trainer/Optimizer/OptimizerMomentum.ts","webpack://impulse-math-device-ts/./src/typescript/Trainer/Optimizer/OptimizerRMSProp.ts","webpack://impulse-math-device-ts/./src/typescript/Trainer/Optimizer/OptimizerRNN.ts","webpack://impulse-math-device-ts/./src/typescript/Trainer/Optimizer/index.ts","webpack://impulse-math-device-ts/./src/typescript/Trainer/RNNTrainer.ts","webpack://impulse-math-device-ts/./src/typescript/Trainer/Trainer.ts","webpack://impulse-math-device-ts/./src/typescript/Trainer/index.ts","webpack://impulse-math-device-ts/./src/typescript/types.ts","webpack://impulse-math-device-ts/external commonjs2 \"csvtojson\"","webpack://impulse-math-device-ts/external node-commonjs \"fs\"","webpack://impulse-math-device-ts/external node-commonjs \"path\"","webpack://impulse-math-device-ts/webpack/bootstrap","webpack://impulse-math-device-ts/webpack/runtime/compat get default export","webpack://impulse-math-device-ts/webpack/runtime/define property getters","webpack://impulse-math-device-ts/webpack/runtime/hasOwnProperty shorthand","webpack://impulse-math-device-ts/webpack/runtime/make namespace object","webpack://impulse-math-device-ts/webpack/runtime/node module decorator","webpack://impulse-math-device-ts/webpack/runtime/publicPath","webpack://impulse-math-device-ts/./src/typescript/main.ts"],"sourcesContent":["\ntry {\n  process.dlopen(module, require(\"path\").join(__dirname, __webpack_public_path__, \"8c0d713d94b87197578f9913475daeeb.node\"));\n} catch (error) {\n  throw new Error('node-loader:\\n' + error);\n}\n","import { setDevice, getDevice } from \"./utils\";\n\nexport { setDevice, getDevice };\n","import nodenative from \"../../../build/Release/node_native_memory.node\";\n\ntype Device = any;\n\nlet currentDevice: Device = new nodenative.Device.CPU();\n\nexport const setDevice = (device: Device): void => {\n  currentDevice = device;\n};\n\nexport const getDevice = (): Device => {\n  return currentDevice;\n};\n","import { CalcMatrix2D } from \"../Math/CalcMatrix2D\";\n\nexport class Dataset {\n  public exampleSize = 0;\n  public numberOfExamples = 0;\n  public data: CalcMatrix2D | null = null;\n\n  constructor(exampleSize: number = null, numberOfExamples: number = null, data: CalcMatrix2D = null) {\n    this.exampleSize = exampleSize;\n    this.numberOfExamples = numberOfExamples;\n\n    if (data) {\n      this.data = data;\n    }\n  }\n\n  static fromMatrix(m: CalcMatrix2D): Dataset {\n    const instance = new Dataset();\n    instance.exampleSize = m.rows;\n    instance.numberOfExamples = m.cols;\n    instance.data = m;\n\n    return instance;\n  }\n\n  exampleAt(index: number): CalcMatrix2D | null {\n    return this.data.row(index).transpose();\n  }\n\n  getNumberOfExamples(): number {\n    return this.data.rows();\n  }\n\n  getExampleSize(): number {\n    return this.data.cols();\n  }\n\n  getBatch(offset: number, batchSize: number): Dataset {\n    const data = this.data.block(0, offset, this.data.rows, batchSize);\n    return Dataset.fromMatrix(data);\n  }\n\n  /*insertColumnAfter(column, size = 1) {\n    const oldData = this.data.copy();\n\n    this.exampleSize = this.data.rows + size;\n    this.data.resize(this.data.rows + size, this.data.cols);\n\n    for (let row = 0; row < this.data.rows; row += 1) {\n      for (let col = 0; col < this.data.cols; col += 1) {\n        if (row <= column) {\n          this.data.data[row][col] = oldData.data[row][col];\n        } else if (row > column && row <= column + size) {\n          this.data.data[row][col] = undefined;\n        } else if (row > column + size) {\n          this.data.data[row][col] = oldData.data[row - size][col];\n        }\n      }\n    }\n  }*/\n}\n","import { Dataset } from \"../Dataset\";\n\nexport abstract class AbstractDatasetModifier {\n  protected dataset: Dataset = null;\n\n  constructor(dataset: Dataset) {\n    this.dataset = dataset;\n  }\n\n  abstract apply(dataset: Dataset): Dataset | Array<Dataset>;\n}\n","import { AbstractDatasetModifier } from \"./AbstractDatasetModifier\";\nimport { CalcMatrix2D } from \"../../Math/CalcMatrix2D\";\nimport { Dataset } from \"../Dataset\";\n\nexport class CallbackDatasetModifier extends AbstractDatasetModifier {\n  /*protected callback: (example: CalcMatrix2D) => CalcMatrix2D = (example) => example;\n\n  apply(): Dataset {\n    for (let exampleIndex = 0; exampleIndex < this.dataset.getNumberOfExamples(); exampleIndex += 1) {\n      const example = this.callback(this.dataset.exampleAt(exampleIndex));\n      for (let row = 0; row < this.dataset.data.rows; row += 1) {\n        if (example) {\n          this.dataset.data.data[row][exampleIndex] = example.data[row][0];\n        }\n      }\n    }\n    return this.dataset;\n  }\n\n  setCallback(callback: (example: Matrix2D) => Matrix2D): CallbackDatasetModifier {\n    this.callback = callback;\n    return this;\n  }*/\n}\n","import { AbstractDatasetModifier } from \"./AbstractDatasetModifier\";\nimport { Dataset } from \"../Dataset\";\n\nexport class CategoryDatasetModifier extends AbstractDatasetModifier {\n  protected columns: Array<number>;\n\n  constructor(columns: Array<number>) {\n    super(null);\n    this.columns = columns;\n  }\n\n  apply(dataset: Dataset): Dataset {\n    let size = 0;\n    let _dataset = dataset;\n\n    this.columns.sort().forEach((column) => {\n      let [dataset, _size] = this.applyForColumn(_dataset, column + size);\n      // @ts-ignore\n      size += _size;\n      _dataset = dataset;\n    });\n    return dataset;\n  }\n\n  applyForColumn(dataset: Dataset, column: number): [Dataset, number] {\n    const example = dataset.data.row(column);\n    let values = [];\n\n    for (let row = 0; row < example.rows; row += 1) {\n      values.push(example.value(row, 0));\n    }\n\n    values = values.filter((value, index, self) => {\n      return self.indexOf(value) === index;\n    });\n\n    dataset.insertColumnAfter(column, values.length - 1);\n\n    for (let col = 0; col < dataset.data.cols; col += 1) {\n      const oldValue = dataset.data.data[column][col];\n      let index = 0;\n      for (let row = 0; row < dataset.data.rows; row += 1) {\n        if (row >= column && row < column + values.length) {\n          if (index === values.indexOf(oldValue)) {\n            dataset.data.data[row][col] = 1;\n          } else {\n            dataset.data.data[row][col] = 0;\n          }\n          index += 1;\n        }\n      }\n    }\n\n    return [dataset, values.length - 1];\n  }\n}\n","import { AbstractDatasetModifier } from \"./AbstractDatasetModifier\";\nimport { Dataset } from \"../Dataset\";\n\nexport class MinMaxScalingDatasetModifier extends AbstractDatasetModifier {\n  apply(dataset: Dataset): Dataset {\n    const newData = dataset.data.minMax();\n    dataset.data = newData;\n    return dataset;\n  }\n}\n","import { AbstractDatasetModifier } from \"./AbstractDatasetModifier\";\nimport { Dataset } from \"../Dataset\";\n\nexport class MissingDataDatasetModifier extends AbstractDatasetModifier {\n  protected modificationType = \"mean\";\n\n  apply(dataset: Dataset): Dataset {\n    const rowsToFill = [];\n    let correctExamplesCount = 0;\n    let sum = 0;\n    let valueToFill = 0;\n\n    for (let exampleIndex = 0; exampleIndex < dataset.getNumberOfExamples(); exampleIndex += 1) {\n      const example = dataset.exampleAt(exampleIndex);\n      for (let row = 0; row < dataset.getExampleSize(); row += 1) {\n        if (isNaN(example.data[row][0]) || typeof example.data[row][0] !== \"number\") {\n          rowsToFill.push({\n            row,\n            col: example,\n          });\n        } else {\n          sum += example.data[row][0];\n          correctExamplesCount++;\n        }\n      }\n    }\n\n    if (this.modificationType === \"mean\") {\n      valueToFill = sum / correctExamplesCount;\n    }\n\n    rowsToFill.forEach(({ row, col }) => {\n      dataset.data.data[row][col] = valueToFill;\n    });\n\n    return dataset;\n  }\n\n  setModificationType(type: string): MissingDataDatasetModifier {\n    this.modificationType = type;\n    return this;\n  }\n}\n","import { AbstractDatasetModifier } from \"./AbstractDatasetModifier\";\nimport { Dataset } from \"../Dataset\";\nimport { CalcMatrix2D } from \"../../Math/CalcMatrix2D\";\n\nexport class ShuffleDatasetModifier extends AbstractDatasetModifier {\n  /*public sortList: number[] = [];\n\n  constructor(dataset: Dataset) {\n    super(dataset);\n  }\n\n  apply(dataset: Dataset): Dataset {\n    return dataset;\n    let index = 0;\n    const data = Matrix.from(\n      dataset.data.transpose().data.sort((exampleA: number[], exampleB: number[]) => {\n        if (typeof this.sortList[index] === \"undefined\") {\n          // first run\n          this.sortList[index] = Math.random() - 0.5;\n        }\n        index += 1;\n        return this.sortList[index - 1];\n      })\n    ).transpose().data;\n    return new Dataset(dataset.getExampleSize(), dataset.getNumberOfExamples(), data);\n}*/\n}\n","import { AbstractDatasetModifier } from \"./AbstractDatasetModifier\";\nimport { Dataset } from \"../Dataset\";\nimport { CalcMatrix2D } from \"../../Math/CalcMatrix2D\";\n\nexport class SplitDatasetModifier extends AbstractDatasetModifier {\n  /*protected columns: Array<number>;\n\n  constructor(columns: Array<number>) {\n    super(null);\n    this.columns = columns.sort();\n  }\n\n  apply(dataset: Dataset): Array<Dataset> {\n    return [];\n    /*const inputData = [];\n    const outputData = [];\n\n    for (let col = 0; col < dataset.getNumberOfExamples(); col += 1) {\n      const example = dataset.exampleAt(col);\n      for (let row = 0, _inputIndex = 0, _outputIndex = 0; row < dataset.exampleSize; row += 1) {\n        if (this.columns.includes(row)) {\n          if (!inputData[_inputIndex]) {\n            inputData[_inputIndex] = [];\n          }\n          inputData[_inputIndex][col] = example.data[row][0];\n          _inputIndex += 1;\n        } else {\n          if (!outputData[_outputIndex]) {\n            outputData[_outputIndex] = [];\n          }\n          outputData[_outputIndex][col] = example.data[row][0];\n          _outputIndex += 1;\n        }\n      }\n    }\n\n    const newInputData = Matrix.from(inputData).transpose().data;\n    const newOutputData = Matrix.from(outputData).transpose().data;\n\n    const inputDataset = new Dataset(newInputData[0].length, newInputData.length, newInputData);\n    const outputDataset = new Dataset(newOutputData[0].length, newOutputData.length, newOutputData);\n\n    return [inputDataset, outputDataset];\n}*/\n}\n","import { CallbackDatasetModifier } from \"./Callback\";\nimport { MinMaxScalingDatasetModifier } from \"./MinMaxScaling\";\nimport { MissingDataDatasetModifier } from \"./MissingData\";\nimport { ShuffleDatasetModifier } from \"./Shuffle\";\nimport { CategoryDatasetModifier } from \"./Category\";\nimport { SplitDatasetModifier } from \"./Split\";\n\nexport {\n  CallbackDatasetModifier,\n  MinMaxScalingDatasetModifier,\n  MissingDataDatasetModifier,\n  ShuffleDatasetModifier,\n  CategoryDatasetModifier,\n  SplitDatasetModifier,\n};\n","import { CalcMatrix2D } from \"../Math/CalcMatrix2D\";\n\nexport class DatasetVocabulary {\n  /*public vocabularySize = 0;\npublic dataSize = 0;\npublic data: string = \"\";\npublic chars: string[];\n\nconstructor(str: string) {\n  this.data = str.toLowerCase();\n  const chars = [...new Set(this.data.split(\"\").sort())];\n\n  this.chars = chars;\n  this.dataSize = this.data.length;\n  this.vocabularySize = chars.length;\n}\n\ngetExamples(): string[] {\n  return this.data\n    .replace(/\\n+/, \"\\n\")\n    .split(\"\\n\")\n    .map((example: string) => {\n      return example + \"\\n\";\n    });\n}\n\ngetVocabularySize(): number {\n  return this.vocabularySize;\n}\n\ngetCharsLength(): number {\n  return this.chars.length;\n}\n\ngetCharIndices(): Object {\n  const result = {};\n  this.chars.forEach((char, i) => {\n    result[char] = i;\n  });\n  return result;\n}\n\nbuildData(tx: number = 40, stride: number = 3) {\n  const X = [];\n  const Y = [];\n\n  for (let i = 0; i < this.data.length - tx; i += stride) {\n    X.push(this.data.substr(i, tx));\n    Y.push(this.data[i + tx]);\n  }\n\n  return [X, Y];\n}\n\nvectorization(X: string[], Y: string[], nx: number = 40): [Matrix[], Matrix] {\n  const m = X.length;\n  const x = new Array(m);\n  const chars = this.getCharIndices();\n  const y = new Matrix(m, this.chars.length).setZeros();\n  let xIndex = 0;\n  let rowIndex = 0;\n\n  X.forEach((sentence: string, _m) => {\n    x[_m] = new Matrix(sentence.length, this.chars.length).setZeros();\n    sentence.split(\"\").forEach((char, t) => {\n      x[_m].data[t][chars[char]] = 1;\n      rowIndex++;\n    });\n    xIndex++;\n    rowIndex = 0;\n\n    y.data[_m][chars[Y[_m]]] = 1;\n  });\n\n  return [x, y];\n}\n\ngetChars(): string[] {\n  return this.chars;\n}\n\ngetExampleX(exampleIndex: number): Matrix {\n  const example = this.getExamples()[exampleIndex];\n  const data = [];\n  example.split(\"\").forEach((ch, row) => {\n    data[row] = [this.getCharIndices()[ch]];\n  });\n  return Matrix.from(data);\n}\n\ngetExampleY(exampleIndex: number): Matrix {\n  const example = this.getExamples()[exampleIndex];\n  const data = [];\n  example.split(\"\").forEach((ch, row) => {\n    data[row] = [this.getCharIndices()[ch]];\n  });\n  return Matrix.from(data);\n}*/\n}\n","import { Dataset } from \"./Dataset\";\n\nexport { Dataset };\n","import { Dataset } from \"../Dataset\";\nimport { AbstractDatasetBuilderSource } from \"./DatasetBuilderSource/AbstractDatasetBuilderSource\";\n\ninterface ParametersInterface {\n  transpose?: boolean;\n}\n\nexport class DatasetBuilder {\n  static fromSource(\n    sourcePromise: Promise<AbstractDatasetBuilderSource>,\n    params: ParametersInterface = {}\n  ): Promise<Dataset> {\n    return new Promise((resolve) => {\n      sourcePromise.then((source) => {\n        const matrix = source.parse();\n        const numberOfExamples = matrix.rows();\n        const exampleSize = matrix.cols();\n\n        const dataset = new Dataset(exampleSize, numberOfExamples, matrix);\n        resolve(dataset);\n      });\n    });\n  }\n}\n","import { CalcMatrix2D } from \"../../Math/CalcMatrix2D\";\n\nexport abstract class AbstractDatasetBuilderSource {\n  abstract parse(): CalcMatrix2D;\n}\n","import { AbstractDatasetBuilderSource } from \"./AbstractDatasetBuilderSource\";\nimport { CalcMatrix2D } from \"../../Math/CalcMatrix2D\";\nimport * as csvtojson from \"csvtojson\";\n\n/*enum CSVState {\n  UnquotedField,\n  QuotedField,\n  QuotedQuote,\n}*/\n\nexport class DatasetBuilderSourceCSV extends AbstractDatasetBuilderSource {\n  protected data: number[][] | string[][] | null = null;\n  protected matrixData: number[][] | string[][] = null;\n\n  constructor(data: number[][] | string[][]) {\n    super();\n    this.data = data;\n  }\n\n  static fromLocalFile(path: string): Promise<DatasetBuilderSourceCSV> {\n    /*return new Promise((resolve, reject) => {\n      fs.readFile(path, (err, buffer) => {\n        console.log(\"first\");\n        if (err) {\n          console.log(err);\n          reject();\n        } else {\n          const instance = new DatasetBuilderSourceCSV(buffer.toString(\"utf-8\"));\n          resolve(instance);\n        }\n      });\n    });*/\n    return new Promise((resolve) => {\n      csvtojson({\n        noheader: true,\n        output: \"csv\",\n      })\n        .fromFile(path)\n        .then((arr) => {\n          resolve(new DatasetBuilderSourceCSV(arr));\n        });\n    });\n  }\n\n  parse(): CalcMatrix2D {\n    const numberOfExamples = this.data.length;\n    const exampleSize = this.data[0]?.length;\n\n    if (typeof numberOfExamples !== \"undefined\" && typeof exampleSize !== \"undefined\") {\n      let data = [];\n      for (let i = 0; i < numberOfExamples; i += 1) {\n        const newData = [];\n        this.data[i].forEach((value, index) => {\n          newData.push(Number(value));\n        });\n        data = [...data, ...newData];\n      }\n      return new CalcMatrix2D(numberOfExamples, exampleSize).allocate().set(new Float64Array(data));\n    }\n\n    return new CalcMatrix2D(0, 0);\n  }\n  /*\n  protected parseLine(line: string, exampleIndexCol: number): void {\n    let state = CSVState.UnquotedField;\n    const fields = [];\n    let i = 0;\n\n    for (let j = 0; j < line.length; j += 1) {\n      const c = line.at(j);\n      switch (state) {\n        case CSVState.UnquotedField:\n          switch (c) {\n            case \",\": // end of field\n              fields.push(\"\");\n              i++;\n              break;\n            case '\"':\n              state = CSVState.QuotedField;\n              break;\n            default:\n              fields[i] += c;\n              break;\n          }\n          break;\n        case CSVState.QuotedField:\n          switch (c) {\n            case '\"':\n              state = CSVState.QuotedQuote;\n              break;\n            default:\n              fields[i] += c;\n              break;\n          }\n          break;\n        case CSVState.QuotedQuote:\n          switch (c) {\n            case \",\": // , after closing quote\n              fields.push(\"\");\n              i++;\n              state = CSVState.UnquotedField;\n              break;\n            case '\"': // \"\" -> \"\n              fields[i] += '\"';\n              state = CSVState.QuotedField;\n              break;\n            default:\n              // end of quote\n              state = CSVState.UnquotedField;\n              break;\n          }\n          break;\n      }\n\n      fields.forEach((value, row) => {\n        if (value.length === 0) {\n          value = NaN;\n        }\n        value = parseFloat(value);\n        if (!this.matrixData[row]) {\n          this.matrixData[row] = [];\n        }\n        this.matrixData[row][exampleIndexCol] = value;\n      });\n    }\n  }*/\n}\n","import { DatasetBuilderSourceCSV } from \"./DatasetBuilderSourceCSV\";\n\nexport { DatasetBuilderSourceCSV };\n","import { AbstractDatasetVocabularyBuilderSource } from \"./DatasetVocabularyBuilderSource/AbstractDatasetVocabularyBuilderSource\";\nimport { DatasetVocabulary } from \"../Dataset/DatasetVocabulary\";\n\nexport class DatasetVocabularyBuilder {\n  static fromSource(sourcePromise: Promise<AbstractDatasetVocabularyBuilderSource>): Promise<DatasetVocabulary> {\n    return new Promise((resolve) => {\n      sourcePromise.then((source) => {\n        const str = source.parse();\n        resolve(new DatasetVocabulary(str));\n      });\n    });\n  }\n}\n","export abstract class AbstractDatasetVocabularyBuilderSource {\n  abstract parse(): string;\n}\n","import * as fs from \"fs\";\nimport { AbstractDatasetVocabularyBuilderSource } from \"./AbstractDatasetVocabularyBuilderSource\";\n\nexport class DatasetVocabularyBuilderSourceTextFile extends AbstractDatasetVocabularyBuilderSource {\n  protected data: string = \"\";\n\n  constructor(data: string) {\n    super();\n    this.data = data;\n  }\n\n  static fromLocalFile(path: string): Promise<DatasetVocabularyBuilderSourceTextFile> {\n    return new Promise((resolve, reject) => {\n      fs.readFile(path, (err, buffer) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n\n        resolve(new DatasetVocabularyBuilderSourceTextFile(buffer.toString(\"utf-8\")));\n      });\n    });\n  }\n\n  parse(): string {\n    return this.data;\n  }\n}\n","import { DatasetVocabularyBuilderSourceTextFile } from \"./DatasetVocabularyBuilderSourceTextFile\";\n\nexport { DatasetVocabularyBuilderSourceTextFile };\n","import { DatasetBuilder } from \"./DatasetBuilder\";\nimport { DatasetVocabularyBuilder } from \"./DatasetVocabularyBuilder\";\n\nexport { DatasetBuilder, DatasetVocabularyBuilder };\n","import { CalcMatrix2D } from \"../Math/CalcMatrix2D\";\nimport { Dimension, Layers } from \"../types\";\nimport { AbstractBackPropagation } from \"./Backpropagation/AbstractBackpropagation\";\n\nabstract class AbstractLayer {\n  protected width = 0;\n  protected height = 0;\n  protected depth = 0;\n  public previousLayer: Layers | null = null;\n  protected backPropagation: AbstractBackPropagation | null = null;\n\n  constructor() {}\n\n  setBackPropagation(backPropagation: AbstractBackPropagation): Layers {\n    this.backPropagation = backPropagation;\n    return this;\n  }\n\n  getBackPropagation(): AbstractBackPropagation | null {\n    return this.backPropagation;\n  }\n\n  setWidth(value: number): Layers {\n    this.width = value;\n    return this;\n  }\n\n  getWidth(): number {\n    return this.width;\n  }\n\n  setHeight(value: number): Layers {\n    this.height = value;\n    return this;\n  }\n\n  getHeight(): number {\n    return this.height;\n  }\n\n  setDepth(value: number): Layers {\n    this.depth = value;\n    return this;\n  }\n\n  getDepth(): number {\n    return this.depth;\n  }\n\n  abstract getOutputWidth(): number;\n\n  abstract getOutputHeight(): number;\n\n  abstract getOutputDepth(): number;\n\n  abstract configure(): void;\n\n  abstract is1D(): boolean;\n\n  abstract is3D(): boolean;\n\n  transition(previousLayer: Layers): Layers {\n    this.previousLayer = previousLayer;\n    return this;\n  }\n\n  abstract getSize(): Dimension | number;\n\n  abstract activation(value: CalcMatrix2D): CalcMatrix2D;\n\n  abstract activationAsync(value: CalcMatrix2D): Promise<CalcMatrix2D>;\n\n  abstract getType(): string;\n\n  abstract derivative(delta: CalcMatrix2D): CalcMatrix2D;\n\n  abstract penalty(): number;\n}\n\nexport { AbstractLayer };\n","import { AbstractLayer } from \"./AbstractLayer\";\nimport { Layers } from \"../types\";\nimport { CalcMatrix2D, CalcScalar } from \"../Math\";\n\nabstract class AbstractLayer1D extends AbstractLayer {\n  protected depth = 1;\n  public W: CalcMatrix2D;\n  public b: CalcMatrix2D;\n  public A: CalcMatrix2D;\n  public Z: CalcMatrix2D;\n  public gW: CalcMatrix2D;\n  public gb: CalcMatrix2D;\n  public vW: CalcMatrix2D;\n  public sW: CalcMatrix2D;\n  public vb: CalcMatrix2D;\n  public sb: CalcMatrix2D;\n  public dW: CalcMatrix2D;\n  public db: CalcMatrix2D;\n  public dZ: CalcMatrix2D;\n\n  constructor() {\n    super();\n    this.W = new CalcMatrix2D();\n    this.b = new CalcMatrix2D();\n    this.A = new CalcMatrix2D();\n    this.Z = new CalcMatrix2D();\n    this.gW = new CalcMatrix2D();\n    this.gb = new CalcMatrix2D();\n    this.vW = new CalcMatrix2D();\n    this.vb = new CalcMatrix2D();\n    this.sW = new CalcMatrix2D();\n    this.sb = new CalcMatrix2D();\n    this.dW = new CalcMatrix2D();\n    this.db = new CalcMatrix2D();\n  }\n\n  configure(): void {\n    this.W.resize(this.getHeight(), this.getWidth());\n    this.W.setRandom(this.previousLayer ? (this.previousLayer.getHeight() as number) : this.getHeight());\n\n    this.b.resize(this.getHeight(), 1);\n    this.b.setRandom(this.previousLayer ? (this.previousLayer.getHeight() as number) : this.getHeight());\n\n    this.gW.resize(this.getHeight(), this.getWidth());\n    this.gW.setZeros();\n\n    this.gb.resize(this.getHeight(), 1);\n    this.gb.setZeros();\n\n    this.sW.resize(this.getHeight(), this.getWidth());\n    this.sW.setZeros();\n\n    this.sb.resize(this.getHeight(), 1);\n    this.sb.setZeros();\n\n    this.vW.resize(this.getHeight(), this.getWidth());\n    this.vW.setZeros();\n\n    this.vb.resize(this.getHeight(), 1);\n    this.vb.setZeros();\n\n    this.dW.resize(this.getHeight(), this.getWidth());\n    this.dW.setZeros();\n\n    this.db.resize(this.getHeight(), 1);\n    this.db.setZeros();\n  }\n\n  forward(input: CalcMatrix2D): Promise<CalcMatrix2D> {\n    this.Z = this.W.dot(input).add(this.b.replicate(1, input.cols()));\n    this.A = this.activation(this.Z);\n    return this.A;\n  }\n\n  forwardAsync(input: CalcMatrix2D): Promise<CalcMatrix2D> {\n    return new Promise((resolve) => {\n        Promise.all([\n          this.W.calcAsync((calc) => {\n            return calc.dot(input);\n          }),\n          this.b.calcAsync((calc) => {\n            return calc.replicate(1, input.cols());\n          })\n        ]).then(([dot, replicate]) => {\n          dot.calcAsync((calc) => {\n            return calc.add(replicate)\n          }).then((added) => {\n            this.Z.copyFrom(added);\n            this.activationAsync(this.Z).then((activation) => {\n              this.A.copyFrom(activation);\n\n              dot.destroy();\n              replicate.destroy();\n              added.destroy();\n              activation.destroy();\n\n              resolve(this.A);\n          })\n        })\n      });\n    })\n  }\n\n  is1D(): boolean {\n    return true;\n  }\n\n  is3D(): boolean {\n    return false;\n  }\n\n  transition(previousLayer: Layers): AbstractLayer1D {\n    if (previousLayer.is1D()) {\n      this.setWidth(previousLayer.getSize() as number);\n    } else if (previousLayer.is3D()) {\n      this.setWidth(previousLayer.getOutputWidth() * previousLayer.getOutputHeight() * previousLayer.getOutputDepth());\n    }\n\n    super.transition(previousLayer);\n\n    return this;\n  }\n\n  setSize(value: number): AbstractLayer1D {\n    this.setHeight(value as number);\n\n    return this;\n  }\n\n  getSize(): number {\n    return this.height;\n  }\n\n  getOutputWidth(): number {\n    return this.width;\n  }\n\n  getOutputHeight(): number {\n    return this.height;\n  }\n\n  getOutputDepth(): number {\n    return 1;\n  }\n\n  penalty(): CalcScalar {\n    return this.W.pow(2).sum();\n  }\n}\n\nexport { AbstractLayer1D };\n","import { AbstractLayer } from \"./AbstractLayer\";\nimport { Dimension, Layers } from \"../types\";\nimport { CalcMatrix2D } from \"../Math\";\n\nabstract class AbstractLayer3D extends AbstractLayer {\n  public W: CalcMatrix2D;\n  public b: CalcMatrix2D;\n  public A: CalcMatrix2D;\n  public Z: CalcMatrix2D;\n  public gW: CalcMatrix2D;\n  public gb: CalcMatrix2D;\n  public vW: CalcMatrix2D;\n  public sW: CalcMatrix2D;\n  public vb: CalcMatrix2D;\n  public sb: CalcMatrix2D;\n  public dW: CalcMatrix2D;\n  public db: CalcMatrix2D;\n  public dZ: CalcMatrix2D;\n\n  constructor() {\n    super();\n    this.W = new CalcMatrix2D();\n    this.b = new CalcMatrix2D();\n    this.A = new CalcMatrix2D();\n    this.Z = new CalcMatrix2D();\n    this.gW = new CalcMatrix2D();\n    this.gb = new CalcMatrix2D();\n    this.vW = new CalcMatrix2D();\n    this.vb = new CalcMatrix2D();\n    this.sW = new CalcMatrix2D();\n    this.sb = new CalcMatrix2D();\n    this.dW = new CalcMatrix2D();\n    this.db = new CalcMatrix2D();\n  }\n\n  configure(): void {\n    // do nothing\n  }\n\n  is1D(): boolean {\n    return false;\n  }\n\n  is3D(): boolean {\n    return true;\n  }\n\n  transition(previousLayer: Layers): Layers {\n    if (previousLayer.is3D()) {\n      this.setSize([previousLayer.getOutputWidth(), previousLayer.getOutputHeight(), previousLayer.getOutputDepth()]);\n    }\n\n    super.transition(previousLayer);\n\n    return this;\n  }\n\n  setSize(dimension: Dimension | number): Layers {\n    this.setWidth(dimension[0]);\n    this.setHeight(dimension[1]);\n    this.setDepth(dimension[2]);\n\n    return this;\n  }\n\n  getSize(): Dimension {\n    return [this.getWidth(), this.getHeight(), this.getDepth()];\n  }\n\n  abstract getPadding(): number;\n\n  abstract getStride(): number;\n\n  abstract getFilterSize(): number;\n\n  abstract forward(input: CalcMatrix2D): CalcMatrix2D;\n\n  abstract derivative(delta: CalcMatrix2D): CalcMatrix2D;\n\n  penalty(): number {\n    return this.W.pow(2).sum();\n  }\n}\n\nexport { AbstractLayer3D };\n","import { Layers } from \"../../types\";\nimport { CalcMatrix2D } from \"../../Math\";\n\nexport abstract class AbstractBackPropagation {\n  protected layer: Layers | null = null;\n  protected previousLayer: Layers | null = null;\n\n  constructor(layer: Layers | null, previousLayer: Layers) {\n    this.layer = layer;\n    this.previousLayer = previousLayer;\n  }\n\n  abstract propagate(\n    input: CalcMatrix2D,\n    numberOfExamples: number,\n    regularization: number,\n    layer: Layers,\n    sigma: CalcMatrix2D,\n    previousSigma: CalcMatrix2D\n  ): CalcMatrix2D;\n}\n","import { AbstractBackPropagation } from \"./AbstractBackpropagation\";\nimport { CalcMatrix2D } from \"../../Math\";\nimport { Layers } from \"../../types\";\n\nexport class Backpropagation1Dto1D extends AbstractBackPropagation {\n  propagate(\n    input: CalcMatrix2D,\n    numberOfExamples: number,\n    regularization: number,\n    layer: Layers,\n    sigma: CalcMatrix2D\n  ): CalcMatrix2D {\n    const previousActivations = this.previousLayer !== null ? this.previousLayer.A : input;\n    const delta = sigma.dot(previousActivations.transpose().conjugate());\n    this.layer.gW = delta.divide(numberOfExamples).add(layer.W.multiply(regularization / numberOfExamples));\n    this.layer.gb = sigma.rowwiseSum().divide(numberOfExamples);\n\n    if (this.previousLayer !== null) {\n      // @ts-ignore\n      const result = this.layer.W.transpose().dot(sigma);\n      if (result.rows() !== previousActivations.rows() || result.cols() !== previousActivations.cols()) {\n        throw new Error(\n          `Dimension error 1. (${result.rows()}, ${result.cols()}) | (${previousActivations.rows()}, ${previousActivations.cols()})`\n        );\n      }\n      if (this.layer.gW.rows() !== this.layer.W.rows() || this.layer.gW.cols() !== this.layer.W.cols()) {\n        throw new Error(\n          `Dimension error 2. (${this.layer.gW.rows()}, ${this.layer.gW.cols()}) | (${this.layer.W.rows()}, ${this.layer.W.cols()})`\n        );\n      }\n      if (this.layer.gb.rows() !== this.layer.b.rows() || this.layer.gb.cols() !== this.layer.b.cols()) {\n        throw new Error(\n          `Dimension error 3. (${this.layer.gb.rows()}, ${this.layer.gb.cols()}) | (${this.layer.b.rows()}, ${this.layer.b.cols()})`\n        );\n      }\n      return result.multiply(this.layer.previousLayer.derivative(this.layer.previousLayer.A));\n    }\n    return new CalcMatrix2D();\n  }\n}\n","import { AbstractBackPropagation } from \"./AbstractBackpropagation\";\nimport { CalcMatrix2D } from \"../../Math\";\nimport { Layers } from \"../../types\";\n\nexport class Backpropagation3Dto1D extends AbstractBackPropagation {\n  propagate(\n    input: CalcMatrix2D,\n    numberOfExamples: number,\n    regularization: number,\n    layer: Layers,\n    sigma: CalcMatrix2D\n  ): CalcMatrix2D {\n    return sigma;\n  }\n}\n","import { Layers, LayerType } from \"../../types\";\nimport { Backpropagation1Dto1D } from \"./Backpropagation1Dto1D\";\nimport { Backpropagation3Dto1D } from \"./Backpropagation3Dto1D\";\nimport { BackpropagationToMaxPool } from \"./BackpropagationToMaxPool\";\nimport { BackpropagationToConv } from \"./BackpropagationToConv\";\nimport { AbstractBackPropagation } from \"./AbstractBackpropagation\";\nimport { BackpropagationToRecurrent } from \"./BackpropagationToRecurrent\";\nimport { BackpropagationToLSTM } from \"./BackpropagationToLSTM\";\n\nexport class BackpropagationFactory {\n  static create(previousLayer: Layers, layer: Layers): AbstractBackPropagation | null {\n    // --- Reguy oparte na typie biecej warstwy ---\n    if (layer.getType() === LayerType.rnnlayer) {\n      return new BackpropagationToRecurrent(layer, previousLayer);\n    }\n    if (layer.getType() === LayerType.lstm) {\n      return new BackpropagationToLSTM(layer, previousLayer);\n    }\n    if (layer.getType() === LayerType.maxpool) {\n      return new BackpropagationToMaxPool(layer, previousLayer);\n    }\n    if (layer.getType() === LayerType.conv) {\n      return new BackpropagationToConv(layer, previousLayer);\n    }\n\n    // --- Reguy oparte na typie poprzedniej warstwy (jeli istniej) ---\n    if (previousLayer) {\n        if (previousLayer.is1D() || previousLayer.getType() == LayerType.fullyconnected) {\n            return new Backpropagation1Dto1D(layer, previousLayer);\n        }\n    } \n    // --- Domylne reguy ---\n    else {\n        if (layer.is1D()) {\n            return new Backpropagation1Dto1D(layer, previousLayer);\n        } else if (layer.is3D()) {\n            // Domylna obsuga dla warstw 3D, jeli adna inna regua nie pasuje\n            return new Backpropagation3Dto1D(layer, previousLayer);\n        }\n    }\n\n    return null;\n  }\n}\n","import { AbstractBackPropagation } from \"./AbstractBackpropagation\";\nimport { Layers, Layers3D } from \"../../types\";\nimport {CalcMatrix2D} from '../../Math'\n\nexport class BackpropagationToConv extends AbstractBackPropagation {\n  /*protected previousLayer: Layers3D | null = null;\n\n  propagate(input: CalcMatrix2D, numberOfExamples: number, regularization: number, layer: Layers, sigma: CalcMatrix2D): Matrix {\n    const previousLayer = this.previousLayer;\n\n    if (previousLayer) {\n      const padding = previousLayer.getPadding();\n      const stride = previousLayer.getStride();\n      const filterSize = previousLayer.getFilterSize();\n      const outputWidth = previousLayer.getOutputWidth();\n      const outputHeight = previousLayer.getOutputHeight();\n      const outputDepth = previousLayer.getOutputDepth();\n      const inputWidth = previousLayer.getWidth();\n      const inputHeight = previousLayer.getHeight();\n      const inputDepth = previousLayer.getDepth();\n\n      const tmpResult = getComputation().execute(\n        \"fillZeros\",\n        new Matrix((inputWidth + 2 * padding) * (inputHeight + 2 * padding) * inputDepth, numberOfExamples)\n      ) as Matrix;\n\n      const result = new CalcMatrix2D(inputWidth * inputHeight * inputDepth, numberOfExamples);\n\n      previousLayer.gW = getComputation().execute(\"fillZeros\", previousLayer.gW) as Matrix;\n      previousLayer.gb = getComputation().execute(\"fillZeros\", previousLayer.gb) as Matrix;\n\n      for (let m = 0; m < numberOfExamples; m++) {\n        for (let c = 0; c < outputDepth; c++) {\n          for (let h = 0; h < outputHeight; h++) {\n            for (let w = 0; w < outputWidth; w++) {\n              const vertStart = stride * h;\n              const vertEnd = vertStart + filterSize;\n              const horizStart = stride * w;\n              const horizEnd = horizStart + filterSize;\n\n              // filter loop\n              for (let d = 0; d < inputDepth; d++) {\n                for (\n                  let y = 0, vertical = vertStart, verticalPad = -padding;\n                  y < filterSize;\n                  y++, vertical++, verticalPad++\n                ) {\n                  for (\n                    let x = 0, horizontal = horizStart, horizontalPad = -padding;\n                    x < filterSize;\n                    x++, horizontal++, horizontalPad++\n                  ) {\n                    if (previousLayer.W.data && tmpResult.data && sigma.data) {\n                      tmpResult.data[\n                        d * (inputWidth + 2 * padding) * (inputHeight + 2 * padding) +\n                          vertical * (inputWidth + 2 * padding) +\n                          horizontal\n                      ][m] +=\n                        previousLayer.W.data[c][d * filterSize * filterSize + y * filterSize + x] *\n                        sigma.data[c * outputWidth * outputHeight + h * outputWidth + w][m];\n                    }\n\n                    let z = 0;\n                    if (padding == 0) {\n                      if (previousLayer.Z.data) {\n                        z = previousLayer.Z.data[d * inputWidth * inputHeight + vertical * inputWidth + horizontal][m];\n                      }\n                    } else {\n                      if (\n                        verticalPad >= 0 &&\n                        horizontalPad >= 0 &&\n                        verticalPad < inputHeight &&\n                        horizontalPad < inputWidth\n                      ) {\n                        if (previousLayer.Z.data) {\n                          z =\n                            previousLayer.Z.data[\n                              d * inputWidth * inputHeight + verticalPad * inputWidth + horizontalPad\n                            ][m];\n                        }\n                      }\n                    }\n\n                    if (previousLayer.gW.data && sigma.data) {\n                      previousLayer.gW.data[c][d * filterSize * filterSize + y * filterSize + x] +=\n                        (z * sigma.data[c * (outputWidth * outputHeight) + h * outputWidth + w][m]) / numberOfExamples;\n                    }\n                  }\n                }\n              }\n\n              if (previousLayer.gb.data && sigma.data) {\n                previousLayer.gb.data[c][0] +=\n                  sigma.data[c * (outputWidth * outputHeight) + h * outputWidth + w][m] / numberOfExamples;\n              }\n            }\n          }\n        }\n\n        if (padding > 0) {\n          // unpad\n          for (let c = 0; c < inputDepth; c++) {\n            for (let h = -padding, y = 0; h < inputHeight + padding; h++, y++) {\n              for (let w = -padding, x = 0; w < inputWidth + padding; w++, x++) {\n                if (w >= 0 && h >= 0 && w < inputWidth && h < inputHeight && result.data && tmpResult.data) {\n                  result.data[c * inputWidth * inputHeight + h * inputWidth + w][m] =\n                    tmpResult.data[\n                      c * (inputWidth + 2 * padding) * (inputHeight + 2 * padding) + y * (inputWidth + 2 * padding) + x\n                    ][m];\n                }\n              }\n            }\n          }\n        }\n      }\n\n      if (padding > 0) {\n        return result;\n      }\n\n      return tmpResult;\n    }\n  }*/\n}\n","import { AbstractBackPropagation } from \"./AbstractBackpropagation\";\nimport { CalcMatrix2D } from \"../../Math\";\nimport { Layers } from \"../../types\";\nimport { LSTMLayer } from \"../LSTM\";\n\nexport class BackpropagationToLSTM extends AbstractBackPropagation {\n  propagate(\n    input: CalcMatrix2D,\n    numberOfExamples: number,\n    regularization: number,\n    layer: Layers,\n    sigma: CalcMatrix2D\n  ): CalcMatrix2D {\n    const lstmLayer = layer as LSTMLayer;\n    const { A, C, X, F, I, G, O } = lstmLayer.cache;\n    const sequenceLength = X.length;\n    const hiddenSize = lstmLayer.getWidth();\n\n    // Inicjalizacja gradientw propagowanych w czasie\n    let daNext = new CalcMatrix2D(hiddenSize, 1).setZeros();\n    let dcNext = new CalcMatrix2D(hiddenSize, 1).setZeros();\n\n    // Ptla wsteczna po krokach czasowych (BPTT)\n    for (let t = sequenceLength - 1; t >= 0; t--) {\n      // Gradient dla stanu ukrytego a<t> = bd z wyjcia + bd z przyszoci\n      const da = sigma.col(t).add(daNext);\n\n      // --- Obliczanie gradientw dla kadej bramki ---\n\n      // Bramka wyjciowa (Output Gate)\n      const dot = da.multiply(C[t + 1].tanh());\n      const dZo = dot.multiply(O[t]).multiply(O[t].minusOne().multiply(-1)); // d(sigmoid)\n\n      // Stan komrki (Cell State)\n      const dc = da.multiply(O[t]).multiply(lstmLayer.derivative(C[t + 1])).add(dcNext);\n\n      // Bramka zapominania (Forget Gate)\n      const dft = dc.multiply(C[t]);\n      const dZf = dft.multiply(F[t]).multiply(F[t].minusOne().multiply(-1)); // d(sigmoid)\n\n      // Bramka wejciowa (Input Gate)\n      const dit = dc.multiply(G[t]);\n      const dZi = dit.multiply(I[t]).multiply(I[t].minusOne().multiply(-1)); // d(sigmoid)\n\n      // Bramka kandydujca (Candidate Gate)\n      const dgt = dc.multiply(I[t]);\n      const dZg = dgt.multiply(lstmLayer.derivative(G[t])); // d(tanh)\n\n      // --- Poczenie gradientw bramek i obliczenie gradientw wag ---\n\n      // Pocz gradienty bramek w jedn macierz [dZf, dZi, dZg, dZo]\n      const dZ = CalcMatrix2D.vstack([dZf, dZi, dZg, dZo]);\n\n      // Oblicz gradienty dla wag i biasw\n      lstmLayer.dW = lstmLayer.dW.add(dZ.dot(X[t].transpose()));\n      lstmLayer.dU = lstmLayer.dU.add(dZ.dot(A[t].transpose()));\n      lstmLayer.db = lstmLayer.db.add(dZ);\n\n      // --- Propagacja gradientw do poprzedniego kroku czasowego ---\n\n      // da_next (dla t-1) = U^T * dZ\n      daNext = lstmLayer.U.transpose().dot(dZ);\n      // dc_next (dla t-1) = dc * f<t>\n      dcNext = dc.multiply(F[t]);\n    }\n\n    // --- Finalizacja gradientw ---\n\n    // 1. Obcinanie gradientw (Gradient Clipping) - kluczowe dla stabilnoci LSTM\n    const clipValue = 5;\n    for (const d of [lstmLayer.dW, lstmLayer.dU, lstmLayer.db]) {\n      d.clip(-clipValue, clipValue);\n    }\n\n    // 2. Dodanie regularyzacji do wag\n    lstmLayer.dW = lstmLayer.dW.add(lstmLayer.W.multiply(regularization));\n    lstmLayer.dU = lstmLayer.dU.add(lstmLayer.U.multiply(regularization));\n\n    // Warstwa LSTM nie propaguje bdu dalej w standardowy sposb.\n    return new CalcMatrix2D();\n  }\n}\n","import { AbstractBackPropagation } from \"./AbstractBackpropagation\";\nimport { CalcMatrix2D } from \"../../Math\";\nimport { Layers } from \"../../types\";\nimport { MaxPoolLayer } from \"../MaxPool\";\n\n/**\n * Implementuje wsteczn propagacj dla warstwy Max-Pooling.\n * Dziaa jak \"przecznik\", kierujc gradienty tylko do tych neuronw,\n * ktre miay maksymaln warto podczas przechodzenia w przd.\n */\nexport class BackpropagationToMaxPool extends AbstractBackPropagation {\n  propagate(\n    input: CalcMatrix2D,\n    numberOfExamples: number,\n    regularization: number,\n    layer: Layers,\n    sigma: CalcMatrix2D\n  ): CalcMatrix2D {\n    const maxPoolLayer = layer as MaxPoolLayer;\n    // @ts-ignore\n    const { switches, inputShape } = maxPoolLayer.cache;\n    const [inputHeight, inputWidth, inputDepth, batchSize] = inputShape;\n\n    // Stwrz macierz gradientu wejciowego wypenion zerami\n    const dX = new CalcMatrix2D(inputHeight * inputWidth * inputDepth, batchSize).setZeros();\n    const dXData = dX.get();\n    const sigmaData = sigma.get();\n\n    let switchIndex = 0;\n    const outputSize = sigma.get().length;\n\n    // Rozprowad gradienty do odpowiednich miejsc\n    for (let i = 0; i < outputSize; i++) {\n        const maxIndex = switches[switchIndex++];\n        dXData[maxIndex] += sigmaData[i];\n    }\n\n    dX.set(dXData);\n\n    // Przekszta gradient do ksztatu oczekiwanego przez poprzedni warstw\n    return dX.reshape(inputHeight * inputWidth * inputDepth, batchSize);\n  }\n}\n","import { AbstractBackPropagation } from \"./AbstractBackpropagation\";\nimport { CalcMatrix2D } from \"../../Math\";\nimport { Layers } from \"../../types\";\nimport { RecurrentLayer } from \"../Recurrent\";\n\nexport class BackpropagationToRecurrent extends AbstractBackPropagation {\n  propagate(\n    input: CalcMatrix2D,\n    numberOfExamples: number,\n    regularization: number,\n    layer: Layers,\n    sigma: CalcMatrix2D\n  ): CalcMatrix2D {\n    const rnnLayer = layer as RecurrentLayer;\n    const { A, X } = rnnLayer.cache;\n    const sequenceLength = X.length;\n\n    // Inicjalizacja gradientu dla stanu ukrytego\n    let daNext = new CalcMatrix2D(rnnLayer.getWidth(), 1).setZeros();\n\n    // Ptla wsteczna po krokach czasowych (Backpropagation Through Time)\n    for (let t = sequenceLength - 1; t >= 0; t--) {\n      const dyt = sigma.col(t); // Gradient kosztu wzgldem wyjcia w kroku t\n\n      // 1. Oblicz gradienty dla wag wyjciowych (Wya, by)\n      rnnLayer.dWya = rnnLayer.dWya.add(dyt.dot(A[t + 1].transpose()));\n      rnnLayer.dby = rnnLayer.dby.add(dyt);\n\n      // 2. Oblicz gradient propagowany do stanu ukrytego\n      // da = dC/da<t> = (dC/dy<t> * dy<t>/da<t>) + da_next\n      const da = rnnLayer.Wya.transpose().dot(dyt).add(daNext);\n\n      // 3. Oblicz gradient dla funkcji aktywacji tanh\n      // dtanh = da<t> * (1 - a<t>^2)\n      const dtanh = da.multiply(rnnLayer.derivative(A[t + 1]));\n\n      // 4. Oblicz gradienty dla wag rekurencyjnych i wejciowych (Waa, Wax, ba)\n      rnnLayer.dWax = rnnLayer.dWax.add(dtanh.dot(X[t].transpose()));\n      rnnLayer.dWaa = rnnLayer.dWaa.add(dtanh.dot(A[t].transpose()));\n      rnnLayer.dba = rnnLayer.dba.add(dtanh);\n\n      // 5. Zaktualizuj gradient dla poprzedniego kroku czasowego\n      // da_next (dla kroku t-1) = Waa^T * dtanh\n      daNext = rnnLayer.Waa.transpose().dot(dtanh);\n    }\n\n    // Normalizacja gradientw i dodanie regularyzacji\n    const clipValue = 5; // Zapobieganie eksplodujcym gradientom\n    for (const d of [rnnLayer.dWax, rnnLayer.dWaa, rnnLayer.dWya, rnnLayer.dba, rnnLayer.dby]) {\n        d.clip(-clipValue, clipValue);\n    }\n    \n    // Zastosowanie normalizacji przez liczb przykadw (w tym przypadku 1, bo batching nie jest zaimplementowany)\n    // rnnLayer.dWax = rnnLayer.dWax.divide(numberOfExamples);\n    // ... etc. dla reszty\n\n    // Dodanie regularyzacji\n    rnnLayer.dWax = rnnLayer.dWax.add(rnnLayer.Wax.multiply(regularization));\n    rnnLayer.dWaa = rnnLayer.dWaa.add(rnnLayer.Waa.multiply(regularization));\n    rnnLayer.dWya = rnnLayer.dWya.add(rnnLayer.Wya.multiply(regularization));\n\n    // Warstwa rekurencyjna zazwyczaj nie propaguje bdu dalej w ten sposb.\n    // Zwracamy pust macierz, aby zatrzyma propagacj.\n    return new CalcMatrix2D();\n  }\n}\n","import { CalcMatrix2D } from \"../Math\";\nimport { LayerType } from \"../types\";\nimport { AbstractLayer3D } from \"./AbstractLayer3D\";\n\n/**\n * Warstwa konwolucyjna (Convolutional Layer).\n * Przetwarza dane wejciowe 3D (wysoko, szeroko, gboko/kanay)\n * za pomoc zestawu filtrw, aby wyodrbni cechy takie jak krawdzie, tekstury itp.\n */\nexport class ConvLayer extends AbstractLayer3D {\n  protected numFilters = 8;\n  protected filterSize = 3;\n  protected padding = 1;\n  protected stride = 1;\n\n  // Pami podrczna dla wstecznej propagacji\n  private cache: {\n    inputCols?: CalcMatrix2D;\n    inputShape?: number[];\n  } = {};\n\n  public penalty(): number {\n    return this.W.pow(2).sum().get()[0];\n  }\n\n  configure(): void {\n    const inputDepth = this.getDepth();\n    const filterWeightCount = this.filterSize * this.filterSize * inputDepth;\n\n    this.W = new CalcMatrix2D(this.numFilters, filterWeightCount).setRandom(filterWeightCount);\n    this.b = new CalcMatrix2D(this.numFilters, 1).setZeros();\n\n    this.gW = new CalcMatrix2D(this.numFilters, filterWeightCount).setZeros();\n    this.gb = new CalcMatrix2D(this.numFilters, 1).setZeros();\n  }\n\n  getOutputHeight(): number {\n    return Math.floor((this.getHeight() - this.filterSize + 2 * this.padding) / this.stride + 1);\n  }\n\n  getOutputWidth(): number {\n    return Math.floor((this.getWidth() - this.filterSize + 2 * this.padding) / this.stride + 1);\n  }\n\n  getOutputDepth(): number {\n    return this.numFilters;\n  }\n\n  private im2col(input: CalcMatrix2D, batchSize: number): CalcMatrix2D {\n    const [inputHeight, inputWidth, inputDepth] = [this.getHeight(), this.getWidth(), this.getDepth()];\n    const outputHeight = this.getOutputHeight();\n    const outputWidth = this.getOutputWidth();\n    const filterArea = this.filterSize * this.filterSize;\n\n    const result = new CalcMatrix2D(filterArea * inputDepth, outputHeight * outputWidth * batchSize).allocate().calcSync((calc) => {\n      return calc.img2col(this.filterSize, this.stride, this.padding)\n    });\n    return result;\n  }\n\n  /**\n   * Przetwarza parti danych wejciowych.\n   * @param input Macierz o wymiarach (wysoko * szeroko * gboko, liczba_przykadw)\n   */\n  forward(input: CalcMatrix2D): CalcMatrix2D {\n    const batchSize = input.cols();\n    const outputHeight = this.getOutputHeight();\n    const outputWidth = this.getOutputWidth();\n\n    // 1. Przekszta wejcie za pomoc im2col\n    const inputCols = this.im2col(input, batchSize);\n    this.cache = { inputCols, inputShape: [this.getHeight(), this.getWidth(), this.getDepth()] };\n\n    // 2. Wykonaj operacj konwolucji jako jedno mnoenie macierzy\n    const result = this.W.dot(inputCols).add(this.b);\n\n    // 3. Przekszta wynik do odpowiedniego formatu wyjciowego\n    const reshapedResult = result.reshape(this.numFilters, outputHeight * outputWidth * batchSize);\n\n    // 4. Zastosuj funkcj aktywacji\n    this.Z = reshapedResult;\n    this.A = this.activation(this.Z);\n\n    return this.A;\n  }\n\n  activation(m: CalcMatrix2D): CalcMatrix2D {\n    return m.relu(); // ReLU jest standardem dla warstw konwolucyjnych\n  }\n\n  derivative(delta: CalcMatrix2D): CalcMatrix2D {\n    return delta.reluDerivative(this.A);\n  }\n\n  getType(): LayerType {\n    return LayerType.conv;\n  }\n\n  // --- Settery dla parametrw warstwy ---\n  setFilterSize(size: number): this { this.filterSize = size; return this; }\n  setNumFilters(num: number): this { this.numFilters = num; return this; }\n  setPadding(pad: number): this { this.padding = pad; return this; }\n  setStride(stride: number): this { this.stride = stride; return this; }\n}\n","import { CalcMatrix2D } from \"../Math\";\nimport { Layers, LayerType } from \"../types\";\nimport { AbstractLayer1D } from \"./AbstractLayer1D\";\n\n/**\n * Warstwa w peni poczona (Fully Connected / Dense).\n * Kady neuron w tej warstwie jest poczony z kadym neuronem w warstwie poprzedniej.\n * Jest to podstawowy budulec wikszoci sieci neuronowych.\n */\nexport class FullyConnectedLayer extends AbstractLayer1D {\n  // Pami podrczna dla wstecznej propagacji\n  private cache: {\n    input?: CalcMatrix2D;\n  } = {};\n\n  public penalty(): number {\n    return this.W.pow(2).sum().get()[0];\n  }\n\n  /**\n   * Konfiguruje wagi i biasy warstwy.\n   * @param inputSize Rozmiar wektora wejciowego.\n   * @param outputSize Liczba neuronw w tej warstwie.\n   */\n  configure(inputSize: number, outputSize: number): void {\n    this.width = outputSize; // W kontekcie 1D, \"width\" to liczba neuronw\n    this.height = inputSize;\n\n    // Inicjalizacja wag (metoda Xavier)\n    this.W = new CalcMatrix2D(outputSize, inputSize).setRandom(inputSize);\n    // Inicjalizacja biasw\n    this.b = new CalcMatrix2D(outputSize, 1).setZeros();\n\n    // Inicjalizacja gradientw\n    this.gW = new CalcMatrix2D(outputSize, inputSize).setZeros();\n    this.gb = new CalcMatrix2D(outputSize, 1).setZeros();\n  }\n\n  /**\n   * Automatycznie konfiguruje rozmiar wejciowy na podstawie poprzedniej warstwy.\n   * Obsuguje \"spaszczanie\" (flattening) danych z warstw 3D.\n   */\n  transition(previousLayer: Layers): Layers {\n    this.previousLayer = previousLayer;\n    let inputSize: number;\n\n    if (previousLayer.is3D()) {\n      // Spaszczanie wyjcia z warstwy 3D (Conv, MaxPool)\n      inputSize = previousLayer.getOutputWidth() * previousLayer.getOutputHeight() * previousLayer.getOutputDepth();\n    } else {\n      // Standardowe poczenie z warstw 1D\n      inputSize = previousLayer.getOutputWidth();\n    }\n\n    // `this.width` jest ju ustawione w konstruktorze lub przez `setSize`\n    this.configure(inputSize, this.getWidth());\n    return this;\n  }\n\n  /**\n   * Przetwarza parti danych wejciowych.\n   * @param input Macierz o wymiarach (input_size, batch_size)\n   */\n  forward(input: CalcMatrix2D): CalcMatrix2D {\n    const batchSize = input.cols();\n    let currentInput = input;\n\n    // Jeli poprzednia warstwa bya 3D, spaszcz wejcie\n    if (this.previousLayer && this.previousLayer.is3D()) {\n      const inputSize = this.W.cols();\n      currentInput = input.reshape(inputSize, batchSize);\n    }\n\n    this.cache = { input: currentInput };\n\n    // Y = W * X + b\n    this.Z = this.W.dot(currentInput).add(this.b);\n    // W tej warstwie nie ma funkcji aktywacji.\n    // Aktywacj (np. ReLU, Softmax) naley doda jako osobn warstw.\n    this.A = this.Z;\n\n    return this.A;\n  }\n\n  // Ta warstwa nie ma wasnej funkcji aktywacji.\n  activation(m: CalcMatrix2D): CalcMatrix2D { return m; }\n  derivative(delta: CalcMatrix2D): CalcMatrix2D { return delta; }\n\n  getType(): LayerType {\n    return LayerType.fullyconnected;\n  }\n\n  setSize(value: number): this {\n    this.width = value;\n    return this;\n  }\n}\n","import { CalcMatrix2D } from \"../Math\";\nimport { Dimension, LayerType, Layers } from \"../types\";\nimport { AbstractLayer } from \"./AbstractLayer\";\n\n/**\n * Warstwa Long Short-Term Memory (LSTM).\n * Jest to zaawansowany typ warstwy rekurencyjnej, ktry potrafi uczy si\n * dugoterminowych zalenoci dziki mechanizmowi bramek.\n *\n * Wymiary:\n * - `height` (inputSize): Rozmiar wektora wejciowego w jednym kroku czasowym.\n * - `width` (hiddenSize): Rozmiar wektora stanu ukrytego i stanu komrki.\n */\nexport class LSTMLayer extends AbstractLayer {\n  // --- Wagi i Biary (zoptymalizowana, poczona struktura) ---\n  public W: CalcMatrix2D; // Poczone wagi dla wej [Wf, Wi, Wg, Wo]\n  public U: CalcMatrix2D; // Poczone wagi dla stanu rekurencyjnego [Uf, Ui, Ug, Uo]\n  public b: CalcMatrix2D; // Poczone biasy [bf, bi, bg, bo]\n\n  // --- Gradienty ---\n  public dW: CalcMatrix2D;\n  public dU: CalcMatrix2D;\n  public db: CalcMatrix2D;\n\n  // --- Pami podrczna dla BPTT ---\n  public cache: {\n    A: CalcMatrix2D[]; // Stany ukryte a<t>\n    C: CalcMatrix2D[]; // Stany komrki c<t>\n    X: CalcMatrix2D[]; // Wejcia x<t>\n    F: CalcMatrix2D[]; // Bramki zapominania f<t>\n    I: CalcMatrix2D[]; // Bramki wejciowe i<t>\n    G: CalcMatrix2D[]; // Bramki kandydujce g<t>\n    O: CalcMatrix2D[]; // Bramki wyjciowe o<t>\n  } = { A: [], C: [], X: [], F: [], I: [], G: [], O: [] };\n\n  public penalty(): number {\n    const wPenalty = this.W.pow(2).sum().get()[0];\n    const uPenalty = this.U.pow(2).sum().get()[0];\n    return wPenalty + uPenalty;\n  }\n\n  configure(): void {\n    const inputSize = this.getHeight();\n    const hiddenSize = this.getWidth();\n\n    // Inicjalizacja poczonych macierzy wag (metoda Xavier)\n    // Kada macierz ma wysoko 4 * hiddenSize, poniewa zawiera wagi dla 4 bramek.\n    this.W = new CalcMatrix2D(hiddenSize * 4, inputSize).setRandom(inputSize);\n    this.U = new CalcMatrix2D(hiddenSize * 4, hiddenSize).setRandom(hiddenSize);\n\n    // Inicjalizacja poczonego wektora biasw\n    this.b = new CalcMatrix2D(hiddenSize * 4, 1).setZeros();\n\n    // Inicjalizacja gradientw\n    this.dW = new CalcMatrix2D(hiddenSize * 4, inputSize).setZeros();\n    this.dU = new CalcMatrix2D(hiddenSize * 4, hiddenSize).setZeros();\n    this.db = new CalcMatrix2D(hiddenSize * 4, 1).setZeros();\n  }\n\n  /**\n   * Przetwarza ca sekwencj wejciow.\n   * @param input Macierz o wymiarach (input_size, sequence_length)\n   */\n  forward(input: CalcMatrix2D): CalcMatrix2D {\n    const sequenceLength = input.cols();\n    const hiddenSize = this.getWidth();\n\n    // Inicjalizacja pamici podrcznej i stanw pocztkowych\n    this.cache = { A: [], C: [], X: [], F: [], I: [], G: [], O: [] };\n    let aPrev = new CalcMatrix2D(hiddenSize, 1).setZeros();\n    let cPrev = new CalcMatrix2D(hiddenSize, 1).setZeros();\n    this.cache.A.push(aPrev.clone());\n    this.cache.C.push(cPrev.clone());\n\n    const outputs: CalcMatrix2D[] = [];\n\n    // Ptla po krokach czasowych\n    for (let t = 0; t < sequenceLength; t++) {\n      const xt = input.col(t);\n      this.cache.X.push(xt.clone());\n\n      // 1. Oblicz aktywacje dla wszystkich bramek naraz (zoptymalizowane)\n      // Z = [Zf, Zi, Zg, Zo]^T\n      const Z = this.W.dot(xt).add(this.U.dot(aPrev)).add(this.b);\n\n      // 2. Podziel Z na poszczeglne bramki i zastosuj funkcje aktywacji\n      const Zf = Z.slice(0, hiddenSize);\n      const Zi = Z.slice(hiddenSize, hiddenSize * 2);\n      const Zg = Z.slice(hiddenSize * 2, hiddenSize * 3);\n      const Zo = Z.slice(hiddenSize * 3, hiddenSize * 4);\n\n      const ft = Zf.sigmoid(); // Bramka zapominania\n      const it = Zi.sigmoid(); // Bramka wejciowa\n      const gt = Zg.tanh();   // Bramka kandydujca\n      const ot = Zo.sigmoid(); // Bramka wyjciowa\n\n      // 3. Oblicz nowy stan komrki i nowy stan ukryty\n      // c<t> = f<t> * c<t-1> + i<t> * g<t>\n      const cNext = ft.multiply(cPrev).add(it.multiply(gt));\n      // a<t> = o<t> * tanh(c<t>)\n      const aNext = ot.multiply(cNext.tanh());\n\n      // 4. Zapisz wyniki w cache i zaktualizuj stany\n      outputs.push(aNext);\n      this.cache.A.push(aNext);\n      this.cache.C.push(cNext);\n      this.cache.F.push(ft);\n      this.cache.I.push(it);\n      this.cache.G.push(gt);\n      this.cache.O.push(ot);\n\n      aPrev = aNext;\n      cPrev = cNext;\n    }\n\n    // Pocz wszystkie wyjcia (stany ukryte) w jedn macierz\n    return CalcMatrix2D.hstack(outputs);\n  }\n\n  // --- Implementacja metod abstrakcyjnych ---\n\n  activation(m: CalcMatrix2D): CalcMatrix2D {\n    // Ta metoda nie jest bezporednio uywana w ptli forward,\n    // ale jest wymagana przez interfejs.\n    return m.tanh();\n  }\n\n  derivative(a: CalcMatrix2D): CalcMatrix2D {\n    // Pochodna tanh(x) to 1 - tanh(x)^2\n    return a.pow(2).minusOne();\n  }\n\n  getType(): LayerType {\n    return LayerType.lstm;\n  }\n\n  is1D(): boolean {\n    return true;\n  }\n\n  is3D(): boolean {\n    return false;\n  }\n\n  transition(previousLayer: Layers): Layers {\n    this.previousLayer = previousLayer;\n    this.setHeight(previousLayer.getOutputHeight());\n    this.setDepth(this.getOutputHeight());\n    return this;\n  }\n\n  getSize(): number | Dimension {\n    return [this.getWidth(), this.getHeight()];\n  }\n\n  getOutputWidth(): number {\n    return this.getWidth();\n  }\n\n  getOutputHeight(): number {\n    return this.getWidth(); // W LSTM rozmiar wyjcia jest rwny rozmiarowi stanu ukrytego\n  }\n\n  getOutputDepth(): number {\n    return 1;\n  }\n}\n","import { CalcMatrix2D } from \"../Math\";\nimport { LayerType } from \"../types\";\nimport { AbstractLayer1D } from \"./AbstractLayer1D\";\n\nclass LogisticLayer extends AbstractLayer1D {\n  activation(m: CalcMatrix2D): CalcMatrix2D {\n    return m.logisticForwardPropagation();\n  }\n\n  activationAsync(m: CalcMatrix2D): Promise<CalcMatrix2D> {\n    return new Promise((resolve) => {\n      m.calcAsync((calc) => {\n        calc.logisticForwardPropagation().then((a) => {\n          resolve(a);\n        })\n      })\n    })\n  }\n\n  getType(): LayerType {\n    return LayerType.logistic;\n  }\n\n  derivative(delta: CalcMatrix2D): CalcMatrix2D {\n    return delta.logisticBackwardPropagation();\n  }\n}\n\nexport { LogisticLayer };\n","import { CalcMatrix2D } from \"../Math\";\nimport { LayerType } from \"../types\";\nimport { AbstractLayer3D } from \"./AbstractLayer3D\";\n\n/**\n * Warstwa Max-Pooling.\n * Redukuje wymiarowo przestrzenn (wysoko i szeroko) map cech,\n * zachowujc najwaniejsze informacje (maksymalne wartoci) z kadego regionu.\n */\nexport class MaxPoolLayer extends AbstractLayer3D {\n  protected filterSize = 2;\n  protected stride = 2;\n\n  // Pami podrczna dla wstecznej propagacji, przechowujca indeksy maksymalnych wartoci.\n  private cache: {\n    switches?: number[];\n    inputShape?: number[];\n  } = {};\n\n  // Warstwa Max-Pooling nie ma wag do uczenia si.\n  public penalty(): number { return 0; }\n  configure(): void { }\n  activation(m: CalcMatrix2D): CalcMatrix2D { return m; }\n  derivative(delta: CalcMatrix2D): CalcMatrix2D { return delta; }\n\n  getOutputHeight(): number {\n    return Math.floor((this.getHeight() - this.filterSize) / this.stride + 1);\n  }\n\n  getOutputWidth(): number {\n    return Math.floor((this.getWidth() - this.filterSize) / this.stride + 1);\n  }\n\n  getOutputDepth(): number {\n    return this.getDepth(); // Gboko pozostaje bez zmian\n  }\n\n  /**\n   * Przetwarza parti danych wejciowych.\n   * @param input Macierz o wymiarach (wysoko * szeroko * gboko, liczba_przykadw)\n   */\n  forward(input: CalcMatrix2D): CalcMatrix2D {\n    const batchSize = input.cols();\n    const [inputHeight, inputWidth, inputDepth] = [this.getHeight(), this.getWidth(), this.getDepth()];\n    const outputHeight = this.getOutputHeight();\n    const outputWidth = this.getOutputWidth();\n\n    const output = new CalcMatrix2D(outputHeight * outputWidth * inputDepth, batchSize).allocate().setZeros();\n    const switches: number[] = []; // Przechowuje indeksy maksymalnych wartoci\n\n    const inputData = input.get();\n    const outputData = output.get();\n\n    for (let n = 0; n < batchSize; n++) {\n      const batchOffset = n * inputHeight * inputWidth * inputDepth;\n      for (let c = 0; c < inputDepth; c++) {\n        const channelOffset = c * inputHeight * inputWidth;\n        for (let y = 0; y < outputHeight; y++) {\n          for (let x = 0; x < outputWidth; x++) {\n            const startY = y * this.stride;\n            const startX = x * this.stride;\n\n            let maxVal = -Infinity;\n            let maxIndex = -1;\n\n            // Znajd maksymaln warto w oknie\n            for (let fy = 0; fy < this.filterSize; fy++) {\n              for (let fx = 0; fx < this.filterSize; fx++) {\n                const imgY = startY + fy;\n                const imgX = startX + fx;\n                const currentIndex = batchOffset + channelOffset + imgY * inputWidth + imgX;\n                const currentVal = inputData[currentIndex];\n\n                if (currentVal > maxVal) {\n                  maxVal = currentVal;\n                  maxIndex = currentIndex;\n                }\n              }\n            }\n\n            // Zapisz maksymaln warto i jej indeks\n            const outputIndex = n * (outputHeight * outputWidth * inputDepth) + c * (outputHeight * outputWidth) + y * outputWidth + x;\n            outputData[outputIndex] = maxVal;\n            switches.push(maxIndex);\n          }\n        }\n      }\n    }\n    \n    output.set(outputData);\n    this.cache = { switches, inputShape: [inputHeight, inputWidth, inputDepth, batchSize] };\n    this.A = output;\n\n    return this.A;\n  }\n\n  getType(): LayerType {\n    return LayerType.maxpool;\n  }\n\n  // --- Settery dla parametrw warstwy ---\n  setFilterSize(size: number): this { this.filterSize = size; return this; }\n  getFilterSize(): number { return this.filterSize; }\n  setStride(stride: number): this { this.stride = stride; return this; }\n  getStride(): number { return this.stride; }\n  getPadding(): number { return 0; } // Max-pooling zazwyczaj nie uywa paddingu\n}\n","import { CalcMatrix2D } from \"../Math\";\nimport { LayerType } from \"../types\";\nimport { AbstractLayer1D } from \"./AbstractLayer1D\";\n\nclass PurelinLayer extends AbstractLayer1D {\n  activation(m: CalcMatrix2D): CalcMatrix2D {\n    return m;\n  }\n\n  getType(): LayerType {\n    return LayerType.purelin;\n  }\n\n  derivative(delta: CalcMatrix2D): CalcMatrix2D {\n    return delta.setOnes();\n  }\n\n  activationAsync(value: CalcMatrix2D): Promise<CalcMatrix2D> {\n    return Promise.resolve(undefined);\n  }\n}\n\nexport { PurelinLayer };\n","import { CalcMatrix2D } from \"../Math\";\nimport { Dimension, LayerType, Layers } from \"../types\";\nimport { AbstractLayer } from \"./AbstractLayer\";\n\n/**\n * Podstawowa warstwa rekurencyjna (RNN).\n * Ta warstwa przetwarza sekwencje danych, utrzymujc wewntrzny stan.\n *\n * Wymiary:\n * - `height` (inputSize): Rozmiar wektora wejciowego w jednym kroku czasowym.\n * - `width` (hiddenSize): Rozmiar wektora stanu ukrytego.\n * - `depth` (outputSize): Rozmiar wektora wyjciowego w jednym kroku czasowym.\n */\nexport class RecurrentLayer extends AbstractLayer {\n  activationAsync(value: CalcMatrix2D): Promise<CalcMatrix2D> {\n    throw new Error(\"Method not implemented.\");\n  }\n  // --- Wagi i Biary ---\n  public Wax: CalcMatrix2D; // Wagi: Wejcie -> Stan ukryty\n  public Waa: CalcMatrix2D; // Wagi: Stan ukryty -> Stan ukryty\n  public Wya: CalcMatrix2D; // Wagi: Stan ukryty -> Wyjcie\n\n  public ba: CalcMatrix2D; // Bias: Stan ukryty\n  public by: CalcMatrix2D; // Bias: Wyjcie\n\n  // --- Gradienty ---\n  public dWax: CalcMatrix2D;\n  public dWaa: CalcMatrix2D;\n  public dWya: CalcMatrix2D;\n  public dba: CalcMatrix2D;\n  public dby: CalcMatrix2D;\n\n  // --- Pami podrczna dla Backpropagation Through Time (BPTT) ---\n  public cache: {\n    A: CalcMatrix2D[]; // Stany ukryte a<t>\n    X: CalcMatrix2D[]; // Wejcia x<t>\n    Y?: CalcMatrix2D[]; // Wyjcia y<t>\n  } = { A: [], X: [] };\n\n  public penalty(): number {\n    // Prosta regularyzacja L2 dla wszystkich wag\n    const waaPenalty = this.Waa.pow(2).sum().get()[0];\n    const waxPenalty = this.Wax.pow(2).sum().get()[0];\n    const wyaPenalty = this.Wya.pow(2).sum().get()[0];\n    return waaPenalty + waxPenalty + wyaPenalty;\n  }\n\n  configure(): void {\n    const inputSize = this.getHeight();\n    const hiddenSize = this.getWidth();\n    const outputSize = this.getDepth();\n\n    // Inicjalizacja wag (metoda Xavier)\n    this.Wax = new CalcMatrix2D(hiddenSize, inputSize).setRandom(inputSize);\n    this.Waa = new CalcMatrix2D(hiddenSize, hiddenSize).setRandom(hiddenSize);\n    this.Wya = new CalcMatrix2D(outputSize, hiddenSize).setRandom(hiddenSize);\n\n    // Inicjalizacja biasw\n    this.ba = new CalcMatrix2D(hiddenSize, 1).setZeros();\n    this.by = new CalcMatrix2D(outputSize, 1).setZeros();\n\n    // Inicjalizacja gradientw\n    this.dWax = new CalcMatrix2D(hiddenSize, inputSize).setZeros();\n    this.dWaa = new CalcMatrix2D(hiddenSize, hiddenSize).setZeros();\n    this.dWya = new CalcMatrix2D(outputSize, hiddenSize).setZeros();\n    this.dba = new CalcMatrix2D(hiddenSize, 1).setZeros();\n    this.dby = new CalcMatrix2D(outputSize, 1).setZeros();\n  }\n\n  /**\n   * Przetwarza ca sekwencj wejciow.\n   * @param input Macierz o wymiarach (input_size, sequence_length)\n   */\n  forward(input: CalcMatrix2D): CalcMatrix2D {\n    const sequenceLength = input.cols();\n    const hiddenSize = this.getWidth();\n\n    // Inicjalizacja pamici podrcznej i stanu pocztkowego\n    this.cache = { A: [], X: [] };\n    let aPrev = new CalcMatrix2D(hiddenSize, 1).setZeros();\n    this.cache.A.push(aPrev.clone());\n\n    const outputs: CalcMatrix2D[] = [];\n\n    // Ptla po krokach czasowych\n    for (let t = 0; t < sequenceLength; t++) {\n      const xt = input.col(t);\n      this.cache.X.push(xt.clone());\n\n      // Obliczenie stanu ukrytego: a<t> = tanh(Waa * a<t-1> + Wax * x<t> + ba)\n      const aNext = this.Waa.dot(aPrev).add(this.Wax.dot(xt)).add(this.ba).tanh();\n\n      // Obliczenie wyjcia: y<t> = Wya * a<t> + by (bez aktywacji)\n      const yt = this.Wya.dot(aNext).add(this.by);\n\n      outputs.push(yt);\n      this.cache.A.push(aNext);\n      aPrev = aNext;\n    }\n\n    // Pocz wszystkie wyjcia w jedn macierz\n    return CalcMatrix2D.hstack(outputs);\n  }\n\n  // --- Implementacja metod abstrakcyjnych ---\n\n  activation(m: CalcMatrix2D): CalcMatrix2D {\n    return m.tanh();\n  }\n\n  derivative(a: CalcMatrix2D): CalcMatrix2D {\n    // Pochodna tanh(x) to 1 - tanh(x)^2\n    return a.pow(2).minusOne().multiply(-1);\n  }\n\n  getType(): LayerType {\n    return LayerType.rnnlayer;\n  }\n\n  is1D(): boolean {\n    return true; // Traktujemy sekwencj jako \"pask\" warstw\n  }\n\n  is3D(): boolean {\n    return false;\n  }\n\n  transition(previousLayer: Layers): Layers {\n    this.previousLayer = previousLayer;\n    this.setHeight(previousLayer.getOutputHeight());\n    this.setDepth(this.getOutputHeight()); // Domylnie output_size = hidden_size\n    return this;\n  }\n\n  getSize(): number | Dimension {\n    return [this.getWidth(), this.getHeight(), this.getDepth()];\n  }\n\n  getOutputWidth(): number {\n    return this.getWidth();\n  }\n\n  getOutputHeight(): number {\n    return this.getDepth();\n  }\n\n  getOutputDepth(): number {\n    return 1;\n  }\n}\n","import { CalcMatrix2D } from \"../Math\";\nimport { LayerType } from \"../types\";\nimport { AbstractLayer1D } from \"./AbstractLayer1D\";\n\nclass ReluLayer extends AbstractLayer1D {\n  activation(m: CalcMatrix2D): CalcMatrix2D {\n    return m.setMin(0.0);\n  }\n\n  activationAsync(m: CalcMatrix2D): Promise<CalcMatrix2D> {\n    return new Promise((resolve) => {\n      m.calcAsync((calc) => {\n        calc.setMin(0.0).then((a) => {\n          resolve(a);\n        })\n      })\n    })\n  }\n\n  getType(): LayerType {\n    return LayerType.relu;\n  }\n\n  derivative(delta: CalcMatrix2D) {\n    return delta.reluBackpropagation();\n  }\n}\n\nexport { ReluLayer };\n","import { CalcMatrix2D } from \"../Math\";\nimport { LayerType } from \"../types\";\nimport { AbstractLayer1D } from \"./AbstractLayer1D\";\n\nclass SoftmaxLayer extends AbstractLayer1D {\n  activationAsync(value: CalcMatrix2D): Promise<CalcMatrix2D> {\n    throw new Error(\"Method not implemented.\");\n  }\n  activation(m: CalcMatrix2D): CalcMatrix2D {\n    return m.softmax();\n  }\n\n  getType(): LayerType {\n    return LayerType.softmax;\n  }\n\n  derivative(delta: CalcMatrix2D): CalcMatrix2D {\n    return delta.softmaxDerivative();\n  }\n}\n\nexport { SoftmaxLayer };\n","import { CalcMatrix2D } from \"../Math\";\nimport { LayerType } from \"../types\";\nimport { AbstractLayer1D } from \"./AbstractLayer1D\";\n\nclass SoftplusLayer extends AbstractLayer1D {\n  activation(m: CalcMatrix2D): CalcMatrix2D {\n    return m.exp().add(1).log();\n  }\n\n  getType(): LayerType {\n    return LayerType.softplus;\n  }\n\n  derivative(delta: CalcMatrix2D): CalcMatrix2D {\n    return delta.multiply(-1).exp().add(1).fraction(1);\n  }\n}\n\nexport { SoftplusLayer };\n","import { CalcMatrix2D } from \"../Math\";\nimport { LayerType } from \"../types\";\nimport { AbstractLayer1D } from \"./AbstractLayer1D\";\n\nclass TanhLayer extends AbstractLayer1D {\n  activationAsync(value: CalcMatrix2D): Promise<CalcMatrix2D> {\n    throw new Error(\"Method not implemented.\");\n  }\n  activation(m: CalcMatrix2D): CalcMatrix2D {\n    return m.tanh();\n  }\n\n  getType(): LayerType {\n    return LayerType.tanh;\n  }\n\n  derivative(sigma: CalcMatrix2D): CalcMatrix2D {\n    return sigma.tanhDerivative();\n  }\n}\n\nexport { TanhLayer };\n","import { AbstractLayer } from \"./AbstractLayer\";\nimport { SoftmaxLayer } from \"./Softmax\";\nimport { LogisticLayer } from \"./Logistic\";\nimport { TanhLayer } from \"./Tanh\";\nimport { ReluLayer } from \"./Relu\";\nimport { SoftplusLayer } from \"./Softplus\";\nimport { ConvLayer } from \"./Conv\";\nimport { FullyConnectedLayer } from \"./FullyConnected\";\nimport { MaxPoolLayer } from \"./MaxPool\";\nimport { RecurrentLayer } from \"./Recurrent\";\nimport { PurelinLayer } from \"./Purelin\";\nimport { LSTMLayer } from \"./LSTM\";\n\nexport {\n  AbstractLayer,\n  SoftmaxLayer,\n  LogisticLayer,\n  TanhLayer,\n  ReluLayer,\n  SoftplusLayer,\n  ConvLayer,\n  FullyConnectedLayer,\n  MaxPoolLayer,\n  RecurrentLayer,\n  PurelinLayer,\n  LSTMLayer,\n};\n","import { CalcElement } from \"./CalcElement\";\nimport { getDevice } from \"../Computation\";\n\nexport class Calc {\n  private _result: Array<CalcElement> | null = null;\n  private _params: Array<CalcElement> | null = null;\n\n  public static get() {\n    return new Calc();\n  }\n\n  public setResult(result: Array<CalcElement>) {\n    this._result = result;\n    return this;\n  }\n\n  public setParams(params: Array<CalcElement>) {\n    this._params = params;\n    return this;\n  }\n\n  public execSync(module: string, kernel: string) {\n    this.exec(module, kernel)(this._params, this._result);\n    return this;\n  }\n\n  /**\n   * Note: This function is not truly asynchronous. The underlying native addon\n   * does not support asynchronous execution.\n   */\n  public execAsync(module: string, kernel: string): Promise<Calc> {\n    return new Promise((resolve) => {\n      this.exec(module, kernel, true)(this._params, this._result).then(() => {\n        resolve(this);\n      });\n    });\n  }\n\n  private exec(module: string, kernel: string, async = false) {\n    try {\n      const device = getDevice();\n      const m = device.loadModule(module);\n      const fn = m.loadFunction(kernel);\n\n      return (input: Array<CalcElement> | null = null, output: Array<CalcElement> | null = null) => {\n        return fn.execute(\n          (input || []).map((m) => m.getMemory()),\n          (output || []).map((m) => m.getMemory()),\n          async\n        );\n      };\n    } catch (e) {\n      console.error(e);\n      return () => {};\n    }\n  }\n}\n","import { CalcElement } from \"./CalcElement\";\n\nexport class CalcColVector extends CalcElement {\n  constructor(cols = 1) {\n    super(1, cols);\n  }\n\n  public isColVector() {\n    return true;\n  }\n\n  public static fromMemory(memory, cols: number) {\n    const result = new CalcColVector(cols);\n    result._memory = memory;\n    result._allocated = true;\n    return result;\n  }\n}\n","import { getDevice } from \"../Computation\";\nimport { CalcScalar } from \"./CalcScalar\";\nimport { Calc } from \"./Calc\";\nimport { CalcMatrix2D } from \"./CalcMatrix2D\";\n\nexport class CalcElement {\n  private _dims: Array<number> = [];\n  protected _allocated = false;\n  protected _memory: any = null;\n\n  constructor(width = 1, height = 1, depth = 1) {\n    this._dims = [width, height, depth];\n  }\n\n  public dims(): Array<number> {\n    return this._dims;\n  }\n\n  public rows(): number {\n    return this._dims[0];\n  }\n\n  public cols(): number {\n    return this._dims[1];\n  }\n\n  public depth(): number {\n    return this._dims[2];\n  }\n\n  public count(): number {\n    const [width, height, depth] = this._dims;\n\n    return width * height * depth;\n  }\n\n  public resize(width = 1, height = 1, depth = 1) {\n    this._dims = [width, height, depth];\n    this.allocate();\n    return this;\n  }\n\n  public allocate() {\n    const device = getDevice();\n    this._memory = device.alloc(this.count());\n    this._memory.setWidth(this.rows());\n    this._memory.setHeight(this.cols());\n    this._memory.setDepth(this.depth());\n    this._allocated = true;\n\n    return this;\n  }\n\n  public set(arr: Array<number>) {\n    this._memory.set(new Float64Array(arr));\n    return this;\n  }\n\n  public get() {\n    return this._memory.get();\n  }\n\n  public isScalar() {\n    return false;\n  }\n\n  public isRowVector() {\n    return false;\n  }\n\n  public isColVector() {\n    return false;\n  }\n\n  public isMatrix2D() {\n    return false;\n  }\n\n  public isMatrix3D() {\n    return false;\n  }\n\n  public setZeros() {\n    this.calcSync((calc) => {\n      calc.setZeros();\n    });\n    return this;\n  }\n\n  public setRandom(number: number) {\n    this.calcSync((calc) => {\n      calc.setRandom(number);\n    });\n    return this;\n  }\n\n  public setMax(number: number) {\n    this.calcSync((calc) => {\n      calc.setMax(number);\n    });\n    return this;\n  }\n\n  public setMin(number: number) {\n    this.calcSync((calc) => {\n      calc.setMin(number);\n    });\n    return this;\n  }\n\n  public reluBackpropagation(number: number) {\n    this.calcSync((calc) => {\n      calc.reluBackpropagation();\n    });\n    return this;\n  }\n  public pow(number: number) {\n    return this.calcSync((calc) => {\n      return calc.pow(number);\n    });\n  }\n  public sum() {\n    return this.calcSync((calc) => {\n      return calc.sum();\n    });\n  }\n  public reluForwardPropagation() {\n    this.calcSync((calc) => {\n      calc.reluForwardPropagation();\n    });\n    return this;\n  }\n\n  private getCalcSandbox(async = false) {\n    const that = this;\n    return {\n      sum: () => {\n        const result = new CalcScalar().allocate();\n        return that._call(\"algebra\", \"algebra_sum\", async)([that, result])(result);\n      },\n      setZeros: () => {\n        return that._call(\"matrix\", \"matrix_set_zeros\", async)([that])(that);\n      },\n      setRandom: (number: number) => {\n        const nb = new CalcScalar().allocate().set([number]);\n        return that._call(\"matrix\", \"matrix_set_random\", async)([that, nb])(that);\n      },\n    };\n  }\n\n  protected _call(module: string, kernel: string, async: boolean) {\n    return (params, result) => {\n      const calc = Calc.get().setResult(result).setParams(params);\n      return (result) => {\n        if (async) {\n          return new Promise((resolve) => {\n            calc.execAsync(module, kernel).then(() => {\n              resolve(result);\n            });\n          })\n        } else {\n          calc.execSync(module, kernel);\n          return result;\n        }\n      }\n    };\n  }\n\n  public calcSync(callback) {\n    return callback(this.getCalcSandbox(false));\n  }\n\n  public calcAsync(callback) {\n    return new Promise((resolve, reject) => {\n      try {\n        const result = callback(this.getCalcSandbox(true));\n        resolve(result);\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n\n  public getMemory() {\n    return this._memory;\n  }\n\n  [Symbol.dispose]() {\n    this._memory.free();\n  }\n\n  public destroy() {\n    this._memory.free();\n    this._dims = [0, 0, 0];\n    this._allocated = false;\n  }\n\n  public copyFrom(other: CalcElement) {\n    if (!this._allocated) {\n      const device = getDevice();\n      this._memory = device.alloc(other.count());\n      this._allocated = true;\n    }\n    this._memory.setWidth(other.rows());\n    this._memory.setHeight(other.cols());\n    this._memory.setDepth(other.depth());\n    this._memory.copyFrom(other.getMemory());\n    this._dims = other.dims();\n    return this;\n  }\n}\n","import { CalcElement } from \"./CalcElement\";\nimport { CalcRowVector } from \"./CalcRowVector\";\nimport { CalcScalar } from \"./CalcScalar\";\n\nexport class CalcMatrix2D extends CalcElement {\n  constructor(rows = 1, cols = 1) {\n    super(rows, cols);\n  }\n\n  public isMatrix2D() {\n    return true;\n  }\n\n  public row(index: Number): CalcMatrix2D {\n    const result = new CalcMatrix2D(1, this.cols()).allocate();\n    return this._call(\n      \"matrix\",\n      \"matrix_row\",\n      false\n    )([this, new CalcScalar().allocate().set(new Float64Array([index])), result])(result);\n  }\n\n  public col(index: Number): CalcMatrix2D {\n    const result = new CalcMatrix2D(this.rows(), 1).allocate();\n    return this._call(\n      \"matrix\",\n      \"matrix_col\",\n      false\n    )([this, new CalcScalar().allocate().set(new Float64Array([index])), result])(result);\n  }\n\n  public maxCoeff(): number {\n    return this.calcSync((calc) => {\n      return calc.maxCoeff();\n    });\n  }\n\n  public dot(m: CalcMatrix2D) {\n    return this.calcSync((calc) => {\n      return calc.dot(m);\n    });\n  }\n\n  public add(m: CalcMatrix2D) {\n    return this.calcSync((calc) => {\n      return calc.add(m);\n    });\n  }\n\n  public replicate(rows: number, cols: number) {\n    return this.calcSync((calc) => {\n      return calc.replicate(rows, cols);\n    });\n  }\n\n  public transpose(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.transpose();\n    });\n  }\n\n  public logisticForwardPropagation(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.logisticForwardPropagation();\n    });\n  }\n\n  public logisticBackwardPropagation(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.logisticBackwardPropagation();\n    });\n  }\n\n  public pow(number: number): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.pow(number);\n    });\n  }\n\n  public log(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.log();\n    });\n  }\n\n  public multiply(number: number | CalcMatrix2D): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.multiply(number);\n    });\n  }\n  public minusOne(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.minusOne();\n    });\n  }\n  public conjugate(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.conjugate();\n    });\n  }\n  public divide(mOrNumber: number | CalcMatrix2D): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.divide(mOrNumber);\n    });\n  }\n  public subtract(m: CalcMatrix2D): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.subtract(m);\n    });\n  }\n  public rowwiseSum(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.rowwiseSum();\n    });\n  }\n  public softmax(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.softmax();\n    });\n  }\n  public fraction(num: number): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.fraction(num);\n    });\n  }\n  public tanh(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.tanh();\n    });\n  }\n  public tanhDerivative(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.tanhDerivative();\n    });\n  }\n  public logMinusOne(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.logMinusOne();\n    });\n  }\n  public sqrt(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.sqrt();\n    });\n  }\n  public block(offset: number, batch: number, start: number, end: number): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.block(offset, batch, start, end);\n    });\n  }\n  public softmaxDerivative(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.softmaxDerivative();\n    });\n  }\n  public min(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.min();\n    });\n  }\n  public max(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.max();\n    });\n  }\n  public minMax(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.minMax();\n    });\n  }\n\n  protected getCalcSandbox(async = false) {\n    const baseSandbox = super.getCalcSandbox(async);\n    const that = this;\n    return {\n      ...baseSandbox,\n      block(offset: number, batch: number, start: number, end: number): CalcMatrix2D {\n        const result = new CalcMatrix2D(end - start, batch).allocate();\n        const _offset = new CalcScalar().allocate().set([offset]);\n        const _batch = new CalcScalar().allocate().set([batch]);\n        const _start = new CalcScalar().allocate().set([start]);\n        const _end = new CalcScalar().allocate().set([end]);\n        return that._call(\"matrix\", \"matrix_block\", async)([that, _offset, _batch, _start, _end, result])(result);\n      },\n      pow: (number: number) => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_pow\", async)([that, new CalcScalar().allocate().set([number]), result])(result);\n      },\n      fraction: (number: number) => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_fraction\", async)([that, new CalcScalar().allocate().set([number]), result])(result);\n      },\n      softmax: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_softmax\", async)([that, result])(result);\n      },\n      sqrt: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_sqrt\", async)([that, result])(result);\n      },\n      tanh: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_tanh\", async)([that, result])(result);\n      },\n      tanhDerivative: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_tanh_derivative\", async)([that, result])(result);\n      },\n      softmaxDerivative: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_softmax_derivative\", async)([that, result])(result);\n      },\n      rowwiseSum: () => {\n        const result = new CalcMatrix2D(this.rows(), 1).allocate();\n        return that._call(\"algebra\", \"algebra_rowwise_sum\", async)([that, result])(result);\n      },\n      multiply: (m: CalcMatrix2D | number) => {\n        if (typeof m === \"number\") {\n          const _m = new CalcScalar().allocate().set([m]);\n          const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n          return that._call(\"algebra\", \"algebra_multiply_number\", async)([that, _m, result])(result);\n        } else {\n          const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n          return that._call(\"algebra\", \"algebra_multiply\", async)([that, m, result])(result);\n        }\n      },\n      log: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_log\", async)([that, result])(result);\n      },\n      divide: (mOrNumber: number | CalcMatrix2D) => {\n        if (typeof mOrNumber === \"number\") {\n          const num = new CalcScalar().allocate().set([mOrNumber]);\n          const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n          return that._call(\"algebra\", \"algebra_divide_number\", async)([that, num, result])(result);\n        } else {\n          const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n          return that._call(\"algebra\", \"algebra_divide_matrix\", async)([that, mOrNumber, result])(result);\n        }\n      },\n      dot: (m: CalcMatrix2D) => {\n        const result = new CalcMatrix2D(this.rows(), m.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_dot\", async)([that, m, result])(result);\n      },\n      add: (m: CalcMatrix2D | number) => {\n        if (typeof m === \"number\") {\n          const num = new CalcScalar().allocate().set([m]);\n          const result = new CalcMatrix2D(this.rows(), this.cols()).allocate(); // Corrected dimensions for dot product result\n          return that._call(\"algebra\", \"algebra_add_number\", async)([that, num, result])(result);\n        } else {\n          const result = new CalcMatrix2D(this.rows(), this.cols()).allocate(); // Corrected dimensions for dot product result\n          return that._call(\"algebra\", \"algebra_add_matrix\", async)([that, m, result])(result);\n        }\n      },\n      subtract: (m: CalcMatrix2D) => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate(); // Corrected dimensions for dot product result\n        return that._call(\"algebra\", \"algebra_subtract\", async)([that, m, result])(result);\n      },\n      transpose: () => {\n        const result = new CalcMatrix2D(this.cols(), this.rows()).allocate(); // Corrected dimensions for dot product result\n        return that._call(\"matrix\", \"matrix_transpose\", async)([that, result])(result);\n      },\n      logMinusOne: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate(); // Corrected dimensions for dot product result\n        return that._call(\"algebra\", \"algebra_log_minus_one\", async)([that, result])(result);\n      },\n      minusOne: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate(); // Corrected dimensions for dot product result\n        return that._call(\"algebra\", \"algebra_minus_one\", async)([that, result])(result);\n      },\n      replicate: (rows: number, cols: number) => {\n        const _rows = this.rows() * rows;\n        const _cols = this.cols() * cols;\n        const result = new CalcMatrix2D(_rows, _cols).allocate();\n        const __rows = new CalcScalar().allocate().set([rows]);\n        const __cols = new CalcScalar().allocate().set([cols]);\n        return that._call(\"algebra\", \"algebra_replicate_matrix\", async)([that, __rows, __cols, result])(result);\n      },\n      logisticForwardPropagation: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_logistic_forward_propagation\", async)([that, result])(result);\n      },\n      conjugate: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_conjugate\", async)([that, result])(result);\n      },\n      logisticBackwardPropagation: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_logistic_backward_propagation\", async)([that, result])(result);\n      },\n      reluBackpropagation: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_reluBackpropagation\", async)([that, result])(result);\n      },\n      maxCoeff: () => {\n        const result = new CalcScalar().allocate();\n        return that._call(\"algebra\", \"algebra_max_coeff\", async)([that, result])(result);\n      },\n      setMin: (number: number) => {\n        const nb = new CalcScalar().allocate().set([number]);\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"matrix\", \"matrix_set_min\", async)([that, nb, result])(result);\n      },\n      setMax: (number: number) => {\n        const nb = new CalcScalar().allocate().set([number]);\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"matrix\", \"matrix_set_max\", async)([that, nb, result])(result);\n      },\n      min: () => {\n        const result = new CalcScalar().allocate();\n        return that._call(\"matrix\", \"matrix_min\", async)([that, result])(result);\n      },\n      max: () => {\n        const result = new CalcScalar().allocate();\n        return that._call(\"matrix\", \"matrix_max\", async)([that, result])(result);\n      },\n      minMax: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_min_max\", async)([that, result])(result);\n      },\n      img2col: (filterSize, stride, padding) => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        const params = new CalcRowVector(3).allocate().set([filterSize, stride, padding]);\n        return that._call(\"algebra\", \"algebra_img2col\", async)([that, params, result])(result);\n      },\n    };\n  }\n\n  public clone() {\n    const clone = new CalcMatrix2D(this.rows(), this.cols());\n    clone.copyFrom(this);\n    return clone;\n  }\n}\n","import { CalcElement } from \"./CalcElement\";\n\nexport class CalcMatrix3D extends CalcElement {\n  constructor(rows = 1, cols = 1, depth = 1) {\n    super(rows, cols, depth);\n  }\n\n  public isMatrix3D() {\n    return true;\n  }\n}\n","import { CalcElement } from \"./CalcElement\";\nimport { CalcColVector } from \"./CalcColVector\";\n\nexport class CalcRowVector extends CalcElement {\n  constructor(rows = 1) {\n    super(rows);\n  }\n\n  public isRowVector() {\n    return true;\n  }\n\n  public transpose() {\n    const result = CalcColVector.fromMemory(this.getMemory().clone(), this.rows());\n    return result;\n  }\n}\n","import { CalcElement } from \"./CalcElement\";\n\nexport class CalcScalar extends CalcElement {\n  constructor() {\n    super(1);\n  }\n\n  public isScalar() {\n    return true;\n  }\n}\n","import {Calc} from \"./Calc\";\nimport {CalcScalar} from \"./CalcScalar\"\nimport {CalcColVector} from \"./CalcColVector\";\nimport {CalcRowVector} from \"./CalcRowVector\"\nimport {CalcMatrix2D} from \"./CalcMatrix2D\";\nimport {CalcMatrix3D} from \"./CalcMatrix3D\"\n\nconst round = (num: number, decimalPlaces: number): number => {\n  return Math.round((num + 2.23e-16) * Math.pow(10, decimalPlaces)) / Math.pow(10, decimalPlaces);\n};\n\nexport {\n  Calc, CalcScalar, CalcMatrix2D, CalcColVector, CalcRowVector, CalcMatrix3D, round,\n};\n","import { Dimension, Layers } from \"../types\";\nimport { CalcMatrix2D } from \"../Math\";\nimport * as fs from \"fs\";\n\nclass Network {\n  private readonly dimensions: Dimension | null = null;\n  private size = 0;\n  private layers: Layers[] = [];\n\n  constructor(dimensions: Dimension) {\n    this.dimensions = dimensions;\n  }\n\n  addLayer(layer: Layers): Network {\n    this.size++;\n    this.layers.push(layer);\n\n    return this;\n  }\n\n  getLayers(): Layers[] {\n    return this.layers;\n  }\n\n  getLastLayer(): Layers {\n    return this.layers[this.layers.length - 1];\n  }\n\n  forward(input: CalcMatrix2D): CalcMatrix2D {\n    let output = input;\n\n    this.layers.forEach((layer: Layers) => {\n      output = layer.forward(output);\n    });\n\n    return output;\n  }\n\n  forwardAsync(input: CalcMatrix2D): Promise<CalcMatrix2D> {\n    return new Promise((resolve) => {\n      let output = input.clone();\n      let l = 0;\n      const next = () => {\n        return this.layers[l].forwardAsync(output).then((out) => {\n          output.destroy();\n          output = out;\n          if (l < this.layers.length - 1) {\n            l++;\n            next();\n          } else {\n            resolve(output);\n          }\n        })\n      };\n\n      next();\n    })\n  }\n\n  backward(X: CalcMatrix2D, regularization: number, sigma: CalcMatrix2D): void {\n    const m = X.cols();\n    let currentSigma = sigma;\n\n    for (let i = this.layers.length - 1; i >= 0; i -= 1) {\n      const layer = this.layers[i];\n      currentSigma = layer.getBackPropagation().propagate(X, m, regularization, layer, currentSigma);\n    }\n  }\n\n  save(path: string): Promise<string> {\n    const resultJSON = {\n      dimensions: this.dimensions,\n      layers: [],\n    };\n\n    this.layers.forEach((layer: Layers) => {\n      resultJSON.layers.push({\n        type: layer.getType(),\n        size: layer.getSize(),\n        weights: {\n          W: layer.W.get(),\n          b: layer.b.get(),\n        },\n      });\n    });\n\n    const result = JSON.stringify(resultJSON);\n\n    return new Promise((resolve, reject) => {\n      fs.writeFile(path, result, (err) => {\n        if (err) {\n          console.error(err);\n          reject();\n        }\n        resolve(result);\n      });\n    });\n  }\n}\n\nexport { Network };\nexport default Network;\n","import { Dimension, Layers, LayersLSTM } from \"../types\";\n\nexport class NetworkLSTM {\n  /*private readonly dimensions: Dimension | null = null;\n  private size = 0;\n  private layers: LayersLSTM[] = [];\n\n  constructor(dimensions: Dimension) {\n    this.dimensions = dimensions;\n  }\n\n  addLayer(layer: LayersLSTM): NetworkLSTM {\n    this.size++;\n    this.layers.push(layer);\n\n    return this;\n  }\n\n  getLayers(): LayersLSTM[] {\n    return this.layers;\n  }\n\n  loss(vocabularySize: number, sequenceLength: number): number {\n    return -Math.log(1 / vocabularySize) * sequenceLength;\n  }\n\n  sample(charIndices: Object) {}\n\n  forward(X: Matrix[], a0: Matrix): Matrix[] {\n    const nX = X.length;\n    const m = X[0].rows;\n    const tX = X[0].cols;\n    const nY = this.layers[0].Wy.rows;\n    const nA = this.layers[0].Wy.cols;\n\n    const a = new Array(nA).map(() => {\n      return new Matrix(m, tX).setZeros();\n    });\n    const c = new Array(nA).map(() => {\n      return new Matrix(m, tX).setZeros();\n    });\n    const y = new Array(nY).map(() => {\n      return new Matrix(m, tX).setZeros();\n    });\n\n    let aNext = a0;\n    let cNext = new Matrix(nA, m).setZeros();\n\n    for (let t = 0; t < tX; t += 1) {\n      const dataInput = [];\n      X.forEach((m: Matrix, i) => {\n        dataInput[i] = [];\n        for (let row = 0; row < m.rows; row += 1) {\n          dataInput[i].push(m.data[row][t]);\n        }\n      });\n      const input = Matrix.from(dataInput);\n      const [_aNext, _cNext, _yt] = this.layers[0].forward(input, aNext, cNext);\n    }\n  }\n\n  backward(da: Matrix[]): void {\n    const na = da.length;\n    const m = da[0].rows;\n    const tx = da[0].cols;\n    const nx = this.layers[0].x1.rows;\n\n    for (let t = tx - 1; t >= 0; t -= 1) {\n      //this.layers[0].backward(_da, dcPrevT);\n    }\n  }\n\n  /*save(path: string): Promise<string> {\n    const resultJSON = {\n      dimensions: this.dimensions,\n      layers: [],\n    };\n\n    this.layers.forEach((layer: Layers) => {\n      resultJSON.layers.push({\n        type: layer.getType(),\n        size: layer.getSize(),\n        weights: {\n          W: layer.W.data,\n          b: layer.b.data,\n        },\n      });\n    });\n\n    const result = JSON.stringify(resultJSON);\n\n    return new Promise((resolve, reject) => {\n      fs.writeFile(path, result, (err) => {\n        if (err) {\n          console.error(err);\n          reject();\n        }\n        resolve(result);\n      });\n    });\n  }*/\n}\n","\nexport class NetworkRNN {\n  /*private readonly dimensions: Dimension | null = null;W\n  private size = 0;\n  private layers: LayersRNN[] = [];\n\n  constructor(dimensions: Dimension) {\n    this.dimensions = dimensions;\n  }\n\n  addLayer(layer: LayersRNN): NetworkRNN {\n    this.size++;\n    this.layers.push(layer);\n\n    return this;\n  }\n\n  getLayers(): LayersRNN[] {\n    return this.layers;\n  }\n\n  sample(dataset: DatasetVocabulary, length = 50) {\n    const Waa = this.layers[0].wA;\n    const Wax = this.layers[0].wX;\n    const Wya = this.layers[0].wY;\n    const by = this.layers[0].wBY;\n    const b = this.layers[0].wB;\n    const indices = [];\n    const charIndices = dataset.getCharIndices();\n    const newLineCharacter = charIndices[\"\\n\"];\n    const chars = dataset.getChars();\n\n    let x = new Matrix(this.dimensions[1], 1).setZeros();\n    let aPrev = new Matrix(this.dimensions[0], 1).setRandom(this.dimensions[1]);\n\n    let idx = -1;\n    let counter = 0;\n\n    while (idx != newLineCharacter && counter != length) {\n      const a = Wax.dot(x).add(Waa.dot(aPrev)).add(b).tanh();\n      const z = Wya.dot(a).add(by);\n      const y = z.softmax();\n\n      idx = charIndices[chars[y.colMaxCoeffIndex(0)]];\n      x = new Matrix(this.dimensions[1], 1).setZeros();\n      const maxIndex = y.colMaxCoeffIndex(0);\n\n      x.data[maxIndex][0] = 1;\n\n      indices.push(idx);\n      aPrev = a;\n\n      counter += 1;\n    }\n\n    if (counter === 50) {\n      indices.push(newLineCharacter);\n    }\n\n    return indices\n      .map((i) => {\n        return chars[i];\n      })\n      .join(\"\");\n  }\n\n  forward(X: Matrix, Y: Matrix, aPrev: Matrix): Object {\n    const { aNext, y, p, loss } = this.layers[0].forward(X.transpose(), Y, aPrev);\n    return { aNext, y, p, loss };\n  }\n\n  backward(X: Matrix, Y: Matrix, A: Matrix, aNext: Matrix): void {\n    this.layers[0].backward(X, Y, A, aNext);\n  }\n\n  getDimensions(): Dimension {\n    return this.dimensions;\n  }\n\n  save(path: string): Promise<string> {\n    const resultJSON = {\n      dimensions: this.dimensions,\n      layers: [],\n    };\n\n    this.layers.forEach((layer: Layers) => {\n      resultJSON.layers.push({\n        type: layer.getType(),\n        size: layer.getSize(),\n        weights: {\n          wX: layer.wX.data,\n          wA: layer.wA.data,\n          wY: layer.wY.data,\n          wB: layer.wB.data,\n          wBY: layer.wBY.data,\n        },\n      });\n    });\n\n    const result = JSON.stringify(resultJSON);\n\n    return new Promise((resolve, reject) => {\n      fs.writeFile(path, result, (err) => {\n        if (err) {\n          console.error(err);\n          reject();\n        }\n        resolve(result);\n      });\n    });\n  }*/\n}\n","import { Network } from \"./Network\";\nimport { NetworkRNN } from \"./NetworkRNN\";\nimport { NetworkLSTM } from \"./NetworkLSTM\";\n\ntype Networks = Network | NetworkRNN | NetworkLSTM;\n\nexport { Network, NetworkRNN, NetworkLSTM, Networks };\n","import { Dimension, Layers } from \"../types\";\nimport { Network, NetworkRNN, Networks } from \"../Network\";\nimport { BackpropagationFactory } from \"../Layer/Backpropagation/BackpropagationFactory\";\nimport { NetworkLSTM } from \"../Network/NetworkLSTM\";\nimport { DatasetVocabulary } from \"../Dataset/DatasetVocabulary\";\n\nabstract class AbstractNetworkBuilder {\n  protected dimensions: Dimension | null = null;\n  protected lastLayer: Layers | null = null;\n  protected network: Networks | null = null;\n\n  constructor(dimension: Dimension, type = \"DNN\") {\n    this.dimensions = dimension;\n\n    if (type === \"DNN\") {\n      this.network = new Network(this.dimensions);\n    } else if (type === \"RNN\") {\n      this.network = new NetworkRNN(this.dimensions);\n    } else if (type === \"LSTM\") {\n      this.network = new NetworkLSTM(this.dimensions);\n    }\n  }\n\n  createLayer(layerClass: Layers, callback: (layer: Layers) => void | null = null): AbstractNetworkBuilder {\n    // @ts-ignore\n    const layer: Layers = new layerClass();\n\n    if (typeof callback === \"function\") {\n      callback(layer);\n    }\n\n    if (this.lastLayer === null) {\n      this.firstLayerTransition(layer);\n    } else {\n      // @ts-ignore\n      layer.transition(this.lastLayer);\n    }\n\n    layer.configure();\n    layer.setBackPropagation(BackpropagationFactory.create(this.lastLayer, layer));\n\n    this.network.addLayer(layer);\n    this.lastLayer = layer;\n\n    return this;\n  }\n\n  getNetwork(): Networks | null {\n    return this.network;\n  }\n\n  abstract firstLayerTransition(layer: Layers): void;\n}\n\nexport { AbstractNetworkBuilder };\n","import { AbstractNetworkBuilder } from \"./AbstractNetworkBuilder\";\nimport { Layers } from \"../types\";\nimport { Network } from \"../Network\";\nimport * as fs from \"fs\";\nimport { LogisticLayer, ReluLayer, SoftmaxLayer, SoftplusLayer, TanhLayer } from \"../Layer/\";\nimport { CalcMatrix2D } from \"../Math\";\nimport { JSONLayerData } from \"./types\";\n\nclass NetworkBuilder1D extends AbstractNetworkBuilder {\n  firstLayerTransition(layer: Layers): void {\n    layer.setWidth(this.dimensions[0]);\n  }\n\n  static fromJSON(jsonPath: string): Promise<Network> {\n    return new Promise((resolve, reject) => {\n      fs.readFile(jsonPath, (err, data) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n        const json = JSON.parse(data.toString());\n\n        const builder = new NetworkBuilder1D(json[\"dimensions\"]);\n\n        json[\"layers\"].forEach((layerData: JSONLayerData) => {\n          let layerClass = null;\n\n          if (layerData[\"type\"] === \"logistic\") {\n            layerClass = LogisticLayer;\n          } else if (layerData[\"type\"] === \"softmax\") {\n            layerClass = SoftmaxLayer;\n          } else if (layerData[\"type\"] === \"relu\") {\n            layerClass = ReluLayer;\n          } else if (layerData[\"type\"] === \"softplus\") {\n            layerClass = SoftplusLayer;\n          } else if (layerData[\"type\"] === \"tanh\") {\n            layerClass = TanhLayer;\n          }\n\n          builder.createLayer(layerClass, (layer) => {\n            // @ts-ignore\n            layer.setSize(layerData[\"size\"] as number);\n          });\n        });\n\n        const network = builder.getNetwork();\n\n        network.getLayers().forEach((layer, i) => {\n          layer.W = new CalcMatrix2D(\n            json[\"layers\"][i][\"weights\"][\"W\"].length,\n            json[\"layers\"][i][\"weights\"][\"W\"][0].length,\n            json[\"layers\"][i][\"weights\"][\"W\"]\n          );\n          layer.b = new CalcMatrix2D(\n            json[\"layers\"][i][\"weights\"][\"b\"].length,\n            json[\"layers\"][i][\"weights\"][\"b\"][0].length,\n            json[\"layers\"][i][\"weights\"][\"b\"]\n          );\n        });\n\n        resolve(network);\n      });\n    });\n  }\n}\n\nexport { NetworkBuilder1D };\n","import { AbstractNetworkBuilder } from \"./AbstractNetworkBuilder\";\nimport { Layers } from \"../types\";\nimport { Network } from \"../Network\";\nimport * as fs from \"fs\";\nimport { LogisticLayer, ReluLayer, SoftmaxLayer, SoftplusLayer, TanhLayer } from \"../Layer/\";\nimport { ConvLayer } from \"../Layer/\";\nimport { MaxPoolLayer } from \"../Layer/\";\nimport { JSONLayerData } from \"./types\";\n\nclass NetworkBuilder3D extends AbstractNetworkBuilder {\n  firstLayerTransition(layer: Layers): void {\n    if (this.dimensions) {\n      // @ts-ignore\n      layer.setSize(this.dimensions);\n    }\n  }\n\n  static fromJSON(jsonPath: string): Promise<Network> {\n    return new Promise((resolve, reject) => {\n      fs.readFile(jsonPath, (err, data) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n        const json = JSON.parse(data.toString());\n\n        const builder = new NetworkBuilder3D(json[\"size\"]);\n\n        json[\"layers\"].forEach((layerData: JSONLayerData) => {\n          if (layerData[\"type\"] === \"logistic\") {\n            // @ts-ignore\n            builder.createLayer(LogisticLayer, (layer) => {\n              // @ts-ignore\n              layer.setSize(layerData[\"size\"]);\n            });\n          } else if (layerData[\"type\"] === \"softmax\") {\n            // @ts-ignore\n            builder.createLayer(SoftmaxLayer, (layer) => {\n              // @ts-ignore\n              layer.setSize(layerData[\"size\"]);\n            });\n          } else if (layerData[\"type\"] === \"relu\") {\n            // @ts-ignore\n            builder.createLayer(ReluLayer, (layer) => {\n              // @ts-ignore\n              layer.setSize(layerData[\"size\"]);\n            });\n          } else if (layerData[\"type\"] === \"softplus\") {\n            // @ts-ignore\n            builder.createLayer(SoftplusLayer, (layer) => {\n              // @ts-ignore\n              layer.setSize(layerData[\"size\"]);\n            });\n          } else if (layerData[\"type\"] === \"tanh\") {\n            // @ts-ignore\n            builder.createLayer(TanhLayer, (layer) => {\n              // @ts-ignore\n              layer.setSize(layerData[\"size\"]);\n            });\n          } else if (layerData[\"type\"] === \"conv\") {\n            // @ts-ignore\n            builder.createLayer(ConvLayer, (layer: ConvLayer) => {\n              layer.setSize(layerData[\"size\"]);\n              layer.setFilterSize(layerData[\"filterSize\"]);\n              layer.setStride(layerData[\"stride\"]);\n              layer.setNumFilters(layerData[\"numFilters\"]);\n              layer.setPadding(layerData[\"padding\"]);\n            });\n          } else if (layerData[\"type\"] === \"maxpool\") {\n            // @ts-ignore\n            builder.createLayer(MaxPoolLayer, (layer: MaxPoolLayer) => {\n              layer.setSize(layerData[\"size\"]);\n              layer.setFilterSize(layerData[\"filterSize\"]);\n              layer.setStride(layerData[\"stride\"]);\n            });\n          } else if (layerData[\"type\"] === \"fullyconnected\") {\n            // @ts-ignore\n            builder.createLayer(MaxPoolLayer);\n          }\n        });\n\n        const network = builder.getNetwork();\n\n        if (network) {\n          network.getLayers().forEach((layer, i) => {\n            layer.W = json[\"layers\"][\"W\"];\n            layer.b = json[\"layers\"][\"b\"];\n          });\n\n          resolve(network);\n        }\n      });\n    });\n  }\n}\n\nexport { NetworkBuilder3D };\n","import { AbstractNetworkBuilder } from \"./AbstractNetworkBuilder\";\nimport { NetworkBuilder1D } from \"./NetworkBuilder1D\";\nimport { NetworkBuilder3D } from \"./NetworkBuilder3D\";\n\nexport { AbstractNetworkBuilder, NetworkBuilder1D, NetworkBuilder3D };\n","import { Network } from \"../Network\";\nimport { AbstractOptimizer } from \"./Optimizer/AbstractOptimizer\";\nimport { Dataset } from \"../Dataset\";\nimport { CalcMatrix2D } from \"../Math\";\nimport { AbstractCost } from \"./Cost/AbstractCost\";\n\nexport interface CostResult {\n  cost: number;\n  accuracy: number;\n}\n\nexport interface StepCallbackParameters {\n  iteration: number;\n}\n\nexport abstract class AbstractTrainer {\n  network: Network;\n  optimizer: AbstractOptimizer;\n  costFunction: AbstractCost;\n  regularization = 1e-4;\n  iterations = 1000;\n  learningRate = 0.001;\n  verbose = true;\n  verboseStep = 1;\n  stepCallback = (data: StepCallbackParameters): void => undefined;\n\n  constructor(network: Network, optimizer: AbstractOptimizer, costFunction: AbstractCost) {\n    this.network = network;\n    this.optimizer = optimizer;\n    this.costFunction = costFunction;\n  }\n\n  abstract train(inputDataset: Dataset, outputDataset: Dataset): AbstractTrainer;\n\n  setRegularization(regularization: number): AbstractTrainer {\n    this.regularization = regularization;\n    return this;\n  }\n\n  setIterations(iterations: number): AbstractTrainer {\n    this.iterations = iterations;\n    return this;\n  }\n\n  setLearningRate(learningRate: number): AbstractTrainer {\n    this.learningRate = learningRate;\n    return this\n  }\n\n  setVerbose(verbose: boolean): AbstractTrainer {\n    this.verbose = verbose;\n    return this;\n  }\n\n  setVerboseStep(verboseStep: number): AbstractTrainer {\n    this.verboseStep = verboseStep;\n    return this;\n  }\n\n  setStepCallback(stepCallback: (data: StepCallbackParameters) => void): AbstractTrainer {\n    this.stepCallback = stepCallback;\n    return this;\n  }\n\n  cost(predictions: CalcMatrix2D, correctOutput: CalcMatrix2D): CostResult {\n    const miniBatchSize = correctOutput.cols();\n    const dataLoss = this.costFunction.loss(correctOutput, predictions);\n\n    let regularizationPenalty = 0;\n    this.network.getLayers().forEach((layer) => {\n      regularizationPenalty += layer.penalty().get()[0];\n    });\n    const regularizationLoss = (this.regularization * regularizationPenalty) / (2.0 * miniBatchSize);\n\n    const cost = dataLoss + regularizationLoss;\n\n    let correctPredictions = 0;\n    for (let i = 0; i < miniBatchSize; i += 1) {\n      const predictionIndex = predictions.col(i).maxCoeff();\n      const outputIndex = correctOutput.col(i).maxCoeff();\n\n      if (predictionIndex.get()[0] === outputIndex.get()[0]) {\n        correctPredictions++;\n      }\n    }\n\n    const accuracy = (correctPredictions / miniBatchSize) * 100.0;\n\n    return {\n      cost,\n      accuracy,\n    };\n  }\n}\n","import { CalcMatrix2D } from \"../../Math\";\n\nexport abstract class AbstractCost {\n  abstract loss(correctOutput: CalcMatrix2D, predictions: CalcMatrix2D): number;\n  abstract derivative(\n    correctOutput: CalcMatrix2D,\n    predictions: CalcMatrix2D,\n    activationDerivative: CalcMatrix2D\n  ): CalcMatrix2D;\n}\n","import { AbstractCost } from \"./AbstractCost\";\nimport { CalcMatrix2D } from \"../../Math\";\nimport { LayerType } from \"../../types\";\nimport { AbstractLayer } from \"../../Layer/AbstractLayer\";\n\nexport class CrossEntropyCost extends AbstractCost {\n  private readonly epsilon = 1e-8;\n\n  loss(correctOutput: CalcMatrix2D, predictions: CalcMatrix2D): number {\n    const miniBatchSize = correctOutput.cols();\n    const logPredictions = predictions.add(this.epsilon).log();\n    const cost = correctOutput.multiply(logPredictions).sum().get()[0];\n    return -cost / miniBatchSize;\n  }\n\n  derivative(\n    correctOutput: CalcMatrix2D,\n    predictions: CalcMatrix2D,\n    lastLayer: AbstractLayer\n  ): CalcMatrix2D {\n    if (lastLayer.getType() === LayerType.softmax) {\n      return predictions.subtract(correctOutput);\n    }\n\n    const denominator = predictions\n      .multiply(predictions.minusOne().multiply(-1))\n      .add(this.epsilon);\n\n    const dA = predictions.subtract(correctOutput).divide(denominator);\n\n    return dA.multiply(lastLayer.derivative(predictions));\n  }\n}\n","import { AbstractCost } from \"./AbstractCost\";\nimport { CalcMatrix2D } from \"../../Math\";\nimport { AbstractLayer } from \"../../Layer/AbstractLayer\";\n\nexport class MeanSquaredErrorCost extends AbstractCost {\n  loss(correctOutput: CalcMatrix2D, predictions: CalcMatrix2D): number {\n    const miniBatchSize = correctOutput.cols();\n    const error = predictions.subtract(correctOutput);\n    const cost = error.pow(2).sum().get()[0];\n    return cost / (2 * miniBatchSize);\n  }\n\n  derivative(\n    correctOutput: CalcMatrix2D,\n    predictions: CalcMatrix2D,\n    lastLayer: AbstractLayer\n  ): CalcMatrix2D {\n    const dA = predictions.subtract(correctOutput);\n    return dA.multiply(lastLayer.derivative(predictions));\n  }\n}\n","import { AbstractTrainer, CostResult } from \"./AbstractTrainer\";\n\nexport class MiniBatchTrainer extends AbstractTrainer {\n  /*batchSize = 100;\n\n  setBatchSize(batchSize: number): MiniBatchTrainer {\n    this.batchSize = batchSize;\n    return this;\n  }\n\n  cost(inputDataset: Dataset, outputDataset: Dataset): CostResult {\n    const batchSize = this.batchSize;\n    const numberOfExamples = inputDataset.getNumberOfExamples();\n    const numBatches = Math.ceil(numberOfExamples / batchSize);\n\n    let cost = 0.0;\n    let accuracy = 0.0;\n\n    // calculate penalty\n    let penalty = 0.0;\n\n    this.network.getLayers().forEach((layer) => {\n      penalty = layer.penalty();\n    });\n\n    const startTime = new Date().getTime();\n    const startIterationTime = new Date().getTime();\n\n    for (let batch = 0, offset = 0; batch < numberOfExamples; batch += this.batchSize, offset += this.batchSize) {\n      const startIterationTime2 = new Date().getTime();\n      const input = inputDataset.getBatch(offset, this.batchSize);\n      const correctOutput = outputDataset.getBatch(offset, this.batchSize);\n      const predictions = this.network.forward(input.data);\n\n      const error = correctOutput.data.multiply(predictions.log()).sum();\n      cost += (-1 / numberOfExamples) * error + this.regularization / (penalty * (2 * inputDataset.data.cols));\n\n      for (let col = 0; col < predictions.cols; col += 1) {\n        const index1 = predictions.colMaxCoeffIndex(col);\n        const index2 = correctOutput.data.colMaxCoeffIndex(col);\n\n        if (index1 === index2) {\n          accuracy++;\n        }\n      }\n    }\n\n    return {\n      cost,\n      accuracy: (accuracy / numberOfExamples) * 100,\n    };\n  }\n\n  train(inputDataset: Dataset, outputDataset: Dataset): MiniBatchTrainer {\n    const numberOfExamples = inputDataset.getNumberOfExamples();\n\n    let t = 0;\n\n    this.optimizer.setBatchSize(this.batchSize);\n    this.optimizer.setLearningRate(this.learningRate);\n\n    for (let i = 0; i < this.iterations; i += 1) {\n      const startTime = new Date().getTime();\n      const startIterationTime = new Date().getTime();\n\n      for (let batch = 0, offset = 0; batch < numberOfExamples; batch += this.batchSize, offset += this.batchSize) {\n        const startIterationTime2 = new Date().getTime();\n        const input = inputDataset.getBatch(offset, this.batchSize);\n        const output = outputDataset.getBatch(offset, this.batchSize);\n        const predictions = this.network.forward(input.data);\n\n        this.network.backward(input.data, output.data, this.regularization);\n\n        this.optimizer.setT(++t);\n\n        this.network.getLayers().forEach((layer) => {\n          this.optimizer.optimize(layer);\n        });\n\n        if (this.verbose) {\n          const cost = this.cost(input, output);\n          const endIterationTime = new Date().getTime();\n          console.log(\n            `Batch: ${offset} / ${numberOfExamples} | Batch time: ${\n              endIterationTime - startIterationTime2\n            }ms | Time from start: ${round((endIterationTime - startIterationTime) / 1000, 1)}s. | Cost: ${round(\n              cost.cost,\n              2\n            )} | Acc: ${cost.accuracy}`\n          );\n        }\n      }\n\n      if (this.verbose) {\n        if ((i + 1) % this.verboseStep === 0) {\n          const endTime = new Date().getTime();\n          const currentResult = this.cost(inputDataset, outputDataset);\n\n          console.log(\n            `Iteration: ${i + 1} | Cost: ${round(currentResult.cost, 5)} | Accuracy: ${\n              currentResult.accuracy\n            }% | Time: ${(endTime - startTime) / 1000} s.`\n          );\n        }\n      }\n\n      this.stepCallback({\n        iteration: i,\n      });\n    }\n\n    return this;\n  }*/\n}\n","import { Layers } from \"../../types\";\n\nexport abstract class AbstractOptimizer {\n  protected batchSize = 0;\n  protected t = 0;\n  protected learningRate = 0;\n\n  setBatchSize(batchSize: number): AbstractOptimizer {\n    this.batchSize = batchSize;\n    return this;\n  }\n\n  setT(t: number): AbstractOptimizer {\n    this.t = t;\n    return this;\n  }\n\n  setLearningRate(learningRate: number): AbstractOptimizer {\n    this.learningRate = learningRate;\n    return this;\n  }\n\n  abstract optimize(layer: Layers): void;\n}\n","import { AbstractOptimizer } from \"./AbstractOptimizer\";\nimport { Layers } from \"../../types\";\n\nexport class OptimizerAdagrad extends AbstractOptimizer {\n  private epsilon = 1e-8;\n\n  optimize(layer: Layers): void {\n    this.adagrad(layer, this.learningRate);\n  }\n\n  adagrad(layer: Layers, learningRate: number): void {\n    layer.dW = layer.dW.add(layer.gW.pow(2));\n    layer.W = layer.W.subtract(layer.gW.multiply(learningRate).divide(layer.dW.add(this.epsilon).sqrt()));\n\n    layer.db = layer.db.add(layer.gb.pow(2));\n    layer.b = layer.b.subtract(layer.gb.multiply(learningRate).divide(layer.db.add(this.epsilon).sqrt()));\n  }\n}\n","import { AbstractOptimizer } from \"./AbstractOptimizer\";\nimport { Layers } from \"../../types\";\n\nexport class OptimizerAdam extends AbstractOptimizer {\n  protected beta1 = 0.9;\n  protected beta2 = 0.999;\n\n  setBeta1(beta1: number): OptimizerAdam {\n    this.beta1 = beta1;\n    return this;\n  }\n\n  setBeta2(beta2: number): OptimizerAdam {\n    this.beta2 = beta2;\n    return this;\n  }\n\n  optimize(layer: Layers): void {\n    this.adam(layer, this.learningRate, this.t);\n  }\n\n  adam(layer: Layers, learningRate: number, t: number): void {\n    layer.vW = layer.vW.multiply(this.beta1).add(layer.gW.multiply(1 - this.beta1));\n    layer.vb = layer.vb.multiply(this.beta1).add(layer.gb.multiply(1 - this.beta1));\n\n    layer.sW = layer.sW.multiply(this.beta2).add(layer.sW.pow(2).multiply(1 - this.beta2));\n    layer.sb = layer.sb.multiply(this.beta2).add(layer.sb.pow(2).multiply(1 - this.beta2));\n\n    const vWCorrected = layer.vW.divide(1 - Math.pow(this.beta1, 2));\n    const vbCorrected = layer.vb.divide(1 - Math.pow(this.beta1, 2));\n\n    const sWCorrected = layer.sW.add(1e-8).sqrt();\n    const sbCorrected = layer.sb.add(1e-8).sqrt();\n\n    layer.W = layer.W.subtract(vWCorrected.divide(sWCorrected).multiply(learningRate));\n    layer.b = layer.b.subtract(vbCorrected.divide(sbCorrected).multiply(learningRate));\n  }\n}\n","import { AbstractOptimizer } from \"./AbstractOptimizer\";\nimport { Layers } from \"../../types\";\n\nexport class OptimizerGradientDescent extends AbstractOptimizer {\n  optimize(layer: Layers): void {\n    this.gradientDescent(layer, this.learningRate);\n  }\n\n  gradientDescent(layer: Layers, learningRate: number): void {\n    layer.W = layer.W.subtract(layer.gW.multiply(learningRate));\n    layer.b = layer.b.subtract(layer.b.multiply(learningRate));\n  }\n}\n","import { AbstractOptimizer } from \"./AbstractOptimizer\";\nimport { Layers } from \"../../types\";\n\nexport class OptimizerMomentum extends AbstractOptimizer {\n  protected beta = 0.9;\n\n  optimize(layer: Layers): void {\n    this.momentum(layer, this.learningRate);\n  }\n\n  setBeta(beta: number): OptimizerMomentum {\n    this.beta = beta;\n    return this;\n  }\n\n  momentum(layer: Layers, learningRate: number): void {\n    layer.vW = layer.gW.multiply(this.beta).add(layer.gW.multiply(1 - this.beta));\n    layer.vb = layer.gb.multiply(this.beta).add(layer.gb.multiply(1 - this.beta));\n\n    layer.W = layer.W.subtract(layer.vW.multiply(learningRate));\n    layer.b = layer.b.subtract(layer.vb.multiply(learningRate));\n  }\n}\n","import { AbstractOptimizer } from \"./AbstractOptimizer\";\nimport { Layers } from \"../../types\";\n\nexport class OptimizerRMSProp extends AbstractOptimizer {\n  protected alpha = 1e-3;\n  protected beta = 0.9;\n\n  setBeta(beta: number): OptimizerRMSProp {\n    this.beta = beta;\n    return this;\n  }\n\n  setAlpha(alpha: number): OptimizerRMSProp {\n    this.alpha = alpha;\n    return this;\n  }\n\n  optimize(layer: Layers): void {\n    this.rmsprop(layer, this.learningRate, this.alpha, this.beta);\n  }\n\n  rmsprop(layer: Layers, learningRate: number, alpha: number, beta: number): void {\n    layer.sW = layer.sW.multiply(beta).add(layer.gW.pow(2).multiply(1 - beta));\n    layer.sb = layer.sb.multiply(beta).add(layer.gb.pow(2).multiply(1 - beta));\n\n    layer.W = layer.W.subtract(layer.gW.multiply(alpha).divide(layer.sW.sqrt().add(1e-8)));\n    layer.b = layer.b.subtract(layer.gb.multiply(alpha).divide(layer.sb.sqrt().add(1e-8)));\n  }\n}\n","import { AbstractOptimizer } from \"./AbstractOptimizer\";\nimport { Layers } from \"../../types\";\nexport class OptimizerRNN extends AbstractOptimizer {\n  /*public hs = {};\n\n  public ys = {};\n\n  protected mWxh: Matrix = null;\n\n  protected mWhh: Matrix = null;\n\n  protected mWhy: Matrix = null;\n\n  protected mbh: Matrix = null;\n\n  protected mby: Matrix = null;\n\n  constructor(network: NetworkRNN) {\n    super();\n\n    this.mWxh = new Matrix(network.getDimensions()[0], network.getDimensions()[1]).setZeros();\n    this.mWhh = new Matrix(network.getDimensions()[0], network.getDimensions()[0]).setZeros();\n    this.mWhy = new Matrix(network.getDimensions()[1], network.getDimensions()[0]).setZeros();\n    this.mbh = new Matrix(network.getDimensions()[0], 1).setZeros();\n    this.mby = new Matrix(network.getDimensions()[1], 1).setZeros();\n  }\n  optimize(layer: Layers): void {\n    layer.dwX = layer.dwX.setMin(-5).setMax(5);\n    layer.dwY = layer.dwY.setMin(-5).setMax(5);\n    layer.dwA = layer.dwA.setMin(-5).setMax(5);\n    layer.dwB = layer.dwB.setMin(-5).setMax(5);\n    layer.dwBY = layer.dwBY.setMin(-5).setMax(5);\n\n    this.mWxh = this.mWxh.add(layer.dwX.pow(2));\n    layer.wX = layer.wX.add(layer.dwX.divide(this.mWxh.add(1e-8).sqrt()).multiply(-this.learningRate));\n\n    this.mWhh = this.mWhh.add(layer.dwA.pow(2));\n    layer.wA = layer.wA.add(layer.dwA.divide(this.mWhh.add(1e-8).sqrt()).multiply(-this.learningRate));\n\n    this.mWhy = this.mWhy.add(layer.dwY.pow(2));\n    layer.wY = layer.wY.add(layer.dwY.divide(this.mWhy.add(1e-8).sqrt()).multiply(-this.learningRate));\n\n    this.mbh = this.mbh.add(layer.dwB.pow(2));\n    layer.wB = layer.wB.add(layer.dwB.divide(this.mbh.add(1e-8).sqrt()).multiply(-this.learningRate));\n\n    this.mby = this.mby.add(layer.dwBY.pow(2));\n    layer.wBY = layer.wBY.add(layer.dwBY.divide(this.mby.add(1e-8).sqrt()).multiply(-this.learningRate));\n  }\n\n  setHS(hs: Matrix) {\n    this.hs[this.t] = hs;\n    return this;\n  }\n\n  setYS(ys: Matrix) {\n    this.ys[this.t] = ys;\n    return this;\n  }*/\n}\n","import { OptimizerAdam } from \"./OptimizerAdam\";\nimport { OptimizerGradientDescent } from \"./OptimizerGradientDescent\";\nimport { OptimizerAdagrad } from \"./OptimizerAdagrad\";\nimport { OptimizerMomentum } from \"./OptimizerMomentum\";\nimport { OptimizerRMSProp } from \"./OptimizerRMSProp\";\n\nexport { OptimizerAdam, OptimizerGradientDescent, OptimizerAdagrad, OptimizerMomentum, OptimizerRMSProp };\n","import { NetworkRNN } from \"../Network\";\nimport { DatasetVocabulary } from \"../Dataset/DatasetVocabulary\";\nimport { CalcMatrix2D } from \"../Math\";\nimport { OptimizerRNN } from \"./Optimizer/OptimizerRNN\";\n\nexport class RNNTrainer {\n  protected network: NetworkRNN | null = null;\n  protected iterations = 1000;\n  protected learningRate = 0.01;\n  protected optimizer: OptimizerRNN = null;\n\n  constructor(network: NetworkRNN) {\n    this.network = network;\n    this.optimizer = new OptimizerRNN(network).setLearningRate(this.learningRate);\n  }\n\n  train(dataset: DatasetVocabulary): [number] {\n    const [X, Y] = dataset.buildData(this.network.getDimensions()[0]);\n    const [x, y] = dataset.vectorization(X, Y);\n\n    //const hs = {};\n    //const ys = {};\n    this.optimizer\n      .setT(-1)\n      .setHS(new CalcMatrix2D(this.network.getDimensions()[0], this.network.getDimensions()[0]).setZeros());\n\n    /*let mWxh = new Matrix(this.network.getDimensions()[0], this.network.getDimensions()[1]).setZeros();\n    let mWhh = new Matrix(this.network.getDimensions()[0], this.network.getDimensions()[0]).setZeros();\n    let mWhy = new Matrix(this.network.getDimensions()[1], this.network.getDimensions()[0]).setZeros();\n    let mbh = new Matrix(this.network.layers[0].dwB.rows, this.network.layers[0].dwB.cols).setZeros();\n    let mby = new Matrix(this.network.layers[0].dwBY.rows, this.network.layers[0].dwBY.cols).setZeros();*/\n\n    for (let iteration = 0; iteration < this.iterations; iteration += 1) {\n      let _loss = 0;\n      for (let i = 0; i < X.length; i += 1) {\n        const { aNext, y: _y, loss } = this.network.forward(x[i], y[i], this.optimizer.hs[i - 1]);\n        this.optimizer.setT(i).setHS(aNext).setYS(_y);\n        //hs[i] = aNext;\n        //ys[i] = _y;\n\n        if ((i + 1) % 1000 === 0) {\n          console.log(`FORWARD Example ${i + 1} | Iteration ${iteration + 1}`);\n        }\n\n        _loss += loss;\n      }\n\n      console.log(`Loss ${_loss} | Iteration: ${iteration}`);\n\n      for (let i = X.length - 1; i >= 0; i -= 1) {\n        const dy = CalcMatrix2D.from(this.optimizer.ys[i].data);\n        for (let row = 0; row < dy.rows; row += 1) {\n          dy.data[row][x[i].transpose().rowMaxCoeffIndex(row)] -= 1;\n        }\n\n        this.network.backward(x[i], dy, this.optimizer.hs[i - 1], this.optimizer.hs[i]);\n\n        if ((i + 1) % 1000 === 0) {\n          console.log(`BACKWARD Example ${i + 1} | Iteration ${iteration + 1}`);\n        }\n      }\n\n      this.optimizer.optimize(this.network.layers[0]);\n\n      console.log(this.network.sample(dataset).trim());\n    }\n    return [0];\n  }\n\n  setIterations(num: number): RNNTrainer {\n    this.iterations = num;\n    return this;\n  }\n\n  setLearningRate(num: number): RNNTrainer {\n    this.learningRate = num;\n    this.optimizer.setLearningRate(num);\n    return this;\n  }\n}\n","import { AbstractTrainer } from \"./AbstractTrainer\";\nimport { Dataset } from \"../Dataset\";\nimport { round } from \"../Math\";\nimport { AbstractOptimizer } from \"./Optimizer/AbstractOptimizer\";\nimport { Network } from \"../Network\";\nimport { AbstractCost } from \"./Cost/AbstractCost\";\n\nexport class Trainer extends AbstractTrainer {\n  constructor(network: Network, optimizer: AbstractOptimizer, costFunction: AbstractCost) {\n    super(network, optimizer, costFunction);\n  }\n\n  train(inputDataset: Dataset, outputDataset: Dataset): AbstractTrainer {\n    const numberOfExamples = inputDataset.getNumberOfExamples();\n    const X = inputDataset.data.transpose();\n    const Y = outputDataset.data.transpose();\n\n    let t = 0;\n\n    this.optimizer.setBatchSize(numberOfExamples);\n    this.optimizer.setLearningRate(this.learningRate);\n\n    for (let i = 0; i < this.iterations; i += 1) {\n      const startTime = new Date().getTime();\n\n      const predictions = this.network.forward(X);\n\n      const sigma = this.costFunction.derivative(Y, predictions, this.network.getLastLayer());\n\n      this.network.backward(X, this.regularization, sigma);\n\n      this.optimizer.setT(++t);\n\n      this.network.getLayers().forEach((layer) => {\n        this.optimizer.optimize(layer);\n      });\n\n      if (this.verbose && (i + 1) % this.verboseStep === 0) {\n        const currentResult = this.cost(predictions, Y);\n        const endTime = new Date().getTime();\n\n        console.log(\n          `Iteration: ${i + 1} | Cost: ${round(currentResult.cost, 5)} | Accuracy: ${round(\n            currentResult.accuracy,\n            2\n          )}% | Time: ${(endTime - startTime) / 1000} s.`\n        );\n      }\n\n      this.stepCallback({\n        iteration: i,\n      });\n    }\n\n    return this;\n  }\n}\n","import { MiniBatchTrainer } from \"./MiniBatchTrainer\";\nimport { Trainer } from \"./Trainer\";\nimport { RNNTrainer } from \"./RNNTrainer\";\n\nexport { MiniBatchTrainer, Trainer, RNNTrainer };\n","import { SoftmaxLayer, LogisticLayer, TanhLayer, ReluLayer, SoftplusLayer, AbstractLayer } from \"./Layer\";\nimport { ConvLayer } from \"./Layer/\";\nimport { MaxPoolLayer } from \"./Layer/\";\nimport { FullyConnectedLayer } from \"./Layer/\";\nimport { PurelinLayer } from \"./Layer\";\nimport { AbstractLayer3D } from \"./Layer/AbstractLayer3D\";\nimport { AbstractLayer1D } from \"./Layer/AbstractLayer1D\";\nimport { RecurrentLayer } from \"./Layer\";\nimport { LSTMLayer } from \"./Layer\";\n\nexport type Dimension = [number] | [number, number, number];\n\nexport enum LayerType {\n  logistic = \"logistic\",\n  softmax = \"softmax\",\n  tanh = \"tanh\",\n  relu = \"relu\",\n  softplus = \"softplus\",\n  conv = \"conv\",\n  maxpool = \"maxpool\",\n  fullyconnected = \"fullyconnected\",\n  purelin = \"purelin\",\n  rnnlayer = \"rnnlayer\",\n  lstm = \"lstm\"\n}\n\nexport type Layers =\n  | LogisticLayer\n  | SoftmaxLayer\n  | TanhLayer\n  | ReluLayer\n  | SoftplusLayer\n  | ConvLayer\n  | MaxPoolLayer\n  | FullyConnectedLayer\n  | PurelinLayer\n  | RecurrentLayer\n  | AbstractLayer3D\n  | AbstractLayer1D;\nexport type Layers1D = LogisticLayer | SoftmaxLayer | TanhLayer | ReluLayer | SoftplusLayer | PurelinLayer;\nexport type Layers3D = ConvLayer | MaxPoolLayer | FullyConnectedLayer | AbstractLayer3D;\nexport type LayersRNN = RecurrentLayer;\nexport type LayersLSTM = LSTMLayer;","module.exports = require(\"csvtojson\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"\";","import { CalcScalar } from \"./Math/CalcScalar\";\nimport { CalcRowVector } from \"./Math/CalcRowVector\";\nimport { CalcColVector } from \"./Math/CalcColVector\";\nimport { CalcMatrix2D } from \"./Math/CalcMatrix2D\";\nimport { CalcMatrix3D } from \"./Math/CalcMatrix3D\";\nimport { setDevice, getDevice } from \"./Computation\";\nimport { NetworkBuilder1D, NetworkBuilder3D } from \"./NetworkBuilder\";\nimport {\n  SoftmaxLayer,\n  LogisticLayer,\n  ReluLayer,\n  SoftplusLayer,\n  TanhLayer,\n  ConvLayer,\n  FullyConnectedLayer,\n  MaxPoolLayer,\n  RecurrentLayer,\n  LSTMLayer,\n} from \"./Layer\";\nimport {\n  OptimizerAdam,\n  OptimizerGradientDescent,\n  OptimizerAdagrad,\n  OptimizerMomentum,\n  OptimizerRMSProp,\n} from \"./Trainer/Optimizer\";\nimport { MiniBatchTrainer, Trainer as TrainerTrainer, RNNTrainer } from \"./Trainer\";\nimport { NetworkRNN, NetworkLSTM } from \"./Network\";\nimport { MeanSquaredErrorCost} from \"./Trainer/Cost/MeanSquaredErrorCost\";\nimport { CrossEntropyCost } from \"./Trainer/Cost/CrossEntropyCost\";\n\nconst NetworkBuilder = { NetworkBuilder1D, NetworkBuilder3D };\nconst Layer = {\n  SoftmaxLayer,\n  LogisticLayer,\n  ReluLayer,\n  SoftplusLayer,\n  TanhLayer,\n  ConvLayer,\n  MaxPoolLayer,\n  FullyConnectedLayer,\n  RecurrentLayer,\n  LSTMLayer,\n};\nconst Optimizer = {\n  OptimizerAdam,\n  OptimizerGradientDescent,\n  OptimizerAdagrad,\n  OptimizerMomentum,\n  OptimizerRMSProp,\n};\nconst Trainer = {\n  MiniBatchTrainer,\n  Trainer: TrainerTrainer,\n  RNNTrainer,\n};\nconst Network = {\n  NetworkRNN,\n  NetworkLSTM,\n};\n\nconst Cost = {\n  MeanSquaredErrorCost, CrossEntropyCost\n}\n\nimport native from \"../../build/Release/node_native_memory.node\";\nimport path from \"path\";\n\nnative.setModulePath(path.resolve(__dirname, \"../\"));\n\nimport { Dataset as DatasetDataset } from \"./Dataset\";\nimport { DatasetBuilder as DatasetBuilderBuilder, DatasetVocabularyBuilder } from \"./DatasetBuilder\";\nimport { DatasetBuilderSourceCSV } from \"./DatasetBuilder/DatasetBuilderSource\";\nimport { DatasetVocabularyBuilderSourceTextFile } from \"./DatasetBuilder/DatasetVocabularyBuilderSource\";\n\nimport {\n  CallbackDatasetModifier,\n  MinMaxScalingDatasetModifier,\n  MissingDataDatasetModifier,\n  ShuffleDatasetModifier,\n  CategoryDatasetModifier,\n  SplitDatasetModifier,\n} from \"./Dataset/DatasetModifier\";\n\nconst DatasetBuilder = {\n  DatasetBuilder: DatasetBuilderBuilder,\n  DatasetVocabularyBuilder,\n};\nconst Dataset = {\n  Dataset: DatasetDataset,\n};\nconst DatasetModifier = {\n  CallbackDatasetModifier,\n  MinMaxScalingDatasetModifier,\n  MissingDataDatasetModifier,\n  ShuffleDatasetModifier,\n  CategoryDatasetModifier,\n  SplitDatasetModifier,\n};\nconst DatasetBuilderSource = {\n  DatasetBuilderSourceCSV,\n  DatasetVocabularyBuilderSourceTextFile,\n};\nconst Math = {\n  CalcScalar, CalcRowVector, CalcColVector, CalcMatrix2D, CalcMatrix3D, setDevice, getDevice, native\n}\n\nexport { NetworkBuilder, Layer, Optimizer, Trainer, Network, Cost, Math, DatasetBuilder, Dataset, DatasetModifier, DatasetBuilderSource };\nexport default { NetworkBuilder, Layer, Optimizer, Trainer, Network, Cost,Math, DatasetBuilder, Dataset, DatasetModifier, DatasetBuilderSource  };\n"],"names":["setDevice","getDevice","nodenative","currentDevice","Device","CPU","device","Dataset","exampleSize","arguments","length","undefined","numberOfExamples","data","_classCallCheck","_defineProperty","_createClass","key","value","exampleAt","index","row","transpose","getNumberOfExamples","rows","getExampleSize","cols","getBatch","offset","batchSize","block","fromMatrix","m","instance","AbstractDatasetModifier","dataset","CallbackDatasetModifier","_AbstractDatasetModif","_callSuper","_inherits","CategoryDatasetModifier","columns","_this","apply","_this2","size","_dataset","sort","forEach","column","_this2$applyForColumn","applyForColumn","_this2$applyForColumn2","_slicedToArray","_size","example","values","push","filter","self","indexOf","insertColumnAfter","col","oldValue","MinMaxScalingDatasetModifier","newData","minMax","MissingDataDatasetModifier","_len","args","Array","_key","concat","rowsToFill","correctExamplesCount","sum","valueToFill","exampleIndex","isNaN","modificationType","_ref","setModificationType","type","ShuffleDatasetModifier","SplitDatasetModifier","DatasetVocabulary","DatasetBuilder","fromSource","sourcePromise","params","Promise","resolve","then","source","matrix","parse","AbstractDatasetBuilderSource","CalcMatrix2D","csvtojson","DatasetBuilderSourceCSV","_AbstractDatasetBuild","_this$data$","_loop","i","Number","_toConsumableArray","allocate","set","Float64Array","fromLocalFile","path","noheader","output","fromFile","arr","DatasetVocabularyBuilder","str","AbstractDatasetVocabularyBuilderSource","fs","DatasetVocabularyBuilderSourceTextFile","_AbstractDatasetVocab","reject","readFile","err","buffer","toString","AbstractLayer","setBackPropagation","backPropagation","getBackPropagation","setWidth","width","getWidth","setHeight","height","getHeight","setDepth","depth","getDepth","transition","previousLayer","AbstractLayer1D","_AbstractLayer","W","b","A","Z","gW","gb","vW","vb","sW","sb","dW","db","configure","resize","setRandom","setZeros","forward","input","dot","add","replicate","activation","forwardAsync","all","calcAsync","calc","_ref2","added","copyFrom","activationAsync","destroy","is1D","is3D","getSize","getOutputWidth","getOutputHeight","getOutputDepth","_superPropGet","setSize","penalty","pow","AbstractLayer3D","dimension","AbstractBackPropagation","layer","Backpropagation1Dto1D","_AbstractBackPropagat","propagate","regularization","sigma","previousActivations","delta","conjugate","divide","multiply","rowwiseSum","result","Error","derivative","Backpropagation3Dto1D","LayerType","BackpropagationToMaxPool","BackpropagationToConv","BackpropagationToRecurrent","BackpropagationToLSTM","BackpropagationFactory","create","getType","rnnlayer","lstm","maxpool","conv","fullyconnected","lstmLayer","_lstmLayer$cache","cache","C","X","F","I","G","O","sequenceLength","hiddenSize","daNext","dcNext","t","da","tanh","dZo","minusOne","dc","dft","dZf","dit","dZi","dgt","dZg","dZ","vstack","dU","U","clipValue","_i","_arr","d","clip","maxPoolLayer","_maxPoolLayer$cache","switches","inputShape","_inputShape","inputHeight","inputWidth","inputDepth","dX","dXData","get","sigmaData","switchIndex","outputSize","maxIndex","reshape","rnnLayer","_rnnLayer$cache","dyt","dWya","dby","Wya","dtanh","dWax","dWaa","dba","Waa","Wax","ConvLayer","_AbstractLayer3D","filterWeightCount","filterSize","numFilters","Math","floor","padding","stride","im2col","outputHeight","outputWidth","filterArea","calcSync","img2col","inputCols","reshapedResult","relu","reluDerivative","setFilterSize","setNumFilters","num","setPadding","pad","setStride","FullyConnectedLayer","_AbstractLayer1D","inputSize","currentInput","LSTMLayer","wPenalty","uPenalty","aPrev","cPrev","clone","outputs","xt","Zf","slice","Zi","Zg","Zo","ft","sigmoid","it","gt","ot","cNext","aNext","hstack","a","LogisticLayer","logisticForwardPropagation","logistic","logisticBackwardPropagation","MaxPoolLayer","inputData","outputData","n","batchOffset","c","channelOffset","y","x","startY","startX","maxVal","Infinity","fy","fx","imgY","imgX","currentIndex","currentVal","outputIndex","getFilterSize","getStride","getPadding","PurelinLayer","purelin","setOnes","RecurrentLayer","waaPenalty","waxPenalty","wyaPenalty","ba","by","yt","ReluLayer","setMin","reluBackpropagation","SoftmaxLayer","softmax","softmaxDerivative","SoftplusLayer","exp","log","softplus","fraction","TanhLayer","tanhDerivative","Calc","setResult","_result","setParams","_params","execSync","module","kernel","exec","execAsync","async","loadModule","fn","loadFunction","execute","map","getMemory","e","console","error","CalcElement","CalcColVector","_CalcElement","isColVector","fromMemory","memory","_memory","_allocated","CalcScalar","_dims","dims","count","_this$_dims","alloc","isScalar","isRowVector","isMatrix2D","isMatrix3D","number","setMax","reluForwardPropagation","getCalcSandbox","that","_call","nb","callback","Symbol","dispose","free","other","CalcRowVector","maxCoeff","mOrNumber","subtract","logMinusOne","sqrt","batch","start","end","min","max","baseSandbox","_objectSpread","_offset","_batch","_start","_end","_m","_rows","_cols","__rows","__cols","CalcMatrix3D","round","decimalPlaces","Network","dimensions","addLayer","layers","getLayers","getLastLayer","l","next","out","backward","currentSigma","save","resultJSON","weights","JSON","stringify","writeFile","NetworkLSTM","NetworkRNN","AbstractNetworkBuilder","network","createLayer","layerClass","lastLayer","firstLayerTransition","getNetwork","NetworkBuilder1D","_AbstractNetworkBuild","fromJSON","jsonPath","json","builder","layerData","NetworkBuilder3D","AbstractTrainer","optimizer","costFunction","setRegularization","setIterations","iterations","setLearningRate","learningRate","setVerbose","verbose","setVerboseStep","verboseStep","setStepCallback","stepCallback","cost","predictions","correctOutput","miniBatchSize","dataLoss","loss","regularizationPenalty","regularizationLoss","correctPredictions","predictionIndex","accuracy","AbstractCost","CrossEntropyCost","_AbstractCost","logPredictions","epsilon","denominator","dA","MeanSquaredErrorCost","MiniBatchTrainer","_AbstractTrainer","AbstractOptimizer","setBatchSize","setT","OptimizerAdagrad","_AbstractOptimizer","optimize","adagrad","OptimizerAdam","setBeta1","beta1","setBeta2","beta2","adam","vWCorrected","vbCorrected","sWCorrected","sbCorrected","OptimizerGradientDescent","gradientDescent","OptimizerMomentum","momentum","setBeta","beta","OptimizerRMSProp","setAlpha","alpha","rmsprop","OptimizerRNN","RNNTrainer","train","_dataset$buildData","buildData","getDimensions","_dataset$buildData2","Y","_dataset$vectorizatio","vectorization","_dataset$vectorizatio2","setHS","iteration","_loss","_this$network$forward","hs","_y","setYS","dy","from","ys","rowMaxCoeffIndex","sample","trim","Trainer","inputDataset","outputDataset","startTime","Date","getTime","currentResult","endTime","TrainerTrainer","NetworkBuilder","Layer","Optimizer","Cost","native","setModulePath","__dirname","DatasetDataset","DatasetBuilderBuilder","DatasetModifier","DatasetBuilderSource"],"sourceRoot":""}