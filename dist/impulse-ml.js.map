{"version":3,"file":"impulse-ml.js","mappings":"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","sources":["webpack://impulse-math-device-ts/./build/Release/node_native_memory.node","webpack://impulse-math-device-ts/external node-commonjs \"path\"","webpack://impulse-math-device-ts/webpack/bootstrap","webpack://impulse-math-device-ts/webpack/runtime/compat get default export","webpack://impulse-math-device-ts/webpack/runtime/define property getters","webpack://impulse-math-device-ts/webpack/runtime/hasOwnProperty shorthand","webpack://impulse-math-device-ts/webpack/runtime/make namespace object","webpack://impulse-math-device-ts/webpack/runtime/node module decorator","webpack://impulse-math-device-ts/webpack/runtime/publicPath","webpack://impulse-math-device-ts/./src/typescript/Math/Computation/utils.ts","webpack://impulse-math-device-ts/./src/typescript/Math/Calc.ts","webpack://impulse-math-device-ts/./src/typescript/Math/CalcElement.ts","webpack://impulse-math-device-ts/./src/typescript/Math/CalcScalar.ts","webpack://impulse-math-device-ts/./src/typescript/Math/CalcColVector.ts","webpack://impulse-math-device-ts/./src/typescript/Math/CalcRowVector.ts","webpack://impulse-math-device-ts/./src/typescript/Math/CalcMatrix2D.ts","webpack://impulse-math-device-ts/./src/typescript/Math/CalcMatrix3D.ts","webpack://impulse-math-device-ts/./src/typescript/Math/index.ts","webpack://impulse-math-device-ts/external node-commonjs \"fs\"","webpack://impulse-math-device-ts/./src/typescript/Network/Network.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Layer/Backpropagation/AbstractBackpropagation.ts","webpack://impulse-math-device-ts/./src/typescript/types.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Layer/Backpropagation/Backpropagation1Dto1D.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Layer/AbstractLayer1D.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Layer/AbstractLayer.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Layer/LSTM.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Layer/Backpropagation/BackpropagationLSTM.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Layer/Backpropagation/BackpropagationFactory.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Builder/AbstractNetworkBuilder.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Layer/Softmax.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Layer/Logistic.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Layer/Tanh.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Layer/Relu.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Builder/NetworkBuilder1D.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Trainer/Optimizer/AbstractOptimizer.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Trainer/Optimizer/OptimizerAdam.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Trainer/Optimizer/OptimizerGradientDescent.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Trainer/Optimizer/OptimizerAdagrad.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Trainer/Optimizer/OptimizerMomentum.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Trainer/Optimizer/OptimizerRMSProp.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Trainer/index.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Trainer/BatchTrainer.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Trainer/AbstractTrainer.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Trainer/Cost/AbstractCost.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Trainer/Cost/MeanSquaredErrorCost.ts","webpack://impulse-math-device-ts/./src/typescript/Network/Trainer/Cost/CrossEntropyCost.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/Dataset.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/Builder/DatasetBuilder.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/DatasetVocabulary.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/Builder/DatasetVocabularyBuilder.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/Builder/Source/AbstractSource.ts","webpack://impulse-math-device-ts/external commonjs2 \"csvtojson\"","webpack://impulse-math-device-ts/./src/typescript/Dataset/Builder/Source/SourceCSV.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/Builder/VocabularySource/TextFile.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/Builder/VocabularySource/AbstractVocabularySource.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/Modifier/AbstractModifier.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/Modifier/MinMaxScaling.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/Modifier/MissingData.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/Modifier/Shuffle.ts","webpack://impulse-math-device-ts/./src/typescript/Dataset/Modifier/Split.ts","webpack://impulse-math-device-ts/./src/typescript/main.ts"],"sourcesContent":["\ntry {\n  process.dlopen(module, require(\"path\").join(__dirname, __webpack_public_path__, \"8c0d713d94b87197578f9913475daeeb.node\"));\n} catch (error) {\n  throw new Error('node-loader:\\n' + error);\n}\n","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"\";","import nodenative from \"../../../../build/Release/node_native_memory.node\";\n\ntype Device = any;\n\nlet currentDevice: Device = new nodenative.Device.CPU();\n\nexport const setDevice = (device: Device): void => {\n  currentDevice = device;\n};\n\nexport const getDevice = (): Device => {\n  return currentDevice;\n};\n","import { CalcElement } from \"./CalcElement\";\nimport { getDevice } from \"./Computation\";\n\nexport class Calc {\n  private _result: Array<CalcElement> | null = null;\n  private _params: Array<CalcElement> | null = null;\n\n  public static get() {\n    return new Calc();\n  }\n\n  public setResult(result: Array<CalcElement>) {\n    this._result = result;\n    return this;\n  }\n\n  public setParams(params: Array<CalcElement>) {\n    this._params = params;\n    return this;\n  }\n\n  public execSync(module: string, kernel: string) {\n    this.exec(module, kernel)(this._params, this._result);\n    return this;\n  }\n\n  /**\n   * Note: This function is not truly asynchronous. The underlying native addon\n   * does not support asynchronous execution.\n   */\n  public execAsync(module: string, kernel: string): Promise<Calc> {\n    return new Promise((resolve) => {\n      this.exec(\n        module,\n        kernel,\n        true,\n      )(this._params, this._result).then(() => {\n        resolve(this);\n      });\n    });\n  }\n\n  private exec(module: string, kernel: string, async = false) {\n    try {\n      const device = getDevice();\n      const m = device.loadModule(module);\n      const fn = m.loadFunction(kernel);\n\n      return (input: Array<CalcElement> | null = null, output: Array<CalcElement> | null = null) => {\n        return fn.execute(\n          (input || []).map((m) => m.getMemory()),\n          (output || []).map((m) => m.getMemory()),\n          async,\n        );\n      };\n    } catch (e) {\n      console.error(e);\n      return () => {};\n    }\n  }\n}\n","import { getDevice } from \"./Computation\";\nimport { CalcScalar } from \"./CalcScalar\";\nimport { Calc } from \"./Calc\";\n\nexport class CalcElement {\n  private _dims: Array<number> = [];\n  protected _allocated = false;\n  protected _memory: any = null;\n  protected _device: any = null;\n\n  constructor(width = 1, height = 1, depth = 1) {\n    this._dims = [width, height, depth];\n    this._device = getDevice();\n  }\n\n  public dims(): Array<number> {\n    return this._dims;\n  }\n\n  public rows(): number {\n    return this._dims[0];\n  }\n\n  public cols(): number {\n    return this._dims[1];\n  }\n\n  public depth(): number {\n    return this._dims[2];\n  }\n\n  public count(): number {\n    const [width, height, depth] = this._dims;\n\n    return width * height * depth;\n  }\n\n  public resize(width = 1, height = 1, depth = 1) {\n    this._dims = [width, height, depth];\n    this.allocate();\n    return this;\n  }\n\n  public allocate() {\n    if (!this._allocated) {\n      this._memory = this._device.alloc(this.count());\n      this._memory.setWidth(this.rows());\n      this._memory.setHeight(this.cols());\n      this._memory.setDepth(this.depth());\n      this._allocated = true;\n    }\n\n    return this;\n  }\n\n  public set(arr: Array<number>) {\n    this._memory.set(new Float64Array(arr));\n    return this;\n  }\n\n  public get() {\n    return this._memory.get();\n  }\n\n  public isScalar() {\n    return false;\n  }\n\n  public isRowVector() {\n    return false;\n  }\n\n  public isColVector() {\n    return false;\n  }\n\n  public isMatrix2D() {\n    return false;\n  }\n\n  public isMatrix3D() {\n    return false;\n  }\n\n  public setZeros() {\n    return this.calcSync((calc) => {\n      return calc.setZeros();\n    });\n  }\n\n  public setRandom(number: number) {\n    return this.calcSync((calc) => {\n      return calc.setRandom(number);\n    });\n  }\n\n  public setMax(number: number) {\n    return this.calcSync((calc) => {\n      return calc.setMax(number);\n    });\n  }\n\n  public setMin(number: number) {\n    return this.calcSync((calc) => {\n      return calc.setMin(number);\n    });\n  }\n\n  public reluBackpropagation() {\n    return this.calcSync((calc) => {\n      return calc.reluBackpropagation();\n    });\n  }\n  public pow(number: number) {\n    return this.calcSync((calc) => {\n      return calc.pow(number);\n    });\n  }\n  public sum() {\n    return this.calcSync((calc) => {\n      return calc.sum();\n    });\n  }\n  public reluForwardPropagation() {\n    return this.calcSync((calc) => {\n      return calc.reluForwardPropagation();\n    });\n  }\n\n  private getCalcSandbox(async = false) {\n    return {\n      sum: () => {\n        const result = new CalcScalar().allocate();\n        return this._call(\"algebra\", \"algebra_sum\", async)([this, result])(result);\n      },\n      setZeros: () => {\n        return this._call(\"matrix\", \"matrix_set_zeros\", async)([this])(this);\n      },\n      setRandom: (number: number) => {\n        const nb = new CalcScalar().allocate().set([number]);\n        return this._call(\"matrix\", \"matrix_set_random\", async)([this, nb])(this);\n      },\n    };\n  }\n\n  protected _call(module: string, kernel: string, async: boolean) {\n    return (params, result) => {\n      const calc = Calc.get().setResult(result).setParams(params);\n      return (result) => {\n        if (async) {\n          return new Promise((resolve) => {\n            calc.execAsync(module, kernel).then(() => {\n              resolve(result);\n            });\n          });\n        } else {\n          calc.execSync(module, kernel);\n          return result;\n        }\n      };\n    };\n  }\n\n  public calcSync(callback) {\n    return callback(this.getCalcSandbox(false));\n  }\n\n  public calcAsync(callback) {\n    return new Promise((resolve, reject) => {\n      try {\n        const result = callback(this.getCalcSandbox(true));\n        resolve(result);\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n\n  public getMemory() {\n    return this._memory;\n  }\n\n  [Symbol.dispose]() {\n    this._memory.free();\n  }\n\n  public destroy() {\n    this._memory.free();\n    this._dims = [0, 0, 0];\n    this._allocated = false;\n  }\n\n  public copyFrom(other: CalcElement) {\n    if (this._allocated) {\n      this.destroy();\n    }\n    this._dims = other.dims();\n    this.allocate()\n    this._memory.setWidth(other.rows());\n    this._memory.setHeight(other.cols());\n    this._memory.setDepth(other.depth());\n    this._memory.copyFrom(other.getMemory());\n    this._dims = other.dims();\n    return this;\n  }\n\n  public replace(other: CalcElement) {\n    if (this.rows() !== other.rows() || this.cols() !== other.cols() || this.depth() !== other.depth()) {\n        this.destroy();\n        this.copyFrom(other);\n    } else {\n        this._memory.copyFrom(other.getMemory());\n    }\n    other.destroy();\n    return this;\n  }\n}\n","import { CalcElement } from \"./CalcElement\";\n\nexport class CalcScalar extends CalcElement {\n  constructor() {\n    super(1);\n  }\n\n  public isScalar() {\n    return true;\n  }\n}\n","import { CalcElement } from \"./CalcElement\";\n\nexport class CalcColVector extends CalcElement {\n  constructor(cols = 1) {\n    super(1, cols);\n  }\n\n  public isColVector() {\n    return true;\n  }\n\n  public static fromMemory(memory, cols: number) {\n    const result = new CalcColVector(cols);\n    result._memory = memory;\n    result._allocated = true;\n    return result;\n  }\n}\n","import { CalcElement } from \"./CalcElement\";\nimport { CalcColVector } from \"./CalcColVector\";\n\nexport class CalcRowVector extends CalcElement {\n  constructor(rows = 1) {\n    super(rows);\n  }\n\n  public isRowVector() {\n    return true;\n  }\n\n  public transpose() {\n    const result = CalcColVector.fromMemory(this.getMemory().clone(), this.rows());\n    return result;\n  }\n}\n","import { CalcElement } from \"./CalcElement\";\nimport { CalcRowVector } from \"./CalcRowVector\";\nimport { CalcScalar } from \"./CalcScalar\";\nimport { Calc } from \"./Calc\";\n\nexport class CalcMatrix2D extends CalcElement {\n  constructor(rows = 1, cols = 1) {\n    super(rows, cols);\n  }\n\n  public isMatrix2D() {\n    return true;\n  }\n\n  public row(index: number): CalcMatrix2D {\n    const result = new CalcMatrix2D(1, this.cols()).allocate();\n    return this._call(\n      \"matrix\",\n      \"matrix_row\",\n      false,\n    )([this, new CalcScalar().allocate().set(new Float64Array([index])), result])(result);\n  }\n\n  public col(index: Number): CalcMatrix2D {\n    const result = new CalcMatrix2D(this.rows(), 1).allocate();\n    return this._call(\n      \"matrix\",\n      \"matrix_col\",\n      false,\n    )([this, new CalcScalar().allocate().set(new Float64Array([index])), result])(result);\n  }\n\n  public maxCoeff(): number {\n    return this.calcSync((calc) => {\n      return calc.maxCoeff();\n    });\n  }\n\n  public dot(m: CalcMatrix2D) {\n    return this.calcSync((calc) => {\n      return calc.dot(m);\n    });\n  }\n\n  public add(m: CalcMatrix2D) {\n    return this.calcSync((calc) => {\n      return calc.add(m);\n    });\n  }\n\n  public forwardPropagation(w: CalcMatrix2D, b: CalcMatrix2D): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.forwardPropagation(w, b);\n    });\n  }\n\n  public backwardPropagation(w: CalcMatrix2D, a_prev: CalcMatrix2D, regularization: number, num_examples: number): [CalcMatrix2D, CalcMatrix2D, CalcMatrix2D] {\n    return this.calcSync((calc) => {\n      return calc.backwardPropagation(w, a_prev, regularization, num_examples);\n    });\n  }\n\n  public transpose(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.transpose();\n    });\n  }\n\n  public logisticForwardPropagation(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.logisticForwardPropagation();\n    });\n  }\n\n  public logisticBackwardPropagation(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.logisticBackwardPropagation();\n    });\n  }\n\n  public pow(number: number): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.pow(number);\n    });\n  }\n\n  public log(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.log();\n    });\n  }\n\n  public multiply(number: number | CalcMatrix2D): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.multiply(number);\n    });\n  }\n  public minusOne(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.minusOne();\n    });\n  }\n  public conjugate(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.conjugate();\n    });\n  }\n  public divide(mOrNumber: number | CalcMatrix2D): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.divide(mOrNumber);\n    });\n  }\n  public subtract(m: CalcMatrix2D): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.subtract(m);\n    });\n  }\n  public rowwiseSum(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.rowwiseSum();\n    });\n  }\n\n  public crossEntropyLoss(correctOutput: CalcMatrix2D, predictions: CalcMatrix2D, epsilon: number): number {\n      return this.calcSync((calc) => {\n          return calc.crossEntropyLoss(correctOutput, predictions, epsilon);\n      });\n  }\n\n  public crossEntropyDerivative(correctOutput: CalcMatrix2D, predictions: CalcMatrix2D, epsilon: number): CalcMatrix2D {\n      return this.calcSync((calc) => {\n          return calc.crossEntropyDerivative(correctOutput, predictions, epsilon);\n      });\n  }\n\n  public softmax(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.softmax();\n    });\n  }\n  public fraction(num: number): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.fraction(num);\n    });\n  }\n  public tanh(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.tanh();\n    });\n  }\n  public tanhDerivative(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.tanhDerivative();\n    });\n  }\n  public logMinusOne(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.logMinusOne();\n    });\n  }\n  public sqrt(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.sqrt();\n    });\n  }\n  public block(rowOffset: number, colOffset: number, numRows: number, numCols: number): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.block(rowOffset, colOffset, numRows, numCols);\n    });\n  }\n  public softmaxDerivative(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.softmaxDerivative();\n    });\n  }\n  public min(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.min();\n    });\n  }\n  public max(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.max();\n    });\n  }\n  public minMax(): CalcMatrix2D {\n    return this.calcSync((calc) => {\n      return calc.minMax();\n    });\n  }\n\n  // Static method to run Adam optimizer\n  public static runAdamOptimizer(\n    W: CalcMatrix2D, b: CalcMatrix2D,\n    gW: CalcMatrix2D, gb: CalcMatrix2D,\n    vW: CalcMatrix2D, vb: CalcMatrix2D,\n    sW: CalcMatrix2D, sb: CalcMatrix2D,\n    learningRate: number, beta1: number, beta2: number, epsilon: number, t: number\n  ): { W: CalcMatrix2D, b: CalcMatrix2D, vW: CalcMatrix2D, vb: CalcMatrix2D, sW: CalcMatrix2D, sb: CalcMatrix2D } {\n    // Create a dummy CalcMatrix2D instance to access calcSync\n    const dummy = new CalcMatrix2D(1, 1);\n    return dummy.calcSync((calc) => {\n      // Call the sandbox version of adamOptimize\n      return calc.adamOptimize(W, b, gW, gb, vW, vb, sW, sb, learningRate, beta1, beta2, epsilon, t);\n    });\n  }\n\n  protected getCalcSandbox(async = false) {\n    const baseSandbox = super.getCalcSandbox(async);\n    const that = this;\n    return {\n      ...baseSandbox,\n      crossEntropyLoss: (correctOutput: CalcMatrix2D, predictions: CalcMatrix2D, epsilon: number) => {\n        const _epsilon = new CalcScalar().allocate().set([epsilon]);\n        const result = new CalcScalar().allocate();\n        return that._call(\"algebra\", \"algebra_cross_entropy_loss\", async)([correctOutput, predictions, _epsilon], [result])(result.get()[0]);\n      },\n      crossEntropyDerivative: (correctOutput: CalcMatrix2D, predictions: CalcMatrix2D, epsilon: number) => {\n          const _epsilon = new CalcScalar().allocate().set([epsilon]);\n          const result = new CalcMatrix2D(correctOutput.rows(), correctOutput.cols()).allocate();\n          return that._call(\"algebra\", \"algebra_cross_entropy_derivative\", async)([correctOutput, predictions, _epsilon], [result])(result);\n      },\n      block(rowOffset: number, colOffset: number, numRows: number, numCols: number): CalcMatrix2D {\n        const result = new CalcMatrix2D(numRows, numCols).allocate();\n        const _rowOffset = new CalcScalar().allocate().set([rowOffset]);\n        const _colOffset = new CalcScalar().allocate().set([colOffset]);\n        const _numRows = new CalcScalar().allocate().set([numRows]);\n        const _numCols = new CalcScalar().allocate().set([numCols]);\n        return that._call(\"matrix\", \"matrix_block\", async)([that, _rowOffset, _colOffset, _numRows, _numCols, result])(result);\n      },\n      forwardPropagation: (w: CalcMatrix2D, b: CalcMatrix2D) => {\n        const result = new CalcMatrix2D(w.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_forward_propagation\", async)([w, this, b, result])(result);\n      },\n      backwardPropagation: (w: CalcMatrix2D, a_prev: CalcMatrix2D, regularization: number, num_examples: number) => {\n        const gW = new CalcMatrix2D(w.rows(), w.cols()).allocate();\n        const gb = new CalcMatrix2D(w.rows(), 1).allocate();\n        const dA_prev = new CalcMatrix2D(a_prev.rows(), a_prev.cols()).allocate();\n        const _regularization = new CalcScalar().allocate().set([regularization]);\n        const _num_examples = new CalcScalar().allocate().set([num_examples]);\n\n        return that._call(\"algebra\", \"algebra_backward_propagation\", async)([this, w, a_prev, _regularization, _num_examples, gW, gb, dA_prev])([gW, gb, dA_prev]);\n      },\n      pow: (number: number) => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_pow\", async)([this, new CalcScalar().allocate().set([number]), result])(\n          result,\n        );\n      },\n      fraction: (number: number) => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\n          \"algebra\",\n          \"algebra_fraction\",\n          async,\n        )([this, new CalcScalar().allocate().set([number]), result])(result);\n      },\n      softmax: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_softmax\", async)([this, result])(result);\n      },\n      sqrt: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_sqrt\", async)([this, result])(result);\n      },\n      tanh: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_tanh\", async)([this, result])(result);\n      },\n      tanhDerivative: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_tanh_derivative\", async)([this, result])(result);\n      },\n      softmaxDerivative: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_softmax_derivative\", async)([this, result])(result);\n      },\n      rowwiseSum: () => {\n        const result = new CalcMatrix2D(this.rows(), 1).allocate();\n        return that._call(\"algebra\", \"algebra_rowwise_sum\", async)([this, result])(result);\n      },\n      multiply: (m: CalcMatrix2D | number) => {\n        if (typeof m === \"number\") {\n          const _m = new CalcScalar().allocate().set([m]);\n          const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n          return that._call(\"algebra\", \"algebra_multiply_number\", async)([this, _m, result])(result);\n        } else {\n          const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n          return that._call(\"algebra\", \"algebra_multiply\", async)([this, m, result])(result);\n        }\n      },\n      log: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_log\", async)([this, result])(result);\n      },\n      divide: (mOrNumber: number | CalcMatrix2D) => {\n        if (typeof mOrNumber === \"number\") {\n          const num = new CalcScalar().allocate().set([mOrNumber]);\n          const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n          return that._call(\"algebra\", \"algebra_divide_number\", async)([this, num, result])(result);\n        } else {\n          const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n          return that._call(\"algebra\", \"algebra_divide_matrix\", async)([this, mOrNumber, result])(result);\n        }\n      },\n      dot: (m: CalcMatrix2D) => {\n        const result = new CalcMatrix2D(this.rows(), m.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_dot\", async)([this, m, result])(result);\n      },\n      add: (m: CalcMatrix2D | number) => {\n        if (typeof m === \"number\") {\n          const num = new CalcScalar().allocate().set([m]);\n          const result = new CalcMatrix2D(this.rows(), this.cols()).allocate(); // Corrected dimensions for dot product result\n          return that._call(\"algebra\", \"algebra_add_number\", async)([this, num, result])(result);\n        } else {\n          const result = new CalcMatrix2D(this.rows(), this.cols()).allocate(); // Corrected dimensions for dot product result\n          return that._call(\"algebra\", \"algebra_add_matrix\", async)([this, m, result])(result);\n        }\n      },\n      subtract: (m: CalcMatrix2D) => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate(); // Corrected dimensions for dot product result\n        return that._call(\"algebra\", \"algebra_subtract\", async)([this, m, result])(result);\n      },\n      transpose: () => {\n        const result = new CalcMatrix2D(this.cols(), this.rows()).allocate(); // Corrected dimensions for dot product result\n        return that._call(\"matrix\", \"matrix_transpose\", async)([this, result])(result);\n      },\n      logMinusOne: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate(); // Corrected dimensions for dot product result\n        return that._call(\"algebra\", \"algebra_log_minus_one\", async)([this, result])(result);\n      },\n      minusOne: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate(); // Corrected dimensions for dot product result\n        return that._call(\"algebra\", \"algebra_minus_one\", async)([this, result])(result);\n      },\n      logisticForwardPropagation: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_logistic_forward_propagation\", async)([this, result])(result);\n      },\n      conjugate: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_conjugate\", async)([this, result])(result);\n      },\n      logisticBackwardPropagation: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_logistic_backward_propagation\", async)([this, result])(result);\n      },\n      leakyRelu: (alpha: number) => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_leaky_relu\", async)([this, new CalcScalar().allocate().set([alpha]), result])(result);\n      },\n      leakyReluBackpropagation: (alpha: number) => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_leaky_reluBackpropagation\", async)([this, new CalcScalar().allocate().set([alpha]),  result])(result);\n      },\n      maxCoeff: () => {\n        const result = new CalcScalar().allocate();\n        return that._call(\"algebra\", \"algebra_max_coeff\", async)([this, result])(result);\n      },\n      setMin: (number: number) => {\n        const nb = new CalcScalar().allocate().set([number]);\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"matrix\", \"matrix_set_min\", async)([this, nb, result])(result);\n      },\n      setMax: (number: number) => {\n        const nb = new CalcScalar().allocate().set([number]);\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"matrix\", \"matrix_set_max\", async)([this, nb, result])(result);\n      },\n      min: () => {\n        const result = new CalcScalar().allocate();\n        return that._call(\"matrix\", \"matrix_min\", async)([this, result])(result);\n      },\n      max: () => {\n        const result = new CalcScalar().allocate();\n        return that._call(\"matrix\", \"matrix_max\", async)([this, result])(result);\n      },\n      minMax: () => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        return that._call(\"algebra\", \"algebra_min_max\", async)([this, result])(result);\n      },\n      img2col: (filterSize, stride, padding) => {\n        const result = new CalcMatrix2D(this.rows(), this.cols()).allocate();\n        const params = new CalcRowVector(3).allocate().set([filterSize, stride, padding]);\n        return that._call(\"algebra\", \"algebra_img2col\", async)([this, params, result])(result);\n      },\n      adamOptimize: (\n        W: CalcMatrix2D, b: CalcMatrix2D,\n        gW: CalcMatrix2D, gb: CalcMatrix2D,\n        vW: CalcMatrix2D, vb: CalcMatrix2D,\n        sW: CalcMatrix2D, sb: CalcMatrix2D,\n        learningRate: number, beta1: number, beta2: number, epsilon: number, t: number\n      ): { W: CalcMatrix2D, b: CalcMatrix2D, vW: CalcMatrix2D, vb: CalcMatrix2D, sW: CalcMatrix2D, sb: CalcMatrix2D } => {\n        // Allocate memory for the results\n        const updatedW = new CalcMatrix2D(W.rows(), W.cols()).allocate();\n        const updatedB = new CalcMatrix2D(b.rows(), b.cols()).allocate();\n        const updatedVW = new CalcMatrix2D(vW.rows(), vW.cols()).allocate();\n        const updatedVB = new CalcMatrix2D(vb.rows(), vb.cols()).allocate();\n        const updatedSW = new CalcMatrix2D(sW.rows(), sW.cols()).allocate();\n        const updatedSB = new CalcMatrix2D(sb.rows(), sb.cols()).allocate();\n\n        // Create CalcScalar instances for numbers\n        const _learningRate = new CalcScalar().allocate().set([learningRate]);\n        const _beta1 = new CalcScalar().allocate().set([beta1]);\n        const _beta2 = new CalcScalar().allocate().set([beta2]);\n        const _epsilon = new CalcScalar().allocate().set([epsilon]);\n        const _t = new CalcScalar().allocate().set([t]);\n\n        // Call the C++ function\n        return that._call(\"algebra\", \"algebra_adam_optimize\", async)(\n          [W, b, gW, gb, vW, vb, sW, sb, _learningRate, _beta1, _beta2, _epsilon, _t], // Inputs\n          [updatedW, updatedB, updatedVW, updatedVB, updatedSW, updatedSB] // Outputs\n        )({ // Return object mapping\n          W: updatedW, b: updatedB,\n          vW: updatedVW, vb: updatedVB,\n          sW: updatedSW, sb: updatedSB\n        });\n      },\n    };\n  }\n\n  public clone() {\n    const clone = new CalcMatrix2D(this.rows(), this.cols());\n    clone.copyFrom(this);\n    return clone;\n  }\n}\n","import { CalcElement } from \"./CalcElement\";\n\nexport class CalcMatrix3D extends CalcElement {\n  constructor(rows = 1, cols = 1, depth = 1) {\n    super(rows, cols, depth);\n  }\n\n  public isMatrix3D() {\n    return true;\n  }\n}\n","import { Calc } from \"./Calc\";\nimport { CalcScalar } from \"./CalcScalar\";\nimport { CalcColVector } from \"./CalcColVector\";\nimport { CalcRowVector } from \"./CalcRowVector\";\nimport { CalcMatrix2D } from \"./CalcMatrix2D\";\nimport { CalcMatrix3D } from \"./CalcMatrix3D\";\n\nconst round = (num: number, decimalPlaces: number): number => {\n  return Math.round((num + 2.23e-16) * Math.pow(10, decimalPlaces)) / Math.pow(10, decimalPlaces);\n};\n\nexport { Calc, CalcScalar, CalcMatrix2D, CalcColVector, CalcRowVector, CalcMatrix3D, round };\nexport default { Calc, CalcScalar, CalcMatrix2D, CalcColVector, CalcRowVector, CalcMatrix3D, round };\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"fs\");","import { Dimension, Layers } from \"../types\";\nimport { CalcMatrix2D } from \"../Math\";\nimport * as fs from \"fs\";\n\nclass Network {\n  private readonly dimensions: Dimension | null = null;\n  private size = 0;\n  private layers: Layers[] = [];\n\n  constructor(dimensions: Dimension) {\n    this.dimensions = dimensions;\n  }\n\n  addLayer(layer: Layers): Network {\n    this.size++;\n    this.layers.push(layer);\n\n    return this;\n  }\n\n  getLayers(): Layers[] {\n    return this.layers;\n  }\n\n  getLastLayer(): Layers {\n    return this.layers[this.layers.length - 1];\n  }\n\n  forward(input: CalcMatrix2D): CalcMatrix2D {\n    let output = input;\n\n    this.layers.forEach((layer: Layers) => {\n      output = layer.forward(output);\n    });\n\n    return output;\n  }\n\n  backward(X: CalcMatrix2D, regularization: number, sigma: CalcMatrix2D): void {\n    const m = X.cols();\n    let currentSigma = sigma;\n\n    for (let i = this.layers.length - 1; i >= 0; i -= 1) {\n      const layer = this.layers[i];\n      const isLastLayer = i === this.layers.length - 1;\n      currentSigma = layer.getBackPropagation().propagate(X, m, regularization, layer, currentSigma, isLastLayer);\n    }\n  }\n\n  save(path: string): Promise<string> {\n    const resultJSON = {\n      dimensions: this.dimensions,\n      layers: [],\n    };\n\n    this.layers.forEach((layer: Layers) => {\n      resultJSON.layers.push({\n        type: layer.getType(),\n        size: layer.getSize(),\n        weights: {\n          W: {data: [...layer.W.get()], rows: layer.W.rows(), cols: layer.W.cols()},\n          b: {data: [...layer.b.get()], rows: layer.b.rows(), cols: layer.b.cols()},\n        },\n      });\n    });\n\n    const result = JSON.stringify(resultJSON);\n\n    return new Promise((resolve, reject) => {\n      fs.writeFile(path, result, (err) => {\n        if (err) {\n          console.error(err);\n          reject();\n        }\n        resolve(result);\n      });\n    });\n  }\n}\n\nexport { Network };\nexport default Network;\n","import { Layers } from \"../../../types\";\nimport { CalcMatrix2D } from \"../../../Math\";\n\nexport abstract class AbstractBackPropagation {\n  protected layer: Layers | null = null;\n  protected previousLayer: Layers | null = null;\n\n  constructor(layer: Layers | null, previousLayer: Layers) {\n    this.layer = layer;\n    this.previousLayer = previousLayer;\n  }\n\n  abstract propagate(\n    input: CalcMatrix2D,\n    numberOfExamples: number,\n    regularization: number,\n    layer: Layers,\n    sigma: CalcMatrix2D,\n    previousSigma: CalcMatrix2D,\n  ): CalcMatrix2D;\n}\n","import { SoftmaxLayer, LogisticLayer, TanhLayer, ReluLayer } from \"./Network/Layer\";\nimport { AbstractLayer1D } from \"./Network/Layer/AbstractLayer1D\";\n\nexport type Dimension = [number] | [number, number, number];\n\nexport enum LayerType {\n  logistic = \"logistic\",\n  softmax = \"softmax\",\n  tanh = \"tanh\",\n  relu = \"relu\",\n}\n\nexport type Layers = LogisticLayer | SoftmaxLayer | TanhLayer | ReluLayer | AbstractLayer1D;\nexport type Layers1D = LogisticLayer | SoftmaxLayer | TanhLayer | ReluLayer;\n","import { AbstractBackPropagation } from \"./AbstractBackpropagation\";\nimport { CalcMatrix2D } from \"../../../Math\";\nimport { Layers } from \"../../../types\";\nimport { LayerType } from \"../../../types\";\n\nexport class Backpropagation1Dto1D extends AbstractBackPropagation {\n  propagate(\n    input: CalcMatrix2D,\n    numberOfExamples: number,\n    regularization: number,\n    layer: Layers,\n    sigma: CalcMatrix2D,\n    isLastLayer: boolean,\n  ): CalcMatrix2D {\n    let dZ = sigma;\n\n    if (isLastLayer && layer.getType() !== LayerType.softmax) {\n      dZ.replace(sigma.multiply(layer.derivative(layer.Z)));\n      //console.log(`\\n--- Backpropagation: Last Layer (${layer.getType()}) ---`);\n      //console.log(\"sigma (A - Y):\", sigma.get());\n    }/* else {\n      //console.log(`\\n--- Backpropagation: Hidden Layer (${layer.getType()}) ---`);\n      //console.log(\"sigma (dA_prev from next layer):\", sigma.get());\n    }*/\n\n    //console.log(\"dZ (gradient of linear output):\", dZ.get());\n\n    const previousActivations = this.previousLayer !== null ? this.previousLayer.A : input;\n    const [gW, gb, dA_prev] = dZ.backwardPropagation(layer.W, previousActivations, regularization, numberOfExamples);\n\n    //console.log(\"gW (weight gradients):\", gW.get());\n    //console.log(\"gb (bias gradients):\", gb.get());\n    //console.log(\"dA_prev (propagating to previous layer):\", dA_prev.get());\n\n    layer.gW.replace(gW);\n    layer.gb.replace(gb);\n\n    return dA_prev;\n  }\n}\n","import { AbstractLayer } from \"./AbstractLayer\";\nimport { Layers } from \"../../types\";\nimport { CalcMatrix2D, CalcScalar } from \"../../Math\";\n\nabstract class AbstractLayer1D extends AbstractLayer {\n  protected depth = 1;\n  public W: CalcMatrix2D;\n  public b: CalcMatrix2D;\n  public A: CalcMatrix2D;\n  public Z: CalcMatrix2D;\n  public gW: CalcMatrix2D;\n  public gb: CalcMatrix2D;\n  public vW: CalcMatrix2D;\n  public sW: CalcMatrix2D;\n  public vb: CalcMatrix2D;\n  public sb: CalcMatrix2D;\n  public dW: CalcMatrix2D;\n  public db: CalcMatrix2D;\n  public dZ: CalcMatrix2D;\n\n  constructor() {\n    super();\n    this.W = new CalcMatrix2D();\n    this.b = new CalcMatrix2D();\n    this.A = new CalcMatrix2D();\n    this.Z = new CalcMatrix2D();\n    this.gW = new CalcMatrix2D();\n    this.gb = new CalcMatrix2D();\n    this.vW = new CalcMatrix2D();\n    this.vb = new CalcMatrix2D();\n    this.sW = new CalcMatrix2D();\n    this.sb = new CalcMatrix2D();\n    this.dW = new CalcMatrix2D();\n    this.db = new CalcMatrix2D();\n  }\n\n  configure(): void {\n    this.W.resize(this.getHeight(), this.getWidth());\n\n    this.W.setRandom(Math.sqrt(6 / this.getWidth()));\n\n    this.b.resize(this.getHeight(), 1).setZeros().add(1.0);\n\n    this.gW.resize(this.getHeight(), this.getWidth());\n    this.gW.setZeros();\n\n    this.gb.resize(this.getHeight(), 1);\n    this.gb.setZeros();\n\n    this.sW.resize(this.getHeight(), this.getWidth());\n    this.sW.setZeros();\n\n    this.sb.resize(this.getHeight(), 1);\n    this.sb.setZeros();\n\n    this.vW.resize(this.getHeight(), this.getWidth());\n    this.vW.setZeros();\n\n    this.vb.resize(this.getHeight(), 1);\n    this.vb.setZeros();\n\n    this.dW.resize(this.getHeight(), this.getWidth());\n    this.dW.setZeros();\n\n    this.db.resize(this.getHeight(), 1);\n    this.db.setZeros();\n  }\n\n  forward(input: CalcMatrix2D): CalcMatrix2D {\n    this.Z = input.forwardPropagation(this.W, this.b);\n    this.A = this.activation(this.Z);\n    return this.A;\n  }\n  is1D(): boolean {\n    return true;\n  }\n\n  is3D(): boolean {\n    return false;\n  }\n\n  transition(previousLayer: Layers): AbstractLayer1D {\n    if (previousLayer.is1D()) {\n      this.setWidth(previousLayer.getSize() as number);\n    } else if (previousLayer.is3D()) {\n      this.setWidth(previousLayer.getOutputWidth() * previousLayer.getOutputHeight() * previousLayer.getOutputDepth());\n    }\n\n    super.transition(previousLayer);\n\n    return this;\n  }\n\n  setSize(value: number): AbstractLayer1D {\n    this.setHeight(value as number);\n\n    return this;\n  }\n\n  getSize(): number {\n    return this.height;\n  }\n\n  getOutputWidth(): number {\n    return this.width;\n  }\n\n  getOutputHeight(): number {\n    return this.height;\n  }\n\n  getOutputDepth(): number {\n    return 1;\n  }\n\n  penalty(): CalcScalar {\n    return this.W.pow(2).sum();\n  }\n}\n\nexport { AbstractLayer1D };\n","import { CalcMatrix2D } from \"../../Math\";\nimport { Dimension, Layers } from \"../../types\";\nimport { AbstractBackPropagation } from \"./Backpropagation/AbstractBackpropagation\";\n\nabstract class AbstractLayer {\n  protected width = 0;\n  protected height = 0;\n  protected depth = 0;\n  public previousLayer: Layers | null = null;\n  protected backPropagation: AbstractBackPropagation | null = null;\n\n  setBackPropagation(backPropagation: AbstractBackPropagation): Layers {\n    this.backPropagation = backPropagation;\n    return this;\n  }\n\n  getBackPropagation(): AbstractBackPropagation | null {\n    return this.backPropagation;\n  }\n\n  setWidth(value: number): Layers {\n    this.width = value;\n    return this;\n  }\n\n  getWidth(): number {\n    return this.width;\n  }\n\n  setHeight(value: number): Layers {\n    this.height = value;\n    return this;\n  }\n\n  getHeight(): number {\n    return this.height;\n  }\n\n  setDepth(value: number): Layers {\n    this.depth = value;\n    return this;\n  }\n\n  getDepth(): number {\n    return this.depth;\n  }\n\n  abstract getOutputWidth(): number;\n\n  abstract getOutputHeight(): number;\n\n  abstract getOutputDepth(): number;\n\n  abstract configure(): void;\n\n  abstract is1D(): boolean;\n\n  abstract is3D(): boolean;\n\n  transition(previousLayer: Layers): Layers {\n    this.previousLayer = previousLayer;\n    return this;\n  }\n\n  abstract getSize(): Dimension | number;\n\n  abstract activation(value: CalcMatrix2D): CalcMatrix2D;\n\n  abstract getType(): string;\n\n  abstract derivative(delta: CalcMatrix2D): CalcMatrix2D;\n\n  abstract penalty(): number;\n}\n\nexport { AbstractLayer };\n","import { AbstractLayer1D } from \"./AbstractLayer1D\";\nimport { CalcMatrix2D } from \"../../Math\";\n\nclass LSTM extends AbstractLayer1D {\n    /*private readonly activation = new Sigmoid();\n\n    // Gates\n    public Wf: CalcMatrix2D; // Forget gate weights\n    public Wi: CalcMatrix2D; // Input gate weights\n    public Wc: CalcMatrix2D; // Candidate gate weights\n    public Wo: CalcMatrix2D; // Output gate weights\n\n    public bf: CalcMatrix2D; // Forget gate biases\n    public bi: CalcMatrix2D; // Input gate biases\n    public bc: CalcMatrix2D; // Candidate gate biases\n    public bo: CalcMatrix2D; // Output gate biases\n\n    // Cell state\n    public C: CalcMatrix2D;\n    public H: CalcMatrix2D;\n\n    // For backpropagation\n    public combined: CalcMatrix2D;\n    public ft: CalcMatrix2D;\n    public it: CalcMatrix2D;\n    public cct: CalcMatrix2D;\n    public ot: CalcMatrix2D;\n    public C_prev: CalcMatrix2D;\n    public H_prev: CalcMatrix2D;\n\n\n    constructor() {\n        super();\n        this.Wf = new CalcMatrix2D();\n        this.Wi = new CalcMatrix2D();\n        this.Wc = new CalcMatrix2D();\n        this.Wo = new CalcMatrix2D();\n        this.bf = new CalcMatrix2D();\n        this.bi = new CalcMatrix2D();\n        this.bc = new CalcMatrix2D();\n        this.bo = new CalcMatrix2D();\n        this.C = new CalcMatrix2D();\n        this.H = new CalcMatrix2D();\n    }\n\n    configure(): void {\n        super.configure();\n        const hiddenSize = this.getHeight();\n        const inputSize = this.getWidth();\n\n        this.Wf.resize(hiddenSize, hiddenSize + inputSize).setRandom(Math.sqrt(6 / (hiddenSize + inputSize)));\n        this.Wi.resize(hiddenSize, hiddenSize + inputSize).setRandom(Math.sqrt(6 / (hiddenSize + inputSize)));\n        this.Wc.resize(hiddenSize, hiddenSize + inputSize).setRandom(Math.sqrt(6 / (hiddenSize + inputSize)));\n        this.Wo.resize(hiddenSize, hiddenSize + inputSize).setRandom(Math.sqrt(6 / (hiddenSize + inputSize)));\n\n        this.bf.resize(hiddenSize, 1).setZeros();\n        this.bi.resize(hiddenSize, 1).setZeros();\n        this.bc.resize(hiddenSize, 1).setZeros();\n        this.bo.resize(hiddenSize, 1).setZeros();\n\n        this.C.resize(hiddenSize, 1).setZeros();\n        this.H.resize(hiddenSize, 1).setZeros();\n    }\n\n    forward(input: CalcMatrix2D): CalcMatrix2D {\n        this.C_prev = this.C.copy();\n        this.H_prev = this.H.copy();\n\n        this.combined = this.H_prev.concat(input, 'vertical');\n\n        this.ft = this.activation.forward(this.Wf.multiply(this.combined).add(this.bf));\n        this.it = this.activation.forward(this.Wi.multiply(this.combined).add(this.bi));\n        this.cct = this.activation.forward(this.Wc.multiply(this.combined).add(this.bc));\n        this.ot = this.activation.forward(this.Wo.multiply(this.combined).add(this.bo));\n\n        this.C = this.ft.elementMultiply(this.C_prev).add(this.it.elementMultiply(this.cct));\n        this.H = this.ot.elementMultiply(this.activation.forward(this.C));\n\n        this.A = this.H;\n        return this.A;\n    }\n*/\n}\n\nexport { LSTM };\n","import { AbstractBackPropagation } from \"./AbstractBackpropagation\";\nimport { LSTM } from \"../LSTM\";\nimport { CalcMatrix2D } from \"../../../Math\";\n//import { Sigmoid } from \"../../Activation\";\n\nclass BackpropagationLSTM extends AbstractBackPropagation {\n    /*private readonly activation = new Sigmoid();\n\n    constructor(layer: LSTM, private dH: CalcMatrix2D, private dC: CalcMatrix2D) {\n        super(layer, null);\n    }\n\n    backward(dZ: CalcMatrix2D): void {\n        const layer = this.layer as LSTM;\n\n        const dH_next = dZ.copy();\n        const dC_next = this.dC.copy();\n\n        const dH = dH_next.add(this.dH);\n        const dC = dC_next.add(dH.elementMultiply(layer.ot).elementMultiply(this.activation.backward(layer.C)));\n\n        const dot = dH.elementMultiply(this.activation.forward(layer.C)).elementMultiply(this.activation.backward(layer.ot));\n        const dcct = dC.elementMultiply(layer.it).elementMultiply(this.activation.backward(layer.cct));\n        const dit = dC.elementMultiply(layer.cct).elementMultiply(this.activation.backward(layer.it));\n        const dft = dC.elementMultiply(layer.C_prev).elementMultiply(this.activation.backward(layer.ft));\n\n        const dWf = dft.multiply(layer.combined.transpose());\n        const dWi = dit.multiply(layer.combined.transpose());\n        const dWc = dcct.multiply(layer.combined.transpose());\n        const dWo = dot.multiply(layer.combined.transpose());\n\n        const dbf = dft;\n        const dbi = dit;\n        const dbc = dcct;\n        const dbo = dot;\n\n        const dCombined = layer.Wf.transpose().multiply(dft)\n            .add(layer.Wi.transpose().multiply(dit))\n            .add(layer.Wc.transpose().multiply(dcct))\n            .add(layer.Wo.transpose().multiply(dot));\n\n        const dH_prev = dCombined.slice(0, layer.H_prev.rows, 0, layer.H_prev.cols);\n        const dX = dCombined.slice(layer.H_prev.rows, dCombined.rows, 0, dCombined.cols);\n\n        this.dC = dC.elementMultiply(layer.ft);\n        this.dH = dH_prev;\n\n        // Update weights and biases\n        layer.Wf = layer.Wf.subtract(dWf.multiply(this.learningRate));\n        layer.Wi = layer.Wi.subtract(dWi.multiply(this.learningRate));\n        layer.Wc = layer.Wc.subtract(dWc.multiply(this.learningRate));\n        layer.Wo = layer.Wo.subtract(dWo.multiply(this.learningRate));\n\n        layer.bf = layer.bf.subtract(dbf.multiply(this.learningRate));\n        layer.bi = layer.bi.subtract(dbi.multiply(this.learningRate));\n        layer.bc = layer.bc.subtract(dbc.multiply(this.learningRate));\n        layer.bo = layer.bo.subtract(dbo.multiply(this.learningRate));\n\n        this.dZ = dX;\n    }*/\n}\n\nexport { BackpropagationLSTM };\n","import { Layers } from \"../../../types\";\nimport { Backpropagation1Dto1D } from \"./Backpropagation1Dto1D\";\nimport { AbstractBackPropagation } from \"./AbstractBackpropagation\";\nimport { LSTM } from \"../LSTM\";\nimport { BackpropagationLSTM } from \"./BackpropagationLSTM\";\nimport { CalcMatrix2D } from \"../../../Math\";\n\nexport class BackpropagationFactory {\n  static create(previousLayer: Layers, layer: Layers): AbstractBackPropagation | null {\n    if (layer instanceof LSTM) {\n      const dH = new CalcMatrix2D(layer.getHeight(), 1).setZeros();\n      const dC = new CalcMatrix2D(layer.getHeight(), 1).setZeros();\n      return new BackpropagationLSTM(layer, dH, dC);\n    }\n\n    if (previousLayer) {\n      if (previousLayer.is1D()) {\n        return new Backpropagation1Dto1D(layer, previousLayer);\n      }\n    } else {\n      if (layer.is1D()) {\n        return new Backpropagation1Dto1D(layer, previousLayer);\n      }\n    }\n\n    return null;\n  }\n}\n","import { Dimension, Layers } from \"../../types\";\nimport { Network, Networks } from \"../index\";\nimport { BackpropagationFactory } from \"../Layer/Backpropagation/BackpropagationFactory\";\n\nabstract class AbstractNetworkBuilder {\n  protected dimensions: Dimension | null = null;\n  protected lastLayer: Layers | null = null;\n  protected network: Networks | null = null;\n\n  constructor(dimension: Dimension) {\n    this.dimensions = dimension;\n    this.network = new Network(this.dimensions);\n  }\n\n  createLayer(layerClass: Layers, callback: (layer: Layers) => void | null = null): AbstractNetworkBuilder {\n    const layer: Layers = new layerClass();\n\n    if (typeof callback === \"function\") {\n      callback(layer);\n    }\n\n    if (this.lastLayer === null) {\n      this.firstLayerTransition(layer);\n    } else {\n      layer.transition(this.lastLayer);\n    }\n\n    layer.configure();\n    layer.setBackPropagation(BackpropagationFactory.create(this.lastLayer, layer));\n\n    this.network.addLayer(layer);\n    this.lastLayer = layer;\n\n    return this;\n  }\n\n  getNetwork(): Networks | null {\n    return this.network;\n  }\n\n  abstract firstLayerTransition(layer: Layers): void;\n}\n\nexport { AbstractNetworkBuilder };\n","import { CalcMatrix2D } from \"../../Math\";\nimport { LayerType } from \"../../types\";\nimport { AbstractLayer1D } from \"./AbstractLayer1D\";\n\nclass SoftmaxLayer extends AbstractLayer1D {\n  activation(m: CalcMatrix2D): CalcMatrix2D {\n    return m.softmax();\n  }\n\n  getType(): LayerType {\n    return LayerType.softmax;\n  }\n\n  derivative(delta: CalcMatrix2D): CalcMatrix2D {\n    // When CrossEntropyCost is used with Softmax, the cost function's derivative\n    // already computes dZ (A - Y). We should just pass it through.\n    return delta;\n  }\n}\n\nexport { SoftmaxLayer };\n","import { CalcMatrix2D } from \"../../Math\";\nimport { LayerType } from \"../../types\";\nimport { AbstractLayer1D } from \"./AbstractLayer1D\";\n\nclass LogisticLayer extends AbstractLayer1D {\n  activation(m: CalcMatrix2D): CalcMatrix2D {\n    return m.logisticForwardPropagation();\n  }\n\n  getType(): LayerType {\n    return LayerType.logistic;\n  }\n\n  derivative(delta: CalcMatrix2D): CalcMatrix2D {\n    return delta.logisticBackwardPropagation();\n  }\n}\n\nexport { LogisticLayer };\n","import { CalcMatrix2D } from \"../../Math\";\nimport { LayerType } from \"../../types\";\nimport { AbstractLayer1D } from \"./AbstractLayer1D\";\n\nclass TanhLayer extends AbstractLayer1D {\n  activation(m: CalcMatrix2D): CalcMatrix2D {\n    return m.tanh();\n  }\n\n  getType(): LayerType {\n    return LayerType.tanh;\n  }\n\n  derivative(sigma: CalcMatrix2D): CalcMatrix2D {\n    return sigma.tanhDerivative();\n  }\n}\n\nexport { TanhLayer };\n","import { CalcMatrix2D } from \"../../Math\";\nimport { LayerType } from \"../../types\";\nimport { AbstractLayer1D } from \"./AbstractLayer1D\";\n\nclass ReluLayer extends AbstractLayer1D {\n  private readonly alpha = 0.01;\n\n  activation(m: CalcMatrix2D): CalcMatrix2D {\n    return m.calcSync((calc) => {\n      return calc.leakyRelu(this.alpha);\n    })\n  }\n\n  getType(): LayerType {\n    return LayerType.relu;\n  }\n\n  derivative(delta: CalcMatrix2D) {\n    return delta.calcSync((calc) => {\n      return calc.leakyReluBackpropagation(this.alpha);\n    })\n  }\n}\n\nexport { ReluLayer };\n","import { AbstractNetworkBuilder } from \"./AbstractNetworkBuilder\";\nimport { Layers } from \"../../types\";\nimport { Network } from \"../index\";\nimport * as fs from \"fs\";\nimport { LogisticLayer, ReluLayer, SoftmaxLayer, TanhLayer } from \"../Layer\";\nimport { CalcMatrix2D } from \"../../Math\";\nimport { JSONLayerData } from \"./types\";\n\nclass NetworkBuilder1D extends AbstractNetworkBuilder {\n  firstLayerTransition(layer: Layers): void {\n    layer.setWidth(this.dimensions[0]);\n  }\n\n  static fromJSON(jsonPath: string): Promise<Network> {\n    return new Promise((resolve, reject) => {\n      fs.readFile(jsonPath, (err, data) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n        const json = JSON.parse(data.toString());\n\n        const builder = new NetworkBuilder1D(json[\"dimensions\"]);\n\n        json[\"layers\"].forEach((layerData: JSONLayerData) => {\n          let layerClass = null;\n\n          if (layerData[\"type\"] === \"logistic\") {\n            layerClass = LogisticLayer;\n          } else if (layerData[\"type\"] === \"softmax\") {\n            layerClass = SoftmaxLayer;\n          } else if (layerData[\"type\"] === \"relu\") {\n            layerClass = ReluLayer;\n          } else if (layerData[\"type\"] === \"tanh\") {\n            layerClass = TanhLayer;\n          }\n\n          builder.createLayer(layerClass, (layer) => {\n            // @ts-ignore\n            layer.setSize(layerData[\"size\"] as number);\n          });\n        });\n\n        const network = builder.getNetwork();\n\n        network.getLayers().forEach((layer, i) => {\n          layer.W = new CalcMatrix2D(\n            json[\"layers\"][i][\"weights\"][\"W\"].rows,\n            json[\"layers\"][i][\"weights\"][\"W\"].cols\n          ).allocate().set(json[\"layers\"][i][\"weights\"][\"W\"].data);\n          layer.b = new CalcMatrix2D(\n            json[\"layers\"][i][\"weights\"][\"b\"].rows,\n            json[\"layers\"][i][\"weights\"][\"b\"].cols\n          ).allocate().set(json[\"layers\"][i][\"weights\"][\"b\"].data);\n        });\n\n        resolve(network);\n      });\n    });\n  }\n}\n\nexport { NetworkBuilder1D };\n","import { Layers } from \"../../../types\";\n\nexport abstract class AbstractOptimizer {\n  protected batchSize = 0;\n  protected t = 0;\n  protected learningRate = 0;\n\n  setBatchSize(batchSize: number): AbstractOptimizer {\n    this.batchSize = batchSize;\n    return this;\n  }\n\n  setT(t: number): AbstractOptimizer {\n    this.t = t;\n    return this;\n  }\n\n  setLearningRate(learningRate: number): AbstractOptimizer {\n    this.learningRate = learningRate;\n    return this;\n  }\n\n  abstract optimize(layer: Layers): void;\n}\n","import { AbstractOptimizer } from \"./AbstractOptimizer\";\nimport { Layers } from \"../../../types\";\nimport { CalcMatrix2D } from \"../../../Math/\";\n\nexport class OptimizerAdam extends AbstractOptimizer {\n  private readonly beta1 = 0.9;\n  private readonly beta2 = 0.999;\n  private readonly epsilon = 1e-8;\n\n  optimize(layer: Layers): void {\n    const { W, b, gW, gb, vW, vb, sW, sb } = layer;\n    const { learningRate, beta1, beta2, epsilon, t } = this;\n\n    const updatedMatrices = CalcMatrix2D.runAdamOptimizer(\n      W, b, gW, gb, vW, vb, sW, sb,\n      learningRate, beta1, beta2, epsilon, t\n    );\n\n\n    layer.W.replace(updatedMatrices.W);\n    layer.b.replace(updatedMatrices.b);\n    layer.vW.replace(updatedMatrices.vW);\n    layer.vb.replace(updatedMatrices.vb);\n    layer.sW.replace(updatedMatrices.sW);\n    layer.sb.replace(updatedMatrices.sb);\n  }\n}\n","import { AbstractOptimizer } from \"./AbstractOptimizer\";\nimport { Layers } from \"../../../types\";\n\nexport class OptimizerGradientDescent extends AbstractOptimizer {\n  optimize(layer: Layers): void {\n    this.gradientDescent(layer, this.learningRate);\n  }\n\n  gradientDescent(layer: Layers, learningRate: number): void {\n    layer.W = layer.W.subtract(layer.gW.multiply(learningRate));\n    layer.b = layer.b.subtract(layer.gb.multiply(learningRate));\n  }\n}\n","import { AbstractOptimizer } from \"./AbstractOptimizer\";\nimport { Layers } from \"../../../types\";\n\nexport class OptimizerAdagrad extends AbstractOptimizer {\n  private epsilon = 1e-8;\n\n  optimize(layer: Layers): void {\n    this.adagrad(layer, this.learningRate);\n  }\n\n  adagrad(layer: Layers, learningRate: number): void {\n    layer.dW = layer.dW.add(layer.gW.pow(2));\n    layer.W = layer.W.subtract(layer.gW.multiply(learningRate).divide(layer.dW.add(this.epsilon).sqrt()));\n\n    layer.db = layer.db.add(layer.gb.pow(2));\n    layer.b = layer.b.subtract(layer.gb.multiply(learningRate).divide(layer.db.add(this.epsilon).sqrt()));\n  }\n}\n","import { AbstractOptimizer } from \"./AbstractOptimizer\";\nimport { Layers } from \"../../../types\";\n\nexport class OptimizerMomentum extends AbstractOptimizer {\n  protected beta = 0.9;\n\n  optimize(layer: Layers): void {\n    this.momentum(layer, this.learningRate);\n  }\n\n  setBeta(beta: number): OptimizerMomentum {\n    this.beta = beta;\n    return this;\n  }\n\n  momentum(layer: Layers, learningRate: number): void {\n    layer.vW = layer.gW.multiply(this.beta).add(layer.gW.multiply(1 - this.beta));\n    layer.vb = layer.gb.multiply(this.beta).add(layer.gb.multiply(1 - this.beta));\n\n    layer.W = layer.W.subtract(layer.vW.multiply(learningRate));\n    layer.b = layer.b.subtract(layer.vb.multiply(learningRate));\n  }\n}\n","import { AbstractOptimizer } from \"./AbstractOptimizer\";\nimport { Layers } from \"../../../types\";\n\nexport class OptimizerRMSProp extends AbstractOptimizer {\n  protected alpha = 1e-3;\n  protected beta = 0.9;\n\n  setBeta(beta: number): OptimizerRMSProp {\n    this.beta = beta;\n    return this;\n  }\n\n  setAlpha(alpha: number): OptimizerRMSProp {\n    this.alpha = alpha;\n    return this;\n  }\n\n  optimize(layer: Layers): void {\n    this.rmsprop(layer, this.learningRate, this.alpha, this.beta);\n  }\n\n  rmsprop(layer: Layers, learningRate: number, alpha: number, beta: number): void {\n    layer.sW = layer.sW.multiply(beta).add(layer.gW.pow(2).multiply(1 - beta));\n    layer.sb = layer.sb.multiply(beta).add(layer.gb.pow(2).multiply(1 - beta));\n\n    layer.W = layer.W.subtract(layer.gW.multiply(alpha).divide(layer.sW.sqrt().add(1e-8)));\n    layer.b = layer.b.subtract(layer.gb.multiply(alpha).divide(layer.sb.sqrt().add(1e-8)));\n  }\n}\n","import { BatchTrainer } from \"./BatchTrainer\";\n\nexport { BatchTrainer };\nexport default { BatchTrainer };\n","import { AbstractTrainer } from \"./AbstractTrainer\";\nimport { Dataset } from \"../../Dataset\";\nimport { round } from \"../../Math\";\nimport { AbstractOptimizer } from \"./Optimizer/AbstractOptimizer\";\nimport { Network } from \"../index\";\nimport { AbstractCost } from \"./Cost/AbstractCost\";\n\nexport class BatchTrainer extends AbstractTrainer {\n  private _batchSize: number = 100;\n  constructor(network: Network, optimizer: AbstractOptimizer, costFunction: AbstractCost) {\n    super(network, optimizer, costFunction);\n  }\n\n  public setBatchSize(size: number) {\n    this._batchSize = size;\n    return this;\n  }\n\n  train(inputDataset: Dataset, outputDataset: Dataset): AbstractTrainer {\n    const numberOfExamples = inputDataset.getNumberOfExamples();\n    let t = 0;\n\n    this.optimizer.setBatchSize(this._batchSize);\n    this.optimizer.setLearningRate(this.learningRate);\n\n    for (let i = 0; i < this.iterations; i += 1) {\n      const startTime = new Date().getTime();\n\n      for (let offset = 0; offset < numberOfExamples; offset += this._batchSize) {\n        console.log(offset, this._batchSize);\n        const input = inputDataset.getBatch(offset, this._batchSize);\n        const output = outputDataset.getBatch(offset, this._batchSize);\n\n        const predictions = this.network.forward(input);\n        const sigma = this.costFunction.derivative(output, predictions, this.network.getLastLayer());\n\n        this.network.backward(input, this.regularization, sigma);\n\n        this.optimizer.setT(++t);\n\n        this.network.getLayers().forEach((layer) => {\n          this.optimizer.optimize(layer);\n        })\n\n        if (this.verbose && (i + 1) % this.verboseStep === 0) {\n          const currentResult = this.cost(predictions, output);\n          const endTime = new Date().getTime();\n\n          console.log(\n            `Iteration: ${i + 1} | Cost: ${round(currentResult.cost, 5)} | Accuracy: ${round(\n              currentResult.accuracy,\n              2\n            )}% | Time: ${(endTime - startTime) / 1000} s.`\n          );\n        }\n      }\n\n      this.stepCallback({\n        iteration: i,\n      });\n    }\n\n    return this;\n  }\n}\n","import { Network } from \"../index\";\nimport { AbstractOptimizer } from \"./Optimizer/AbstractOptimizer\";\nimport { Dataset } from \"../../Dataset\";\nimport { CalcMatrix2D } from \"../../Math\";\nimport { AbstractCost } from \"./Cost/AbstractCost\";\n\nexport interface CostResult {\n  cost: number;\n  accuracy: number;\n}\n\nexport interface StepCallbackParameters {\n  iteration: number;\n}\n\nexport abstract class AbstractTrainer {\n  network: Network;\n  optimizer: AbstractOptimizer;\n  costFunction: AbstractCost;\n  regularization = 1e-4;\n  iterations = 1000;\n  learningRate = 0.001;\n  verbose = true;\n  verboseStep = 1;\n  stepCallback = (data: StepCallbackParameters): void => undefined;\n\n  constructor(network: Network, optimizer: AbstractOptimizer, costFunction: AbstractCost) {\n    this.network = network;\n    this.optimizer = optimizer;\n    this.costFunction = costFunction;\n  }\n\n  abstract train(inputDataset: Dataset, outputDataset: Dataset): AbstractTrainer;\n\n  setRegularization(regularization: number): AbstractTrainer {\n    this.regularization = regularization;\n    return this;\n  }\n\n  setIterations(iterations: number): AbstractTrainer {\n    this.iterations = iterations;\n    return this;\n  }\n\n  setLearningRate(learningRate: number): AbstractTrainer {\n    this.learningRate = learningRate;\n    return this;\n  }\n\n  setVerbose(verbose: boolean): AbstractTrainer {\n    this.verbose = verbose;\n    return this;\n  }\n\n  setVerboseStep(verboseStep: number): AbstractTrainer {\n    this.verboseStep = verboseStep;\n    return this;\n  }\n\n  setStepCallback(stepCallback: (data: StepCallbackParameters) => void): AbstractTrainer {\n    this.stepCallback = stepCallback;\n    return this;\n  }\n\n  cost(predictions: CalcMatrix2D, correctOutput: CalcMatrix2D): CostResult {\n    const miniBatchSize = correctOutput.cols();\n    let cost = this.costFunction.loss(correctOutput, predictions);\n\n    if (this.regularization > 0) {\n      let penalty = 0;\n      this.network.getLayers().forEach(layer => {\n        penalty += layer.penalty().get()[0];\n      });\n      cost += (this.regularization / (2 * miniBatchSize)) * penalty;\n    }\n\n    let correctPredictions = 0;\n    for (let i = 0; i < miniBatchSize; i += 1) {\n      const predictionCol = predictions.col(i);\n      const outputCol = correctOutput.col(i);\n      const predictionIndex = predictionCol.maxCoeff();\n      const outputIndex = outputCol.maxCoeff();\n\n      if (i === 0) {\n        console.log(\"DEBUG ACCURACY:\");\n        console.log(\"  Prediction Col:\", predictionCol.get());\n        console.log(\"  Predicted Index:\", predictionIndex.get()[0]);\n        console.log(\"  Correct Col:\", outputCol.get());\n        console.log(\"  Correct Index:\", outputIndex.get()[0]);\n      }\n\n      if (predictionIndex.get()[0] === outputIndex.get()[0]) {\n        correctPredictions++;\n      }\n    }\n\n    const accuracy = (correctPredictions / miniBatchSize) * 100.0;\n\n    return {\n      cost,\n      accuracy,\n    };\n  }\n}\n","import { CalcMatrix2D } from \"../../../Math\";\n\nexport abstract class AbstractCost {\n  abstract loss(correctOutput: CalcMatrix2D, predictions: CalcMatrix2D): number;\n  abstract derivative(\n    correctOutput: CalcMatrix2D,\n    predictions: CalcMatrix2D,\n    activationDerivative: CalcMatrix2D,\n  ): CalcMatrix2D;\n}\n","import { AbstractCost } from \"./AbstractCost\";\nimport { CalcMatrix2D } from \"../../../Math\";\nimport { AbstractLayer } from \"../../Layer/AbstractLayer\";\n\nexport class MeanSquaredErrorCost extends AbstractCost {\n  loss(correctOutput: CalcMatrix2D, predictions: CalcMatrix2D): number {\n    const miniBatchSize = correctOutput.cols();\n    const error = predictions.subtract(correctOutput);\n    const cost = error.pow(2).sum().get()[0];\n    return cost / (2 * miniBatchSize);\n  }\n\n  derivative(correctOutput: CalcMatrix2D, predictions: CalcMatrix2D, lastLayer: AbstractLayer): CalcMatrix2D {\n    return predictions.subtract(correctOutput);\n  }\n}\n","import { AbstractCost } from \"./AbstractCost\";\nimport { CalcMatrix2D } from \"../../../Math\";\nimport { AbstractLayer } from \"../../Layer\";\nimport { LayerType} from \"../../../types\";\n\nexport class CrossEntropyCost extends AbstractCost {\n  private readonly epsilon = 1e-8;\n\n  loss(correctOutput: CalcMatrix2D, predictions: CalcMatrix2D): number {\n    return new CalcMatrix2D().crossEntropyLoss(correctOutput, predictions, this.epsilon);\n  }\n\n  derivative(correctOutput: CalcMatrix2D, predictions: CalcMatrix2D, lastLayer: AbstractLayer): CalcMatrix2D {\n    if (lastLayer.getType() === LayerType.softmax) {\n      // For Softmax, we compute dZ directly\n      return predictions.subtract(correctOutput);\n    }\n\n    // For other layers (like Sigmoid), we calculate dA\n    return new CalcMatrix2D().crossEntropyDerivative(correctOutput, predictions, this.epsilon);\n  }\n}\n","import { CalcMatrix2D } from \"../Math\";\n\nexport class Dataset {\n  public data: CalcMatrix2D | null = null;\n\n  constructor(data: CalcMatrix2D | null = null) {\n    this.data = data;\n  }\n\n  static fromMatrix(m: CalcMatrix2D): Dataset {\n    return new Dataset(m);\n  }\n\n  exampleAt(index: number): CalcMatrix2D {\n    return this.data.col(index);\n  }\n\n  getNumberOfExamples(): number {\n    return this.data.cols();\n  }\n\n  getExampleSize(): number {\n    return this.data.rows();\n  }\n\n  getBatch(offset: number, batchSize: number): CalcMatrix2D {\n    return this.data.block(0, offset, this.getExampleSize(), batchSize);\n  }\n}\n","import { Dataset } from \"../index\";\nimport { AbstractSource } from \"./Source/AbstractSource\";\n\ninterface ParametersInterface {\n  transpose?: boolean;\n}\n\nexport class DatasetBuilder {\n  static fromSource(sourcePromise: Promise<AbstractSource>, params: ParametersInterface = {}): Promise<Dataset> {\n    return new Promise((resolve) => {\n      sourcePromise.then((source) => {\n        const dataset = source.parse();\n        resolve(dataset);\n      });\n    });\n  }\n}\n","import { CalcMatrix2D } from \"../Math/CalcMatrix2D\";\n\nexport class DatasetVocabulary {\n  /*public vocabularySize = 0;\npublic dataSize = 0;\npublic data: string = \"\";\npublic chars: string[];\n\nconstructor(str: string) {\n  this.data = str.toLowerCase();\n  const chars = [...new Set(this.data.split(\"\").sort())];\n\n  this.chars = chars;\n  this.dataSize = this.data.length;\n  this.vocabularySize = chars.length;\n}\n\ngetExamples(): string[] {\n  return this.data\n    .replace(/\\n+/, \"\\n\")\n    .split(\"\\n\")\n    .map((example: string) => {\n      return example + \"\\n\";\n    });\n}\n\ngetVocabularySize(): number {\n  return this.vocabularySize;\n}\n\ngetCharsLength(): number {\n  return this.chars.length;\n}\n\ngetCharIndices(): Object {\n  const result = {};\n  this.chars.forEach((char, i) => {\n    result[char] = i;\n  });\n  return result;\n}\n\nbuildData(tx: number = 40, stride: number = 3) {\n  const X = [];\n  const Y = [];\n\n  for (let i = 0; i < this.data.length - tx; i += stride) {\n    X.push(this.data.substr(i, tx));\n    Y.push(this.data[i + tx]);\n  }\n\n  return [X, Y];\n}\n\nvectorization(X: string[], Y: string[], nx: number = 40): [Matrix[], Matrix] {\n  const m = X.length;\n  const x = new Array(m);\n  const chars = this.getCharIndices();\n  const y = new Matrix(m, this.chars.length).setZeros();\n  let xIndex = 0;\n  let rowIndex = 0;\n\n  X.forEach((sentence: string, _m) => {\n    x[_m] = new Matrix(sentence.length, this.chars.length).setZeros();\n    sentence.split(\"\").forEach((char, t) => {\n      x[_m].data[t][chars[char]] = 1;\n      rowIndex++;\n    });\n    xIndex++;\n    rowIndex = 0;\n\n    y.data[_m][chars[Y[_m]]] = 1;\n  });\n\n  return [x, y];\n}\n\ngetChars(): string[] {\n  return this.chars;\n}\n\ngetExampleX(exampleIndex: number): Matrix {\n  const example = this.getExamples()[exampleIndex];\n  const data = [];\n  example.split(\"\").forEach((ch, row) => {\n    data[row] = [this.getCharIndices()[ch]];\n  });\n  return Matrix.from(data);\n}\n\ngetExampleY(exampleIndex: number): Matrix {\n  const example = this.getExamples()[exampleIndex];\n  const data = [];\n  example.split(\"\").forEach((ch, row) => {\n    data[row] = [this.getCharIndices()[ch]];\n  });\n  return Matrix.from(data);\n}*/\n}\n","import { AbstractVocabularySource } from \"./VocabularySource/AbstractVocabularySource\";\nimport { DatasetVocabulary } from \"../DatasetVocabulary\";\n\nexport class DatasetVocabularyBuilder {\n  static fromSource(sourcePromise: Promise<AbstractVocabularySource>): Promise<DatasetVocabulary> {\n    return new Promise((resolve) => {\n      sourcePromise.then((source) => {\n        const str = source.parse();\n        resolve(new DatasetVocabulary(str));\n      });\n    });\n  }\n}\n","import { Dataset } from \"../../Dataset\";\n\nexport abstract class AbstractSource {\n  abstract parse(): Dataset;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"csvtojson\");","import { AbstractSource } from \"./AbstractSource\";\nimport { CalcMatrix2D } from \"../../../Math\";\nimport * as csvtojson from \"csvtojson\";\nimport { Dataset } from \"../../Dataset\";\n\nexport class SourceCSV extends AbstractSource {\n  protected data: number[][] | string[][] | null = null;\n\n  constructor(data: number[][] | string[][]) {\n    super();\n    this.data = data;\n  }\n\n  static fromLocalFile(path: string): Promise<SourceCSV> {\n    return new Promise((resolve) => {\n      csvtojson({\n        noheader: true,\n        trim: true,\n        output: \"csv\",\n      })\n        .fromFile(path)\n        .then((arr) => {\n          resolve(new SourceCSV(arr));\n        });\n    });\n  }\n\n  parse(): Dataset {\n    const numberOfExamples = this.data.length;\n    const exampleSize = this.data[0]?.length;\n\n    let data = [];\n    for (let i = 0; i < numberOfExamples; i += 1) {\n      this.data[i].forEach((value) => {\n        data.push(Number(value))\n      });\n    }\n    return Dataset.fromMatrix(new CalcMatrix2D(exampleSize, numberOfExamples).allocate().set(data));\n  }\n}\n","import * as fs from \"fs\";\nimport { AbstractVocabularySource } from \"./AbstractVocabularySource\";\n\nexport class TextFile extends AbstractVocabularySource {\n  protected data: string = \"\";\n\n  constructor(data: string) {\n    super();\n    this.data = data;\n  }\n\n  static fromLocalFile(path: string): Promise<TextFile> {\n    return new Promise((resolve, reject) => {\n      fs.readFile(path, (err, buffer) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n\n        resolve(new TextFile(buffer.toString(\"utf-8\")));\n      });\n    });\n  }\n\n  parse(): string {\n    return this.data;\n  }\n}\n","export abstract class AbstractVocabularySource {\n  abstract parse(): string;\n}\n","import { Dataset } from \"../Dataset\";\n\nexport abstract class AbstractModifier {\n  protected dataset: Dataset = null;\n\n  constructor(dataset: Dataset) {\n    this.dataset = dataset;\n  }\n\n  abstract apply(dataset: Dataset): Dataset | Array<Dataset>;\n}\n","import { AbstractModifier } from \"./AbstractModifier\";\nimport { Dataset } from \"../Dataset\";\n\nexport class MinMaxScalingDatasetModifier extends AbstractModifier {\n  apply(dataset: Dataset): Dataset {\n    dataset.data.replace(dataset.data.minMax());\n    return dataset;\n  }\n}\n","import { AbstractModifier } from \"./AbstractModifier\";\nimport { Dataset } from \"../Dataset\";\n\nexport class MissingDataDatasetModifier extends AbstractModifier {\n  protected modificationType = \"mean\";\n\n  apply(dataset: Dataset): Dataset {\n    const rowsToFill = [];\n    let correctExamplesCount = 0;\n    let sum = 0;\n    let valueToFill = 0;\n\n    for (let exampleIndex = 0; exampleIndex < dataset.getNumberOfExamples(); exampleIndex += 1) {\n      const example = dataset.exampleAt(exampleIndex);\n      for (let row = 0; row < dataset.getExampleSize(); row += 1) {\n        if (isNaN(example.data[row][0]) || typeof example.data[row][0] !== \"number\") {\n          rowsToFill.push({\n            row,\n            col: example,\n          });\n        } else {\n          sum += example.data[row][0];\n          correctExamplesCount++;\n        }\n      }\n    }\n\n    if (this.modificationType === \"mean\") {\n      valueToFill = sum / correctExamplesCount;\n    }\n\n    rowsToFill.forEach(({ row, col }) => {\n      dataset.data.data[row][col] = valueToFill;\n    });\n\n    return dataset;\n  }\n\n  setModificationType(type: string): MissingDataDatasetModifier {\n    this.modificationType = type;\n    return this;\n  }\n}\n","import { AbstractModifier } from \"./AbstractModifier\";\nimport { Dataset } from \"../Dataset\";\nimport { CalcMatrix2D } from \"../../Math/CalcMatrix2D\";\n\nexport class ShuffleDatasetModifier extends AbstractModifier {\n  /*public sortList: number[] = [];\n\n  constructor(dataset: Dataset) {\n    super(dataset);\n  }\n\n  apply(dataset: Dataset): Dataset {\n    return dataset;\n    let index = 0;\n    const data = Matrix.from(\n      dataset.data.transpose().data.sort((exampleA: number[], exampleB: number[]) => {\n        if (typeof this.sortList[index] === \"undefined\") {\n          // first run\n          this.sortList[index] = Math.random() - 0.5;\n        }\n        index += 1;\n        return this.sortList[index - 1];\n      })\n    ).transpose().data;\n    return new Dataset(dataset.getExampleSize(), dataset.getNumberOfExamples(), data);\n}*/\n}\n","import { AbstractModifier } from \"./AbstractModifier\";\nimport { Dataset } from \"../Dataset\";\nimport { CalcMatrix2D } from \"../../Math/CalcMatrix2D\";\n\nexport class SplitDatasetModifier extends AbstractModifier {\n  /*protected columns: Array<number>;\n\n  constructor(columns: Array<number>) {\n    super(null);\n    this.columns = columns.sort();\n  }\n\n  apply(dataset: Dataset): Array<Dataset> {\n    return [];\n    /*const inputData = [];\n    const outputData = [];\n\n    for (let col = 0; col < dataset.getNumberOfExamples(); col += 1) {\n      const example = dataset.exampleAt(col);\n      for (let row = 0, _inputIndex = 0, _outputIndex = 0; row < dataset.exampleSize; row += 1) {\n        if (this.columns.includes(row)) {\n          if (!inputData[_inputIndex]) {\n            inputData[_inputIndex] = [];\n          }\n          inputData[_inputIndex][col] = example.data[row][0];\n          _inputIndex += 1;\n        } else {\n          if (!outputData[_outputIndex]) {\n            outputData[_outputIndex] = [];\n          }\n          outputData[_outputIndex][col] = example.data[row][0];\n          _outputIndex += 1;\n        }\n      }\n    }\n\n    const newInputData = Matrix.from(inputData).transpose().data;\n    const newOutputData = Matrix.from(outputData).transpose().data;\n\n    const inputDataset = new Dataset(newInputData[0].length, newInputData.length, newInputData);\n    const outputDataset = new Dataset(newOutputData[0].length, newOutputData.length, newOutputData);\n\n    return [inputDataset, outputDataset];\n}*/\n}\n","import Math from \"./Math\";\nimport { NetworkBuilder1D } from \"./Network/Builder\";\nimport { SoftmaxLayer, LogisticLayer, ReluLayer, TanhLayer } from \"./Network/Layer\";\nimport {\n  OptimizerAdam,\n  OptimizerGradientDescent,\n  OptimizerAdagrad,\n  OptimizerMomentum,\n  OptimizerRMSProp,\n} from \"./Network/Trainer/Optimizer\";\nimport Trainer from \"./Network/Trainer\";\nimport { MeanSquaredErrorCost } from \"./Network/Trainer/Cost/MeanSquaredErrorCost\";\nimport { CrossEntropyCost } from \"./Network/Trainer/Cost/CrossEntropyCost\";\n\nconst NetworkBuilder = { NetworkBuilder1D };\nconst Layer = {\n  SoftmaxLayer,\n  LogisticLayer,\n  ReluLayer,\n  TanhLayer,\n};\nconst Optimizer = {\n  OptimizerAdam,\n  OptimizerGradientDescent,\n  OptimizerAdagrad,\n  OptimizerMomentum,\n  OptimizerRMSProp,\n};\nconst Cost = {\n  MeanSquaredErrorCost,\n  CrossEntropyCost,\n};\n\nimport native from \"../../build/Release/node_native_memory.node\";\nimport path from \"path\";\n\nnative.setModulePath(path.resolve(__dirname, \"../\"));\n\nimport { Dataset as DatasetDataset } from \"./Dataset\";\nimport { DatasetBuilder as DatasetBuilderBuilder, DatasetVocabularyBuilder } from \"./Dataset/Builder\";\nimport { SourceCSV } from \"./Dataset/Builder/Source\";\nimport { TextFile } from \"./Dataset/Builder/VocabularySource\";\n\nimport {\n  MinMaxScalingDatasetModifier,\n  MissingDataDatasetModifier,\n  ShuffleDatasetModifier,\n  SplitDatasetModifier,\n} from \"./Dataset/Modifier\";\n\nconst DatasetBuilder = {\n  DatasetBuilder: DatasetBuilderBuilder,\n  DatasetVocabularyBuilder,\n};\nconst Dataset = {\n  Dataset: DatasetDataset,\n};\nconst DatasetModifier = {\n  MinMaxScalingDatasetModifier,\n  MissingDataDatasetModifier,\n  ShuffleDatasetModifier,\n  SplitDatasetModifier,\n};\nconst DatasetBuilderSource = {\n  DatasetBuilderSourceCSV: SourceCSV,\n  DatasetVocabularyBuilderSourceTextFile: TextFile,\n};\n\nexport {\n  NetworkBuilder,\n  Layer,\n  Optimizer,\n  Trainer,\n  Cost,\n  Math,\n  DatasetBuilder,\n  Dataset,\n  DatasetModifier,\n  DatasetBuilderSource,\n};\nexport default {\n  NetworkBuilder,\n  Layer,\n  Optimizer,\n  Trainer,\n  Cost,\n  Math,\n  DatasetBuilder,\n  Dataset,\n  DatasetModifier,\n  DatasetBuilderSource,\n};\n"],"names":["process","dlopen","module","__dirname","error","Error","exports","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","id","loaded","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","nmd","paths","children","p","currentDevice","nodenative","CPU","getDevice","Calc","_classCallCheck","_defineProperty","result","this","_result","params","_params","kernel","exec","_this","Promise","resolve","then","async","arguments","length","fn","loadModule","loadFunction","input","output","execute","map","m","getMemory","e","console","CalcElement","width","height","depth","_dims","_device","_this$_dims","_slicedToArray","allocate","_allocated","_memory","alloc","count","setWidth","rows","setHeight","cols","setDepth","arr","set","Float64Array","calcSync","calc","setZeros","number","setRandom","setMax","setMin","reluBackpropagation","pow","sum","reluForwardPropagation","CalcScalar","_call","nb","setResult","setParams","execAsync","execSync","callback","getCalcSandbox","_this2","reject","dispose","free","other","destroy","dims","copyFrom","_CalcElement","_callSuper","_inherits","CalcColVector","memory","CalcRowVector","fromMemory","clone","CalcMatrix2D","index","maxCoeff","dot","add","w","b","forwardPropagation","a_prev","regularization","num_examples","backwardPropagation","transpose","logisticForwardPropagation","logisticBackwardPropagation","log","multiply","minusOne","conjugate","mOrNumber","divide","subtract","rowwiseSum","correctOutput","predictions","epsilon","crossEntropyLoss","crossEntropyDerivative","softmax","num","fraction","tanh","tanhDerivative","logMinusOne","sqrt","rowOffset","colOffset","numRows","numCols","block","softmaxDerivative","min","max","minMax","baseSandbox","that","_objectSpread","_epsilon","_rowOffset","_colOffset","_numRows","_numCols","gW","gb","dA_prev","_regularization","_num_examples","_m","leakyRelu","alpha","leakyReluBackpropagation","img2col","filterSize","stride","padding","adamOptimize","W","vW","vb","sW","sb","learningRate","beta1","beta2","t","updatedW","updatedB","updatedVW","updatedVB","updatedSW","updatedSB","_learningRate","_beta1","_beta2","_t","round","decimalPlaces","Math","CalcMatrix3D","Network","dimensions","layer","size","layers","push","forEach","forward","X","sigma","currentSigma","i","isLastLayer","getBackPropagation","propagate","path","resultJSON","type","getType","getSize","weights","data","_toConsumableArray","JSON","stringify","fs","err","AbstractBackPropagation","_createClass","previousLayer","LayerType","Backpropagation1Dto1D","_AbstractBackPropagat","numberOfExamples","dZ","replace","derivative","Z","previousActivations","A","_dZ$backwardPropagati2","AbstractLayer1D","_AbstractLayer","dW","db","resize","getHeight","getWidth","activation","is1D","is3D","getOutputWidth","getOutputHeight","getOutputDepth","AbstractLayer","backPropagation","LSTM","_AbstractLayer1D","BackpropagationLSTM","BackpropagationFactory","dH","dC","AbstractNetworkBuilder","dimension","network","layerClass","lastLayer","firstLayerTransition","transition","configure","setBackPropagation","create","addLayer","SoftmaxLayer","delta","LogisticLayer","logistic","TanhLayer","ReluLayer","_len","args","Array","_key","concat","relu","_this3","NetworkBuilder1D","_AbstractNetworkBuild","jsonPath","json","parse","toString","builder","layerData","createLayer","setSize","getNetwork","getLayers","AbstractOptimizer","batchSize","OptimizerAdam","_AbstractOptimizer","updatedMatrices","runAdamOptimizer","OptimizerGradientDescent","gradientDescent","OptimizerAdagrad","adagrad","OptimizerMomentum","momentum","beta","OptimizerRMSProp","rmsprop","BatchTrainer","_AbstractTrainer","optimizer","costFunction","_batchSize","inputDataset","outputDataset","getNumberOfExamples","setBatchSize","setLearningRate","iterations","startTime","Date","getTime","offset","getBatch","getLastLayer","backward","setT","optimize","verbose","verboseStep","currentResult","cost","endTime","accuracy","stepCallback","iteration","AbstractTrainer","miniBatchSize","loss","penalty","correctPredictions","predictionCol","col","outputCol","predictionIndex","outputIndex","AbstractCost","MeanSquaredErrorCost","_AbstractCost","CrossEntropyCost","Dataset","getExampleSize","DatasetBuilder","sourcePromise","source","dataset","DatasetVocabulary","DatasetVocabularyBuilder","str","AbstractSource","SourceCSV","_AbstractSource","csvtojson","noheader","trim","fromFile","_this$data$","exampleSize","Number","fromMatrix","TextFile","_AbstractVocabularySo","buffer","AbstractVocabularySource","AbstractModifier","MinMaxScalingDatasetModifier","_AbstractModifier","MissingDataDatasetModifier","rowsToFill","correctExamplesCount","valueToFill","exampleIndex","example","exampleAt","row","isNaN","modificationType","_ref","ShuffleDatasetModifier","SplitDatasetModifier","NetworkBuilder","Layer","Optimizer","Cost","native","DatasetBuilderBuilder","DatasetDataset","DatasetModifier","DatasetBuilderSource","DatasetBuilderSourceCSV","DatasetVocabularyBuilderSourceTextFile","Trainer"],"sourceRoot":""}